<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>&lt;no title&gt; &#8212; twit  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../../../../../../../_static/pygments.css?v=b3523f8e" />
    <link rel="stylesheet" type="text/css" href="../../../../../../../../../_static/alabaster.css?v=039e1c02" />
    <script data-url_root="../../../../../../../../../" id="documentation_options" src="../../../../../../../../../_static/documentation_options.js?v=b3ba4146"></script>
    <script src="../../../../../../../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../../../../../../../_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="../../../../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../../../../search.html" />
   
  <link rel="stylesheet" href="../../../../../../../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <p>package com.twitter.unified_user_actions.adapter</p>
<p>import com.twitter.clientapp.thriftscala._
import com.twitter.clientapp.thriftscala.SuggestionDetails
import com.twitter.guide.scribing.thriftscala._
import com.twitter.guide.scribing.thriftscala.{SemanticCoreInterest =&gt; SemanticCoreInterestV1}
import com.twitter.guide.scribing.thriftscala.{SimClusterInterest =&gt; SimClusterInterestV1}
import com.twitter.guide.scribing.thriftscala.TopicModuleMetadata.SemanticCoreInterest
import com.twitter.guide.scribing.thriftscala.TopicModuleMetadata.SimClusterInterest
import com.twitter.guide.scribing.thriftscala.TransparentGuideDetails.TopicMetadata
import com.twitter.logbase.thriftscala.LogBase
import com.twitter.scrooge.TFieldBlob
import com.twitter.suggests.controller_data.home_hitl_topic_annotation_prompt.thriftscala.HomeHitlTopicAnnotationPromptControllerData
import com.twitter.suggests.controller_data.home_hitl_topic_annotation_prompt.v1.thriftscala.{</p>
<blockquote>
<div><p>HomeHitlTopicAnnotationPromptControllerData =&gt; HomeHitlTopicAnnotationPromptControllerDataV1</p>
</div></blockquote>
<p>}
import com.twitter.suggests.controller_data.home_topic_annotation_prompt.thriftscala.HomeTopicAnnotationPromptControllerData
import com.twitter.suggests.controller_data.home_topic_annotation_prompt.v1.thriftscala.{</p>
<blockquote>
<div><p>HomeTopicAnnotationPromptControllerData =&gt; HomeTopicAnnotationPromptControllerDataV1</p>
</div></blockquote>
<p>}
import com.twitter.suggests.controller_data.home_topic_follow_prompt.thriftscala.HomeTopicFollowPromptControllerData
import com.twitter.suggests.controller_data.home_topic_follow_prompt.v1.thriftscala.{</p>
<blockquote>
<div><p>HomeTopicFollowPromptControllerData =&gt; HomeTopicFollowPromptControllerDataV1</p>
</div></blockquote>
<p>}
import com.twitter.suggests.controller_data.home_tweets.thriftscala.HomeTweetsControllerData
import com.twitter.suggests.controller_data.home_tweets.v1.thriftscala.{</p>
<blockquote>
<div><p>HomeTweetsControllerData =&gt; HomeTweetsControllerDataV1</p>
</div></blockquote>
<p>}
import com.twitter.suggests.controller_data.search_response.item_types.thriftscala.ItemTypesControllerData
import com.twitter.suggests.controller_data.search_response.thriftscala.SearchResponseControllerData
import com.twitter.suggests.controller_data.search_response.topic_follow_prompt.thriftscala.SearchTopicFollowPromptControllerData
import com.twitter.suggests.controller_data.search_response.tweet_types.thriftscala.TweetTypesControllerData
import com.twitter.suggests.controller_data.search_response.v1.thriftscala.{</p>
<blockquote>
<div><p>SearchResponseControllerData =&gt; SearchResponseControllerDataV1</p>
</div></blockquote>
<p>}
import com.twitter.suggests.controller_data.thriftscala.ControllerData
import com.twitter.suggests.controller_data.timelines_topic.thriftscala.TimelinesTopicControllerData
import com.twitter.suggests.controller_data.timelines_topic.v1.thriftscala.{</p>
<blockquote>
<div><p>TimelinesTopicControllerData =&gt; TimelinesTopicControllerDataV1</p>
</div></blockquote>
<p>}
import com.twitter.suggests.controller_data.v2.thriftscala.{ControllerData =&gt; ControllerDataV2}
import org.apache.thrift.protocol.TField
import org.junit.runner.RunWith
import org.scalatest.funsuite.AnyFunSuite
import org.scalatest.matchers.should.Matchers
import org.scalatestplus.junit.JUnitRunner
import com.twitter.util.mock.Mockito
import org.mockito.Mockito.when
import org.scalatest.prop.TableDrivenPropertyChecks</p>
<p>&#64;RunWith(classOf[JUnitRunner])
class TopicsIdUtilsSpec</p>
<blockquote>
<div><blockquote>
<div><p>extends AnyFunSuite
with Matchers
with Mockito
with TableDrivenPropertyChecks {</p>
</div></blockquote>
<p>import com.twitter.unified_user_actions.adapter.client_event.TopicIdUtils._</p>
<dl>
<dt>trait Fixture {</dt><dd><dl class="simple">
<dt>def buildLogBase(userId: Long): LogBase = {</dt><dd><p>val logBase = mock[LogBase]
when(logBase.country).thenReturn(Some(“US”))
when(logBase.userId).thenReturn(Some(userId))
when(logBase.timestamp).thenReturn(100L)
when(logBase.guestId).thenReturn(Some(1L))
when(logBase.userAgent).thenReturn(None)
when(logBase.language).thenReturn(Some(“en”))
logBase</p>
</dd>
</dl>
<p>}</p>
<dl>
<dt>def buildItemForTimeline(</dt><dd><p>itemId: Long,
itemType: ItemType,
topicId: Long,
fn: Long =&gt; ControllerData.V2</p>
</dd>
<dt>): Item = {</dt><dd><dl class="simple">
<dt>val item = Item(</dt><dd><p>id = Some(itemId),
itemType = Some(itemType),
suggestionDetails = Some(SuggestionDetails(decodedControllerData = Some(fn(topicId))))</p>
</dd>
</dl>
<p>)
item</p>
</dd>
</dl>
<p>}</p>
<dl>
<dt>def buildClientEventForHomeSearchTimeline(</dt><dd><p>itemId: Long,
itemType: ItemType,
topicId: Long,
fn: Long =&gt; ControllerData.V2,
userId: Long = 1L,
eventNamespaceOpt: Option[EventNamespace] = None,</p>
</dd>
<dt>): LogEvent = {</dt><dd><p>val logEvent = mock[LogEvent]
when(logEvent.eventNamespace).thenReturn(eventNamespaceOpt)
val eventsDetails = mock[EventDetails]
when(eventsDetails.items)</p>
<blockquote>
<div><p>.thenReturn(Some(Seq(buildItemForTimeline(itemId, itemType, topicId, fn))))</p>
</div></blockquote>
<p>val logbase = buildLogBase(userId)
when(logEvent.logBase).thenReturn(Some(logbase))
when(logEvent.eventDetails).thenReturn(Some(eventsDetails))
logEvent</p>
</dd>
</dl>
<p>}</p>
<dl>
<dt>def buildClientEventForHomeTweetsTimeline(</dt><dd><p>itemId: Long,
itemType: ItemType,
topicId: Long,
topicIds: Set[Long],
fn: (Long, Set[Long]) =&gt; ControllerData.V2,
userId: Long = 1L,
eventNamespaceOpt: Option[EventNamespace] = None,</p>
</dd>
<dt>): LogEvent = {</dt><dd><p>val logEvent = mock[LogEvent]
when(logEvent.eventNamespace).thenReturn(eventNamespaceOpt)
val eventsDetails = mock[EventDetails]
when(eventsDetails.items)</p>
<blockquote>
<div><p>.thenReturn(Some(Seq(buildItemForHomeTimeline(itemId, itemType, topicId, topicIds, fn))))</p>
</div></blockquote>
<p>val logbase = buildLogBase(userId)
when(logEvent.logBase).thenReturn(Some(logbase))
when(logEvent.eventDetails).thenReturn(Some(eventsDetails))
logEvent</p>
</dd>
</dl>
<p>}</p>
<dl class="simple">
<dt>def buildClientEventForGuide(</dt><dd><p>itemId: Long,
itemType: ItemType,
topicId: Long,
fn: Long =&gt; TopicMetadata,
userId: Long = 1L,
eventNamespaceOpt: Option[EventNamespace] = None,</p>
</dd>
<dt>): LogEvent = {</dt><dd><p>val logEvent = mock[LogEvent]
when(logEvent.eventNamespace).thenReturn(eventNamespaceOpt)
val logbase = buildLogBase(userId)
when(logEvent.logBase).thenReturn(Some(logbase))
val eventDetails = mock[EventDetails]
val item = buildItemForGuide(itemId, itemType, topicId, fn)
when(eventDetails.items).thenReturn(Some(Seq(item)))
when(logEvent.eventDetails).thenReturn(Some(eventDetails))
logEvent</p>
</dd>
</dl>
<p>}</p>
<dl>
<dt>def buildClientEventForOnboarding(</dt><dd><p>itemId: Long,
topicId: Long,
userId: Long = 1L</p>
</dd>
<dt>): LogEvent = {</dt><dd><p>val logEvent = mock[LogEvent]
val logbase = buildLogBase(userId)
when(logEvent.logBase).thenReturn(Some(logbase))
when(logEvent.eventNamespace).thenReturn(Some(buildNamespaceForOnboarding))
val eventDetails = mock[EventDetails]
val item = buildItemForOnboarding(itemId, topicId)
when(eventDetails.items)</p>
<blockquote>
<div><p>.thenReturn(Some(Seq(item)))</p>
</div></blockquote>
<p>when(logEvent.eventDetails).thenReturn(Some(eventDetails))
logEvent</p>
</dd>
</dl>
<p>}</p>
<dl class="simple">
<dt>def buildClientEventForOnboardingBackend(</dt><dd><p>topicId: Long,
userId: Long = 1L</p>
</dd>
<dt>): LogEvent = {</dt><dd><p>val logEvent = mock[LogEvent]
val logbase = buildLogBase(userId)
when(logEvent.logBase).thenReturn(Some(logbase))
when(logEvent.eventNamespace).thenReturn(Some(buildNamespaceForOnboardingBackend))
val eventDetails = buildEventDetailsForOnboardingBackend(topicId)
when(logEvent.eventDetails).thenReturn(Some(eventDetails))
logEvent</p>
</dd>
</dl>
<p>}</p>
<dl class="simple">
<dt>def defaultNamespace: EventNamespace = {</dt><dd><p>EventNamespace(Some(“iphone”), None, None, None, None, Some(“favorite”))</p>
</dd>
</dl>
<p>}</p>
<dl class="simple">
<dt>def buildNamespaceForOnboardingBackend: EventNamespace = {</dt><dd><dl class="simple">
<dt>EventNamespace(</dt><dd><p>Some(“iphone”),
Some(“onboarding_backend”),
Some(“subtasks”),
Some(“topics_selector”),
Some(“removed”),
Some(“selected”))</p>
</dd>
</dl>
</dd>
</dl>
<p>}</p>
<dl>
<dt>def buildNamespaceForOnboarding: EventNamespace = {</dt><dd><dl class="simple">
<dt>EventNamespace(</dt><dd><p>Some(“iphone”),
Some(“onboarding”),
Some(“topics_selector”),
None,
Some(“topic”),
Some(“follow”)</p>
</dd>
</dl>
<p>)</p>
</dd>
</dl>
<p>}</p>
<dl>
<dt>def buildItemForHomeTimeline(</dt><dd><p>itemId: Long,
itemType: ItemType,
topicId: Long,
topicIds: Set[Long],
fn: (Long, Set[Long]) =&gt; ControllerData.V2</p>
</dd>
<dt>): Item = {</dt><dd><dl>
<dt>val item = Item(</dt><dd><p>id = Some(itemId),
itemType = Some(itemType),
suggestionDetails =</p>
<blockquote>
<div><p>Some(SuggestionDetails(decodedControllerData = Some(fn(topicId, topicIds))))</p>
</div></blockquote>
</dd>
</dl>
<p>)
item</p>
</dd>
</dl>
<p>}</p>
<dl>
<dt>def buildItemForGuide(</dt><dd><p>itemId: Long,
itemType: ItemType,
topicId: Long,
fn: Long =&gt; TopicMetadata</p>
</dd>
<dt>): Item = {</dt><dd><p>val item = mock[Item]
when(item.id).thenReturn(Some(itemId))
when(item.itemType).thenReturn(Some(itemType))
when(item.suggestionDetails)</p>
<blockquote>
<div><p>.thenReturn(Some(SuggestionDetails(suggestionType = Some(“ErgTweet”))))</p>
</div></blockquote>
<p>val guideItemDetails = mock[GuideItemDetails]
when(guideItemDetails.transparentGuideDetails).thenReturn(Some(fn(topicId)))
when(item.guideItemDetails).thenReturn(Some(guideItemDetails))
item</p>
</dd>
</dl>
<p>}</p>
<dl>
<dt>def buildItemForOnboarding(</dt><dd><p>itemId: Long,
topicId: Long</p>
</dd>
<dt>): Item = {</dt><dd><dl class="simple">
<dt>val item = Item(</dt><dd><p>id = Some(itemId),
itemType = None,
description = Some(s”id=$topicId,row=1”)</p>
</dd>
</dl>
<p>)
item</p>
</dd>
</dl>
<p>}</p>
<dl>
<dt>def buildEventDetailsForOnboardingBackend(</dt><dd><p>topicId: Long</p>
</dd>
<dt>): EventDetails = {</dt><dd><p>val eventDetails = mock[EventDetails]
val item = Item(</p>
<blockquote>
<div><p>id = Some(topicId)</p>
</div></blockquote>
<p>)
val itemTmp = buildItemForOnboarding(10, topicId)
when(eventDetails.items).thenReturn(Some(Seq(itemTmp)))
when(eventDetails.targets).thenReturn(Some(Seq(item)))
eventDetails</p>
</dd>
</dl>
<p>}</p>
<dl>
<dt>def topicMetadataInGuide(topicId: Long): TopicMetadata =</dt><dd><dl>
<dt>TopicMetadata(</dt><dd><dl class="simple">
<dt>SemanticCoreInterest(</dt><dd><p>SemanticCoreInterestV1(domainId = “131”, entityId = topicId.toString)</p>
</dd>
</dl>
<p>)</p>
</dd>
</dl>
<p>)</p>
</dd>
<dt>def simClusterMetadataInGuide(simclusterId: Long = 1L): TopicMetadata =</dt><dd><dl>
<dt>TopicMetadata(</dt><dd><dl class="simple">
<dt>SimClusterInterest(</dt><dd><p>SimClusterInterestV1(simclusterId.toString)</p>
</dd>
</dl>
<p>)</p>
</dd>
</dl>
<p>)</p>
</dd>
<dt>def timelineTopicControllerData(topicId: Long): ControllerData.V2 =</dt><dd><dl>
<dt>ControllerData.V2(</dt><dd><dl>
<dt>ControllerDataV2.TimelinesTopic(</dt><dd><dl>
<dt>TimelinesTopicControllerData.V1(</dt><dd><dl class="simple">
<dt>TimelinesTopicControllerDataV1(</dt><dd><p>topicId = topicId,
topicTypesBitmap = 1</p>
</dd>
</dl>
<p>)</p>
</dd>
</dl>
<p>)))</p>
</dd>
</dl>
</dd>
</dl>
</dd>
<dt>def homeTweetControllerData(topicId: Long): ControllerData.V2 =</dt><dd><dl class="simple">
<dt>ControllerData.V2(</dt><dd><dl class="simple">
<dt>ControllerDataV2.HomeTweets(</dt><dd><dl class="simple">
<dt>HomeTweetsControllerData.V1(</dt><dd><dl class="simple">
<dt>HomeTweetsControllerDataV1(</dt><dd><p>topicId = Some(topicId)</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd>
<dt>def homeTopicFollowPromptControllerData(topicId: Long): ControllerData.V2 =</dt><dd><dl class="simple">
<dt>ControllerData.V2(</dt><dd><dl class="simple">
<dt>ControllerDataV2.HomeTopicFollowPrompt(HomeTopicFollowPromptControllerData.V1(</dt><dd><p>HomeTopicFollowPromptControllerDataV1(Some(topicId)))))</p>
</dd>
</dl>
</dd>
</dl>
</dd>
<dt>def homeTopicAnnotationPromptControllerData(topicId: Long): ControllerData.V2 =</dt><dd><dl class="simple">
<dt>ControllerData.V2(</dt><dd><dl class="simple">
<dt>ControllerDataV2.HomeTopicAnnotationPrompt(HomeTopicAnnotationPromptControllerData.V1(</dt><dd><p>HomeTopicAnnotationPromptControllerDataV1(tweetId = 1L, topicId = topicId))))</p>
</dd>
</dl>
</dd>
</dl>
</dd>
<dt>def homeHitlTopicAnnotationPromptControllerData(topicId: Long): ControllerData.V2 =</dt><dd><dl class="simple">
<dt>ControllerData.V2(</dt><dd><dl class="simple">
<dt>ControllerDataV2.HomeHitlTopicAnnotationPrompt(</dt><dd><dl class="simple">
<dt>HomeHitlTopicAnnotationPromptControllerData.V1(</dt><dd><p>HomeHitlTopicAnnotationPromptControllerDataV1(tweetId = 2L, topicId = topicId))))</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd>
<dt>def searchTopicFollowPromptControllerData(topicId: Long): ControllerData.V2 =</dt><dd><dl>
<dt>ControllerData.V2(</dt><dd><dl>
<dt>ControllerDataV2.SearchResponse(</dt><dd><dl>
<dt>SearchResponseControllerData.V1(</dt><dd><dl>
<dt>SearchResponseControllerDataV1(</dt><dd><dl class="simple">
<dt>Some(ItemTypesControllerData.TopicFollowControllerData(</dt><dd><p>SearchTopicFollowPromptControllerData(Some(topicId))</p>
</dd>
</dl>
<p>)),
None</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd>
<dt>def searchTweetTypesControllerData(topicId: Long): ControllerData.V2 =</dt><dd><dl>
<dt>ControllerData.V2(</dt><dd><dl>
<dt>ControllerDataV2.SearchResponse(</dt><dd><dl>
<dt>SearchResponseControllerData.V1(</dt><dd><dl>
<dt>SearchResponseControllerDataV1(</dt><dd><dl class="simple">
<dt>Some(ItemTypesControllerData.TweetTypesControllerData(</dt><dd><p>TweetTypesControllerData(None, Some(topicId))</p>
</dd>
</dl>
<p>)),
None</p>
</dd>
</dl>
<p>)</p>
</dd>
</dl>
<p>)))</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
<p>//used for creating logged out user client events
def buildLogBaseWithoutUserId(guestId: Long): LogBase =</p>
<blockquote>
<div><dl class="simple">
<dt>LogBase(</dt><dd><p>ipAddress = “120.10.10.20”,
guestId = Some(guestId),
userAgent = None,
transactionId = “”,
country = Some(“US”),
timestamp = 100L,
language = Some(“en”)</p>
</dd>
</dl>
<p>)</p>
</div></blockquote>
</dd>
</dl>
<p>}</p>
<dl>
<dt>test(“getTopicId should correctly find topic id from item for home timeline and search”) {</dt><dd><p>new Fixture {</p>
<blockquote>
<div><dl class="simple">
<dt>val testData = Table(</dt><dd><p>(“ItemType”, “topicId”, “controllerData”),
(ItemType.Tweet, 1L, timelineTopicControllerData(1L)),
(ItemType.User, 2L, timelineTopicControllerData(2L)),
(ItemType.Topic, 3L, homeTweetControllerData(3L)),
(ItemType.Topic, 4L, homeTopicFollowPromptControllerData(4L)),
(ItemType.Topic, 5L, searchTopicFollowPromptControllerData(5L)),
(ItemType.Topic, 6L, homeHitlTopicAnnotationPromptControllerData(6L))</p>
</dd>
</dl>
<p>)</p>
<dl class="simple">
<dt>forEvery(testData) {</dt><dd><dl class="simple">
<dt>(itemType: ItemType, topicId: Long, controllerDataV2: ControllerData.V2) =&gt;</dt><dd><dl class="simple">
<dt>getTopicId(</dt><dd><p>buildItemForTimeline(1, itemType, topicId, _ =&gt; controllerDataV2),
defaultNamespace) shouldEqual Some(topicId)</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
<p>}</p>
</div></blockquote>
<p>}</p>
</dd>
</dl>
<p>}</p>
<dl>
<dt>test(“getTopicId should correctly find topic id from item for guide events”) {</dt><dd><dl>
<dt>new Fixture {</dt><dd><dl class="simple">
<dt>getTopicId(</dt><dd><p>buildItemForGuide(1, ItemType.Tweet, 100, topicMetadataInGuide),
defaultNamespace</p>
</dd>
</dl>
<p>) shouldEqual Some(100)</p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
<p>}</p>
<dl>
<dt>test(“getTopicId should correctly find topic id for onboarding events”) {</dt><dd><dl>
<dt>new Fixture {</dt><dd><dl class="simple">
<dt>getTopicId(</dt><dd><p>buildItemForOnboarding(1, 100),
buildNamespaceForOnboarding</p>
</dd>
</dl>
<p>) shouldEqual Some(100)</p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
<p>}</p>
<dl>
<dt>test(“should return TopicId From HomeSearch”) {</dt><dd><dl>
<dt>val testData = Table(</dt><dd><p>(“controllerData”, “topicId”),
(</p>
<blockquote>
<div><dl class="simple">
<dt>ControllerData.V2(</dt><dd><dl class="simple">
<dt>ControllerDataV2.HomeTweets(</dt><dd><p>HomeTweetsControllerData.V1(HomeTweetsControllerDataV1(topicId = Some(1L))))</p>
</dd>
</dl>
</dd>
</dl>
<p>),
Some(1L)),</p>
</div></blockquote>
<dl>
<dt>(</dt><dd><dl class="simple">
<dt>ControllerData.V2(</dt><dd><dl class="simple">
<dt>ControllerDataV2.HomeTopicFollowPrompt(HomeTopicFollowPromptControllerData</dt><dd><p>.V1(HomeTopicFollowPromptControllerDataV1(topicId = Some(2L))))),</p>
</dd>
</dl>
</dd>
</dl>
<p>Some(2L)),</p>
</dd>
</dl>
<dl>
<dt>(</dt><dd><dl>
<dt>ControllerData.V2(</dt><dd><dl>
<dt>ControllerDataV2.TimelinesTopic(</dt><dd><dl class="simple">
<dt>TimelinesTopicControllerData.V1(</dt><dd><p>TimelinesTopicControllerDataV1(topicId = 3L, topicTypesBitmap = 100)</p>
</dd>
</dl>
<p>))),</p>
</dd>
</dl>
</dd>
</dl>
<p>Some(3L)),</p>
</dd>
</dl>
<dl>
<dt>(</dt><dd><dl class="simple">
<dt>ControllerData.V2(</dt><dd><dl class="simple">
<dt>ControllerDataV2.SearchResponse(</dt><dd><dl class="simple">
<dt>SearchResponseControllerData.V1(SearchResponseControllerDataV1(itemTypesControllerData =</dt><dd><dl class="simple">
<dt>Some(ItemTypesControllerData.TopicFollowControllerData(</dt><dd><p>SearchTopicFollowPromptControllerData(topicId = Some(4L)))))))),</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
<p>Some(4L)),</p>
</dd>
</dl>
<dl>
<dt>(</dt><dd><dl class="simple">
<dt>ControllerData.V2(</dt><dd><dl class="simple">
<dt>ControllerDataV2.SearchResponse(</dt><dd><dl class="simple">
<dt>SearchResponseControllerData.V1(</dt><dd><dl class="simple">
<dt>SearchResponseControllerDataV1(itemTypesControllerData = Some(ItemTypesControllerData</dt><dd><p>.TweetTypesControllerData(TweetTypesControllerData(topicId = Some(5L)))))))),</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
<p>Some(5L)),</p>
</dd>
</dl>
<dl>
<dt>(</dt><dd><dl class="simple">
<dt>ControllerData.V2(</dt><dd><dl class="simple">
<dt>ControllerDataV2</dt><dd><p>.SearchResponse(SearchResponseControllerData.V1(SearchResponseControllerDataV1()))),</p>
</dd>
</dl>
</dd>
</dl>
<p>None)</p>
</dd>
</dl>
</dd>
</dl>
<p>)</p>
<dl class="simple">
<dt>forEvery(testData) { (controllerDataV2: ControllerData.V2, topicId: Option[Long]) =&gt;</dt><dd><dl class="simple">
<dt>getTopicIdFromHomeSearch(</dt><dd><dl class="simple">
<dt>Item(suggestionDetails = Some(</dt><dd><p>SuggestionDetails(decodedControllerData = Some(controllerDataV2))))) shouldEqual topicId</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
<p>}</p>
<dl>
<dt>test(“test TopicId From Onboarding”) {</dt><dd><dl>
<dt>val testData = Table(</dt><dd><p>(“Item”, “EventNamespace”, “topicId”),
(</p>
<blockquote>
<div><p>Item(description = Some(“id=11,key=value”)),
EventNamespace(</p>
<blockquote>
<div><p>page = Some(“onboarding”),
section = Some(“section has topic”),
component = Some(“component has topic”),
element = Some(“element has topic”)</p>
</div></blockquote>
<p>),
Some(11L)),</p>
</div></blockquote>
<dl>
<dt>(</dt><dd><p>Item(description = Some(“id=22,key=value”)),
EventNamespace(</p>
<blockquote>
<div><p>page = Some(“onboarding”),
section = Some(“section has topic”)</p>
</div></blockquote>
<p>),
Some(22L)),</p>
</dd>
</dl>
<dl>
<dt>(</dt><dd><p>Item(description = Some(“id=33,key=value”)),
EventNamespace(</p>
<blockquote>
<div><p>page = Some(“onboarding”),
component = Some(“component has topic”)</p>
</div></blockquote>
<p>),
Some(33L)),</p>
</dd>
</dl>
<dl>
<dt>(</dt><dd><p>Item(description = Some(“id=44,key=value”)),
EventNamespace(</p>
<blockquote>
<div><p>page = Some(“onboarding”),
element = Some(“element has topic”)</p>
</div></blockquote>
<p>),
Some(44L)),</p>
</dd>
</dl>
<dl>
<dt>(</dt><dd><p>Item(description = Some(“id=678,key=value”)),
EventNamespace(</p>
<blockquote>
<div><p>page = Some(“onXYZboarding”),
section = Some(“section has topic”),
component = Some(“component has topic”),
element = Some(“element has topic”)</p>
</div></blockquote>
<p>),
None),</p>
</dd>
</dl>
<dl>
<dt>(</dt><dd><p>Item(description = Some(“id=678,key=value”)),
EventNamespace(</p>
<blockquote>
<div><p>page = Some(“page has onboarding”),
section = Some(“section has topPic”),
component = Some(“component has topPic”),
element = Some(“element has topPic”)</p>
</div></blockquote>
<p>),
None),</p>
</dd>
</dl>
<dl>
<dt>(</dt><dd><p>Item(description = Some(“key=value,id=678”)),
EventNamespace(</p>
<blockquote>
<div><p>page = Some(“page has onboarding”),
section = Some(“section has topic”),
component = Some(“component has topic”),
element = Some(“element has topic”)</p>
</div></blockquote>
<p>),
None)</p>
</dd>
</dl>
</dd>
</dl>
<p>)</p>
<dl class="simple">
<dt>forEvery(testData) { (item: Item, eventNamespace: EventNamespace, topicId: Option[Long]) =&gt;</dt><dd><p>getTopicFromOnboarding(item, eventNamespace) shouldEqual topicId</p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
<p>}</p>
<dl>
<dt>test(“test from Guide”) {</dt><dd><dl>
<dt>val testData = Table(</dt><dd><p>(“guideItemDetails”, “topicId”),
(</p>
<blockquote>
<div><dl class="simple">
<dt>GuideItemDetails(transparentGuideDetails = Some(</dt><dd><dl class="simple">
<dt>TransparentGuideDetails.TopicMetadata(</dt><dd><p>TopicModuleMetadata.TttInterest(tttInterest = TttInterest.unsafeEmpty)))),</p>
</dd>
</dl>
</dd>
</dl>
<p>None),</p>
</div></blockquote>
<dl>
<dt>(</dt><dd><dl class="simple">
<dt>GuideItemDetails(transparentGuideDetails = Some(</dt><dd><dl class="simple">
<dt>TransparentGuideDetails.TopicMetadata(</dt><dd><dl class="simple">
<dt>TopicModuleMetadata.SimClusterInterest(simClusterInterest =</dt><dd><p>com.twitter.guide.scribing.thriftscala.SimClusterInterest.unsafeEmpty)))),</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
<p>None),</p>
</dd>
</dl>
<dl>
<dt>(</dt><dd><dl class="simple">
<dt>GuideItemDetails(transparentGuideDetails = Some(</dt><dd><dl class="simple">
<dt>TransparentGuideDetails.TopicMetadata(TopicModuleMetadata.UnknownUnionField(field =</dt><dd><p>TFieldBlob(new TField(), Array.empty[Byte]))))),</p>
</dd>
</dl>
</dd>
</dl>
<p>None),</p>
</dd>
</dl>
<dl>
<dt>(</dt><dd><dl class="simple">
<dt>GuideItemDetails(transparentGuideDetails = Some(</dt><dd><dl class="simple">
<dt>TransparentGuideDetails.TopicMetadata(</dt><dd><dl class="simple">
<dt>TopicModuleMetadata.SemanticCoreInterest(</dt><dd><dl class="simple">
<dt>com.twitter.guide.scribing.thriftscala.SemanticCoreInterest.unsafeEmpty</dt><dd><p>.copy(domainId = “131”, entityId = “1”))))),</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
<p>Some(1L)),</p>
</dd>
</dl>
</dd>
</dl>
<p>)</p>
<dl class="simple">
<dt>forEvery(testData) { (guideItemDetails: GuideItemDetails, topicId: Option[Long]) =&gt;</dt><dd><p>getTopicFromGuide(Item(guideItemDetails = Some(guideItemDetails))) shouldEqual topicId</p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
<p>}</p>
<dl>
<dt>test(“getTopicId should return topicIds”) {</dt><dd><dl>
<dt>getTopicId(</dt><dd><dl>
<dt>item = Item(suggestionDetails = Some(</dt><dd><dl>
<dt>SuggestionDetails(decodedControllerData = Some(</dt><dd><dl class="simple">
<dt>ControllerData.V2(</dt><dd><dl class="simple">
<dt>ControllerDataV2.HomeTweets(</dt><dd><p>HomeTweetsControllerData.V1(HomeTweetsControllerDataV1(topicId = Some(1L))))</p>
</dd>
</dl>
</dd>
</dl>
<p>))))),</p>
</dd>
</dl>
</dd>
<dt>namespace = EventNamespace(</dt><dd><p>page = Some(“onboarding”),
section = Some(“section has topic”),
component = Some(“component has topic”),
element = Some(“element has topic”)</p>
</dd>
</dl>
<p>)</p>
</dd>
</dl>
<p>) shouldEqual Some(1L)</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
<p>}</p>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../../../../../../../index.html">twit</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../../../../../../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../../../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, jare.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../../../../../../../../_sources/unified_user_actions/adapter/src/test/scala/com/twitter/unified_user_actions/adapter/TopicsIdUtilsSpec.scala.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>