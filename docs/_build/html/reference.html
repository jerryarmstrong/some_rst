<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>docs/reference.md &#8212; twit  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b3523f8e" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=039e1c02" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=b3ba4146"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="docs-reference-md">
<h1>docs/reference.md<a class="headerlink" href="#docs-reference-md" title="Permalink to this heading">Â¶</a></h1>
<p>Last edited: 2020-08-13 15:30:25</p>
<p>Contents:</p>
<div class="highlight-md notranslate"><div class="highlight"><pre><span></span><span class="gh"># API Reference</span>
</pre></div>
</div>
<ul>
<li><p>[API Reference](#api-reference)
- [Validation](#validation)</p>
<blockquote>
<div><ul class="simple">
<li><p>[<cite>assert</cite>](#assert)</p></li>
<li><p>[<cite>coerce</cite>](#coerce)</p></li>
<li><p>[<cite>is</cite>](#is)</p></li>
<li><p>[<cite>validate</cite>](#validate)</p></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><p>[Types](#types)
- [<cite>any</cite>](#any)
- [<cite>array</cite>](#array)
- [<cite>boolean</cite>](#boolean)
- [<cite>date</cite>](#date)
- [<cite>enums</cite>](#enums)
- [<cite>instance</cite>](#instance)
- [<cite>intersection</cite>](#intersection)
- [<cite>literal</cite>](#literal)
- [<cite>map</cite>](#map)
- [<cite>never</cite>](#never)
- [<cite>number</cite>](#number)
- [<cite>object</cite>](#object)
- [<cite>optional</cite>](#optional)
- [<cite>nullable</cite>](#nullable)
- [<cite>partial</cite>](#partial)
- [<cite>record</cite>](#record)
- [<cite>set</cite>](#set)
- [<cite>string</cite>](#string)
- [<cite>tuple</cite>](#tuple)
- [<cite>type</cite>](#type)
- [<cite>union</cite>](#union)
- [Custom Types](#custom-types)</p></li>
<li><p>[Refinements](#refinements)
- [<cite>empty</cite>](#empty)
- [<cite>length</cite>](#length)
- [<cite>pattern</cite>](#pattern)
- [Custom Refinements](#custom-refinements)</p></li>
<li><p>[Coercions](#coercions)
- [<cite>defaulted</cite>](#defaulted)
- [<cite>masked</cite>](#masked)
- [Custom Coercions](#custom-coercions)</p></li>
<li><p>[Errors](#errors)
- [<cite>StructError</cite>](#structerror)
- [Error Properties](#error-properties)
- [Multiple Errors](#multiple-errors)</p></li>
<li><p>[Utilities](#utilities)
- [<cite>StructType</cite>](#structtype)</p></li>
</ul>
</li>
</ul>
<p>## Validation</p>
<p>### <cite>assert</cite></p>
<p><cite>assert&lt;T&gt;(value: unknown, struct: Struct&lt;T&gt;) =&gt; asserts value is T</cite></p>
<p>Assert that <cite>value</cite> is valid according to a <cite>struct</cite>. If the value is invalid a [<cite>StructError</cite>](#structerror) will be thrown.</p>
<p>&gt; ðŸ¤– When using TypeScript <cite>is</cite> acts as an assertion guard, so you can ensure that after calling it the <cite>value</cite> matches the shape of the struct.</p>
<p>### <cite>coerce</cite></p>
<p><cite>coerce&lt;T&gt;(value: unknown, struct: Struct&lt;T&gt;) =&gt; unknown</cite></p>
<p>Coerce a <cite>value</cite> using the coercion logic that is built-in to the struct, returning the newly coerced value.</p>
<p>&gt; ðŸ¤– If you want coercion logic like defaulted values, you <strong>must</strong> call this helper before running validation.</p>
<p>### <cite>is</cite></p>
<p><cite>is&lt;T&gt;(value: unknown, struct: Struct&lt;T&gt;) =&gt; value is T</cite></p>
<p>Test that <cite>value</cite> is valid, returning a boolean representing whether it is valid or not.</p>
<p>&gt; ðŸ¤– When using TypeScript <cite>is</cite> acts as a type guard, so you can use it in an <cite>if</cite> statement to ensure that inside the statement the <cite>value</cite> matches the shape of the struct.</p>
<p>### <cite>validate</cite></p>
<p><cite>validate&lt;T&gt;(value: unknown, struct: Struct&lt;T&gt;) =&gt; [StructError, T]</cite></p>
<p>Validate <cite>value</cite>, returning a result tuple. If the value is invalid the first element will be a [<cite>StructError</cite>](#structerror). Otherwise, the first element will be <cite>undefined</cite> and the second element will be a value that is guaranteed to match the struct.</p>
<p>## Types</p>
<p>Superstruct exposes factory functions for a variety of common JavaScript (and TypeScript) types. You can also define your own custom validation functions using the <cite>struct</cite> factory.</p>
<p>### <cite>any</cite></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">any()</span>
<span class="pre">`</span></code></p>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a>ts
â€˜validâ€™
42
true
undefined
null
{</p>
<blockquote>
<div><p>also: â€˜validâ€™</p>
</div></blockquote>
<section id="id5">
<h2>}<a class="headerlink" href="#id5" title="Permalink to this heading">Â¶</a></h2>
<p><cite>any</cite> structs accept any value as valid.</p>
<p>### <cite>array</cite></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">array(number())</span>
<span class="pre">array(object({</span> <span class="pre">id:</span> <span class="pre">string()</span> <span class="pre">}))</span>
<span class="pre">`</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">;[1,</span> <span class="pre">2,</span> <span class="pre">3][{</span> <span class="pre">id:</span> <span class="pre">'1'</span> <span class="pre">}]</span>
<span class="pre">`</span></code></p>
<p><cite>array</cite> structs accept a list of values of a specific type.</p>
<p>### <cite>boolean</cite></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">boolean()</span>
<span class="pre">`</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">true</span>
<span class="pre">false</span>
<span class="pre">`</span></code></p>
<p><cite>boolean</cite> structs accept the boolean values <cite>true</cite> and <cite>false</cite>.</p>
<p>### <cite>date</cite></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">date()</span>
<span class="pre">`</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">new</span> <span class="pre">Date()</span>
<span class="pre">`</span></code></p>
<p><cite>date</cite> structs accept JavaScript <cite>Date</cite> instances.</p>
<p>&gt; ðŸ¤– To avoid unexpected runtime errors, <cite>date</cite> structs do <strong>not</strong> accept invalid <cite>Date</cite> objects, even though they are technically an instance of a <cite>Date</cite>. This meshes with the 99% use case where invalid dates create inconsistencies.</p>
<p>### <cite>enums</cite></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">enums(['Jane',</span> <span class="pre">'John',</span> <span class="pre">'Jack',</span> <span class="pre">'Jill'])</span>
<span class="pre">`</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">'Jane'</span>
<span class="pre">'John'</span>
<span class="pre">`</span></code></p>
<p><cite>enums</cite> structs validate that a value is one of a specific set of literals values.</p>
<p>### <cite>instance</cite></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">instance(MyClass)</span>
<span class="pre">`</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">new</span> <span class="pre">MyClass()</span>
<span class="pre">`</span></code></p>
<p><cite>instance</cite> structs validate that a value is an instance of a particular class, using JavaScriptâ€™s built-in <cite>instanceof</cite> operator.</p>
<p>### <cite>intersection</cite></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">intersection([string(),</span> <span class="pre">Email])</span>
<span class="pre">`</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">'jane&#64;example.com'</span>
<span class="pre">`</span></code></p>
<p><cite>intersection</cite> structs validate that a value matches <strong>all</strong> of many structs. It takes existing struct objects as arguments.</p>
<p>### <cite>literal</cite></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">literal(42)</span>
<span class="pre">`</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">42</span>
<span class="pre">`</span></code></p>
<p><cite>literal</cite> structs enforce that a value matches an exact value using the <cite>===</cite> operator.</p>
<p>### <cite>map</cite></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">map([string(),</span> <span class="pre">number()])</span>
<span class="pre">`</span></code></p>
<p><a href="#id6"><span class="problematic" id="id7">``</span></a><a href="#id8"><span class="problematic" id="id9">`</span></a>ts
new Map([</p>
<blockquote>
<div><p>[â€˜aâ€™, 1],
[â€˜bâ€™, 2],</p>
</div></blockquote>
</section>
<section id="id10">
<h2>])<a class="headerlink" href="#id10" title="Permalink to this heading">Â¶</a></h2>
<p><cite>map</cite> structs validate that a value is a <cite>Map</cite> object with specific types for its keys and values.</p>
<p>### <cite>never</cite></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">never()</span>
<span class="pre">`</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">`</span></code></p>
<p><cite>never</cite> structs will fail validation for <strong>every</strong> value.</p>
<p>### <cite>number</cite></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">number()</span>
<span class="pre">`</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">0</span>
<span class="pre">3.14</span>
<span class="pre">42</span>
<span class="pre">Infinity</span>
<span class="pre">`</span></code></p>
<p><cite>number</cite> structs validate that a value is a number.</p>
<p>### <cite>object</cite></p>
<p><a href="#id11"><span class="problematic" id="id12">``</span></a><a href="#id13"><span class="problematic" id="id14">`</span></a>ts
struct({</p>
<blockquote>
<div><p>id: number(),
name: string(),</p>
</div></blockquote>
</section>
<section id="id15">
<h2>})<a class="headerlink" href="#id15" title="Permalink to this heading">Â¶</a></h2>
<p><a href="#id16"><span class="problematic" id="id17">``</span></a><a href="#id18"><span class="problematic" id="id19">`</span></a>ts
{</p>
<blockquote>
<div><p>id: 1,
name: â€˜Jane Smithâ€™,</p>
</div></blockquote>
</section>
<section id="id20">
<h2>}<a class="headerlink" href="#id20" title="Permalink to this heading">Â¶</a></h2>
<p><cite>object</cite> structs validate that a value is an object and that each of its properties match a specific type as well.</p>
<p>### <cite>optional</cite></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">optional(string())</span>
<span class="pre">`</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">'a</span> <span class="pre">string</span> <span class="pre">of</span> <span class="pre">text'</span>
<span class="pre">undefined</span>
<span class="pre">`</span></code></p>
<p><cite>optional</cite> structs validate that a value matches a specific struct, or that it is <cite>undefined</cite>.</p>
<p>### <cite>nullable</cite></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">nullable(string())</span>
<span class="pre">`</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">'a</span> <span class="pre">string</span> <span class="pre">of</span> <span class="pre">text'</span>
<span class="pre">nullable</span>
<span class="pre">`</span></code></p>
<p><cite>nullable</cite> structs validate that a value matches a specific struct, or that it is <cite>null</cite>.</p>
<p>### <cite>partial</cite></p>
<p><a href="#id21"><span class="problematic" id="id22">``</span></a><a href="#id23"><span class="problematic" id="id24">`</span></a>ts
partial({</p>
<blockquote>
<div><p>a: number(),
b: number(),</p>
</div></blockquote>
</section>
<section id="id25">
<h2>})<a class="headerlink" href="#id25" title="Permalink to this heading">Â¶</a></h2>
<p><a href="#id26"><span class="problematic" id="id27">``</span></a><a href="#id28"><span class="problematic" id="id29">`</span></a>ts
{</p>
<blockquote>
<div><p>a: 1,
b: 2,
c: 3,</p>
</div></blockquote>
</section>
<section id="id30">
<h2>}<a class="headerlink" href="#id30" title="Permalink to this heading">Â¶</a></h2>
<p><cite>partial</cite> structs are similar to <cite>object</cite> structs, but they only require that the specified properties exist, and they donâ€™t care about other properties on the object.</p>
<p>### <cite>record</cite></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">record([string(),</span> <span class="pre">number()])</span>
<span class="pre">`</span></code></p>
<p><a href="#id31"><span class="problematic" id="id32">``</span></a><a href="#id33"><span class="problematic" id="id34">`</span></a>ts
{</p>
<blockquote>
<div><p>a: 1,
b: 2,</p>
</div></blockquote>
</section>
<section id="id35">
<h2>}<a class="headerlink" href="#id35" title="Permalink to this heading">Â¶</a></h2>
<p><cite>record</cite> structs validate an object with specific types for its keys and values. But, unlike <cite>object</cite> structs, they do not enforce a specific set of keys.</p>
<p>### <cite>set</cite></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">set(string())</span>
<span class="pre">`</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">new</span> <span class="pre">Set(['a',</span> <span class="pre">'b',</span> <span class="pre">'c'])</span>
<span class="pre">`</span></code></p>
<p><cite>set</cite> structs validate that a value is a <cite>Set</cite> instance with elements of a specific type.</p>
<p>### <cite>string</cite></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">string()</span>
<span class="pre">`</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">'a</span> <span class="pre">string</span> <span class="pre">of</span> <span class="pre">text'</span>
<span class="pre">`</span></code></p>
<p><cite>string</cite> structs validate that a value is a string.</p>
<p>### <cite>tuple</cite></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">tuple([string(),</span> <span class="pre">number(),</span> <span class="pre">boolean()])</span>
<span class="pre">`</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">;['a',</span> <span class="pre">1,</span> <span class="pre">true]</span>
<span class="pre">`</span></code></p>
<p><cite>tuple</cite> structs validate that a value is an array of a specific length with values each of a specific type.</p>
<p>### <cite>type</cite></p>
<p><a href="#id36"><span class="problematic" id="id37">``</span></a><a href="#id38"><span class="problematic" id="id39">`</span></a>ts
type({</p>
<blockquote>
<div><p>name: string(),
walk: func(),</p>
</div></blockquote>
</section>
<section id="id40">
<h2>})<a class="headerlink" href="#id40" title="Permalink to this heading">Â¶</a></h2>
<p><a href="#id41"><span class="problematic" id="id42">``</span></a><a href="#id43"><span class="problematic" id="id44">`</span></a>ts
{</p>
<blockquote>
<div><p>name: â€˜Jillâ€™,
age: 37,
race: â€˜humanâ€™,
walk: () =&gt; {},</p>
</div></blockquote>
</section>
<section id="id45">
<h2>}<a class="headerlink" href="#id45" title="Permalink to this heading">Â¶</a></h2>
<p><cite>type</cite> structs validate that a value has a set of properties on it, but it does not assert anything about unspecified properties. This allows you to assert that a particular set of functionality exists without a strict equality check for properties.</p>
<p>### <cite>union</cite></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">union([string(),</span> <span class="pre">number()])</span>
<span class="pre">`</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">'a</span> <span class="pre">string'</span>
<span class="pre">42</span>
<span class="pre">`</span></code></p>
<p><cite>union</cite> structs validate that a value matches at least one of many types.</p>
<p>### Custom Types</p>
<p>You can also define your own custom structs that are specific to your applicationâ€™s requirements, like so:</p>
<p><a href="#id46"><span class="problematic" id="id47">``</span></a><a href="#id48"><span class="problematic" id="id49">`</span></a>ts
import { struct } from â€˜superstructâ€™
import isEmail from â€˜is-emailâ€™
import isUuid from â€˜is-uuidâ€™</p>
<p>const Email = struct(â€˜Emailâ€™, isEmail)
const Uuid = struct(â€˜Uuidâ€™, (value) =&gt; isUuid.v4(value))</p>
<dl class="simple">
<dt>const User = object({</dt><dd><p>id: Uuid,
name: string(),
email: Email,
age: number(),</p>
</dd>
</dl>
</section>
<section id="id50">
<h2>})<a class="headerlink" href="#id50" title="Permalink to this heading">Â¶</a></h2>
<p>Custom types take validator functions that return either <cite>true/false</cite> or an array of <cite>StructFailure</cite> objects, in case you want to build more helpful error messages.</p>
<p>## Refinements</p>
<p>Superstruct allows you to constrain existing structs with further validation. This doesnâ€™t change the type of the struct, but simply introduces extra validation logic. This can be useful for example when ensuring that a string matches a specific <cite>RegExp</cite>.</p>
<p>### <cite>empty</cite></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">import</span> <span class="pre">{</span> <span class="pre">empty</span> <span class="pre">}</span> <span class="pre">from</span> <span class="pre">'superstruct'</span>
<span class="pre">`</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">empty(string())</span>
<span class="pre">empty(array())</span>
<span class="pre">`</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">''</span>
<span class="pre">[]</span>
<span class="pre">`</span></code></p>
<p><cite>empty</cite> enforces that a <cite>string</cite> or <cite>array</cite> struct also requires a length of <cite>0</cite>.</p>
<p>### <cite>length</cite></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">import</span> <span class="pre">{</span> <span class="pre">length</span> <span class="pre">}</span> <span class="pre">from</span> <span class="pre">'superstruct'</span>
<span class="pre">`</span></code></p>
<p><a href="#id51"><span class="problematic" id="id52">``</span></a><a href="#id53"><span class="problematic" id="id54">`</span></a>ts
length(string(), 1, 100)</p>
<p>length(array(number), 0, Infinity)
<a href="#id55"><span class="problematic" id="id56">``</span></a><a href="#id57"><span class="problematic" id="id58">`</span></a></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">'a</span> <span class="pre">string</span> <span class="pre">of</span> <span class="pre">text'[(1,</span> <span class="pre">2,</span> <span class="pre">3)]</span>
<span class="pre">`</span></code></p>
<p><cite>length</cite> enforces that a <cite>string</cite> or <cite>array</cite> struct also is within a certain <cite>min</cite> and <cite>max</cite> length.</p>
<p>### <cite>pattern</cite></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">import</span> <span class="pre">{</span> <span class="pre">pattern</span> <span class="pre">}</span> <span class="pre">from</span> <span class="pre">'superstruct'</span>
<span class="pre">`</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">pattern(string(),</span> <span class="pre">/\d+/)</span>
<span class="pre">`</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">'123'</span>
<span class="pre">`</span></code></p>
<p><cite>pattern</cite> enforces that a <cite>string</cite> struct also matches a supplied <cite>RegExp</cite>.</p>
<p>### Custom Refinements</p>
<p>You can also define your own custom refinments that are specific to your applicationâ€™s requirements, like so:</p>
<p><a href="#id59"><span class="problematic" id="id60">``</span></a><a href="#id61"><span class="problematic" id="id62">`</span></a>ts
import { refinement } from â€˜superstructâ€™</p>
<dl class="simple">
<dt>const PositiveInteger = refinement(number(), â€˜PositiveIntegerâ€™, (value) =&gt; {</dt><dd><p>return Number.isInteger(value) &amp;&amp; value &gt;= 0</p>
</dd>
</dl>
</section>
<section id="id63">
<h2>})<a class="headerlink" href="#id63" title="Permalink to this heading">Â¶</a></h2>
<p>This allows you to define more fine-grained runtime validation, while still preserving the <cite>number</cite> type at compile time.</p>
<p>## Coercions</p>
<p>Superstruct allows structs to be augmented with coercion logic, allowing you to transform input data before validating it. This is most commonly used to apply default values to an input, but it can be used for more complex cases like pre-trimming strings, or pre-parsing inputs.</p>
<p>### <cite>defaulted</cite></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">import</span> <span class="pre">{</span> <span class="pre">defaulted</span> <span class="pre">}</span> <span class="pre">from</span> <span class="pre">'superstruct'</span>
<span class="pre">`</span></code></p>
<p><a href="#id64"><span class="problematic" id="id65">``</span></a><a href="#id66"><span class="problematic" id="id67">`</span></a>ts
defaulted(string(), â€˜Untitledâ€™)</p>
<dl class="simple">
<dt>defaulted(object({</dt><dd><p>id: defaulted(number(), () =&gt; i++),
name: string(),
role: defaulted(enums([â€˜adminâ€™, â€˜memberâ€™, â€˜guestâ€™]), â€˜guestâ€™),</p>
</dd>
</dl>
</section>
<section id="id68">
<h2>})<a class="headerlink" href="#id68" title="Permalink to this heading">Â¶</a></h2>
<p><cite>defaulted</cite> augments a struct to add coercion logic for default values, which are applied when the input is <cite>undefined</cite>.</p>
<p>### <cite>masked</cite></p>
<p><code class="docutils literal notranslate"><span class="pre">`ts</span>
<span class="pre">import</span> <span class="pre">{</span> <span class="pre">masked</span> <span class="pre">}</span> <span class="pre">from</span> <span class="pre">'superstruct'</span>
<span class="pre">`</span></code></p>
<p><a href="#id69"><span class="problematic" id="id70">``</span></a><a href="#id71"><span class="problematic" id="id72">`</span></a>ts
masked(</p>
<blockquote>
<div><dl class="simple">
<dt>object({</dt><dd><p>name: string(),</p>
</dd>
</dl>
<p>})</p>
</div></blockquote>
</section>
<section id="id73">
<h2>)<a class="headerlink" href="#id73" title="Permalink to this heading">Â¶</a></h2>
<p><cite>masked</cite> augments an object struct to strip any unknown properties from the input when coercing it.</p>
<p>&gt; ðŸ¤– If you add <cite>defaulted</cite> to an <cite>object</cite> struct with a dictionary of values, those values will be mixed in one-by-one, so the input doesnâ€™t need to be <cite>undefined</cite>, but certain properties can be <cite>undefined</cite>.</p>
<p>### Custom Coercions</p>
<p>You can also define your own custom coercions that are specific to your applicationâ€™s requirements, like so:</p>
<p><a href="#id74"><span class="problematic" id="id75">``</span></a><a href="#id76"><span class="problematic" id="id77">`</span></a>ts
import { coercion } from â€˜superstructâ€™</p>
<dl class="simple">
<dt>const PositiveInteger = coercion(string(), (value) =&gt; {</dt><dd><p>return typeof value === â€˜stringâ€™ ? value.trim() : value</p>
</dd>
</dl>
</section>
<section id="id78">
<h2>})<a class="headerlink" href="#id78" title="Permalink to this heading">Â¶</a></h2>
<p>This allows you to customize how lenient you want to be in accepting data with your structs.</p>
<p>&gt; ðŸ¤– Note that the <cite>value</cite> argument passed to coercion handlers is of type <cite>unknown</cite>! This is because it has yet to be validated, so it could still be anything. Make sure your coercion functions guard against unknown types.</p>
<p>## Errors</p>
<p>Superstruct throws detailed errors when data is invalid, so that you can build extremely precise errors of your own to give your end users the best possible experience.</p>
<p>### <cite>StructError</cite></p>
<p><cite>Error</cite></p>
<p><a href="#id79"><span class="problematic" id="id80">``</span></a><a href="#id81"><span class="problematic" id="id82">`</span></a>ts
import { StructError } from â€˜superstructâ€™</p>
<dl class="simple">
<dt>if (error instanceof StructError) {</dt><dd><p>â€¦</p>
</dd>
</dl>
</section>
<section id="id83">
<h2>}<a class="headerlink" href="#id83" title="Permalink to this heading">Â¶</a></h2>
<p>The error class that Superstruct uses for its validation errors. This is exposed primarily as a convenience for checking whether thrown errors are an <cite>instanceof</cite> the <cite>StructError</cite> class.</p>
<p>### Error Properties</p>
<p>Each error thrown includes the following properties:</p>
<div class="line-block">
<div class="line"><strong>Property</strong> | <strong>Type</strong>                 | <strong>Example</strong>             | <strong>Description</strong>                                                                                                                                                                                                        |</div>
<div class="line">â€”â€”â€”â€” | â€”â€”â€”â€”â€”â€”â€”â€” | â€”â€”â€”â€”â€”â€”â€”â€“ | â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”- |</div>
<div class="line"><cite>branch</cite>     | <cite>Array&lt;any&gt;</cite>             | <cite>[{â€¦}, false]</cite>        | An array of the values being validated at every layer. The first element in the array is the root value, and the last element is the current value that failed. This allows you to inspect the entire validation tree. |</div>
<div class="line"><cite>path</cite>       | <cite>Array&lt;string | number&gt;</cite> | <cite>[â€˜addressâ€™, â€˜streetâ€™]</cite> | The path to the invalid value relative to the root value.                                                                                                                                                              |</div>
<div class="line"><cite>value</cite>      | <cite>any</cite>                    | <cite>false</cite>                 | The invalid value.                                                                                                                                                                                                     |</div>
<div class="line"><cite>type</cite>       | <cite>string</cite>                 | <cite>â€˜stringâ€™</cite>              | The expected type of the invalid value.                                                                                                                                                                                |</div>
<div class="line"><cite>failures</cite>   | <cite>Array&lt;StructFailure&gt;</cite>   | <cite>[{â€¦}]</cite>               | All the validation failures that were encountered. The error object always represents the first failure, but you can write more complex logic involving other failures if you need to.                                 |</div>
</div>
<p>### Multiple Errors</p>
<p>The error thrown by Superstruct is always the first validation failure that was encountered, because this makes for convenient and simple logic in the majority of cases. However, the <cite>failures</cite> property is available with a list of all of the validation failures that occurred in case you want to add support for multiple error handling.</p>
<p>## Utilities</p>
<p>### <cite>StructType</cite></p>
<p>When working in TypeScript, you can use the <cite>StructType</cite> utility type to infer the valid value of a struct definition. This allows you to avoid having to duplicate effort when writing typings.</p>
<p>For example:</p>
<p><a href="#id84"><span class="problematic" id="id85">``</span></a><a href="#id86"><span class="problematic" id="id87">`</span></a>ts
const User = object({</p>
<blockquote>
<div><p>id: number(),
name: string(),</p>
</div></blockquote>
<p>})</p>
<p>type User = StructType&lt;typeof User&gt;
// type User = {
//   id: number
//   name: string
// }
<a href="#id88"><span class="problematic" id="id89">``</span></a><a href="#id90"><span class="problematic" id="id91">`</span></a></p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">twit</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, jare.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="_sources/reference.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>