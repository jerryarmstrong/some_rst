<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>docs/04-guides/03-airdrops.md &#8212; twit  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b3523f8e" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=039e1c02" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=b3ba4146"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="docs-04-guides-03-airdrops-md">
<h1>docs/04-guides/03-airdrops.md<a class="headerlink" href="#docs-04-guides-03-airdrops-md" title="Permalink to this heading">¶</a></h1>
<p>Last edited: 2023-08-08 19:56:25</p>
<p>Contents:</p>
<div class="highlight-md notranslate"><div class="highlight"><pre><span></span><span class="gh"># How to Airdrop Tokens</span>
</pre></div>
</div>
<ul>
<li><p>[Gumdrop](#)
- [Motivation](#motivation)
- [Setup](#setup)
- [Drop Types](#drop-types)</p>
<blockquote>
<div><ul class="simple">
<li><p>[Token Airdrop](#token-airdrop)</p></li>
<li><p>[Candy Machine Pre-sale](#nft-candy-machine-pre-sale)</p></li>
<li><p>[Edition Prints](#edition-prints)</p></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><p>[Distribution Method](#distribution-method)</p></li>
<li><p>[Whitelist](#whitelist)</p></li>
<li><p>[Closing a Gumdrop](#closing-a-gumdrop)</p></li>
<li><p>[Deploy Custom Gumdrop Site](#deploy-custom-gumdrop-site)</p></li>
</ul>
</li>
</ul>
<p>Gumdrop is a program from the Metaplex community. It is currently in BETA so use at your own risk.</p>
<p>The Gumdrop program leverages the Solana blockchain and merkle trees to
facilitate airdrops to a large number of whitelisted users at a low cost to
creators. Users have to redeem the airdrop, it will not automatically appear in their wallet.</p>
<p>## Motivation</p>
<p>Various ecosystem projects desire to ensure early followers and supporters gain
access to project assets whether they be tokens, NFTs, or others.
Simultaneously, capitalization of these assets should not incur undue costs or
operational overhead to the creators. There are several ways to achieve such a
setup and Gumdrop offers one that integrates with existing Solana and Metaplex
ecosystem programs.</p>
<p>Gumdrop solves this efficient-airdrop issue by utilizing a space-efficient hash
structure (the merkle tree) such that an on-chain program can validate whether
the user is part of a whitelist. This uses a pull-based paradigm to shift the
burden from creators, sending airdrops or pre-minting NFTs, to recipients, that
can choose to claim their portion or leave it for general adoption.</p>
<p>The approach, originally pioneered for token airdrops by
[Uniswap](<a class="reference external" href="https://github.com/Uniswap/merkle-distributor">https://github.com/Uniswap/merkle-distributor</a>) and ported to Solana
by [Saber](<a class="reference external" href="https://github.com/saber-hq/merkle-distributor">https://github.com/saber-hq/merkle-distributor</a>), is extended to
allow printing editions of a master copy.
Moreover, Gumdrop allows creators to directly send whitelisted users a drop
reclamation link by building the tree with off-chain handles (e.g email,
discord, etc.) and allowing the user to redeem into any wallet.</p>
<p>## Setup</p>
<p>Gumdrop creators can use either the Gumdrop CLI or the [web
UI](<a class="reference external" href="https://lwus.github.io/metaplex">https://lwus.github.io/metaplex</a>). Additional options are available through
the CLI. To execute the Gumdrop CLI or deploy a local version of the web UI,
please follow the same [prerequisite steps of Candy Machine
creation](/deprecated/candy-machine-js-cli/getting-started#tooling-required).</p>
<ul class="simple">
<li><p>The CLI can be found in the [Gumdrop
repo](<a class="reference external" href="https://github.com/metaplex-foundation/gumdrop/">https://github.com/metaplex-foundation/gumdrop/</a>) at
<cite>packages/cli/src/gumdrop-cli.ts</cite> and will also be run with <cite>ts-node</cite>.</p></li>
<li><p>The web interface can be run locally from the Gumdrop
repo at <cite>packages/gumdrop</cite> with <cite>yarn start</cite>.
(You can also use an [example deployment](<a class="reference external" href="https://lwus.github.io/metaplex">https://lwus.github.io/metaplex</a>), but this site may not exist for long.)</p></li>
</ul>
<p>To create a drop, you must specify the [drop type](#drop-types), the
[distribution method](#distribution-method), and the
[whitelist](#whitelist). When creating the drop, a throwaway <cite>Keypair</cite> will be
generated that holds authority over the on-chain Gumdrop state. This can be
used to later [close the gumdrop](#closing-a-gumdrop), so make sure to save it!</p>
<p>## Drop Types</p>
<p>There are multiple drop types supported by the gumdrop program. Each utilizes
the same underlying mechanism of building a merkle tree from a whitelist and
using some kind of off-chain distribution method to notify recipients.</p>
<p>The sections below give examples and explanations for CLI usage of the command
line flags. A full list of options can be viewed with</p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">$</span> <span class="pre">ts-node</span> <span class="pre">src/gumdrop-cli.ts</span> <span class="pre">help</span> <span class="pre">create</span>
<span class="pre">`</span></code></p>
<p>### Token Airdrop</p>
<p>All a token airdrop requires is approval to move the relevant tokens from the
Gumdrop creators’ token account.</p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">$</span> <span class="pre">ts-node</span> <span class="pre">src/gumdrop-cli.ts</span> <span class="pre">create</span> <span class="pre">\</span>
<span class="pre">--claim-integration</span> <span class="pre">transfer</span> <span class="pre">\</span>
<span class="pre">--transfer-mint</span> <span class="pre">So11111111111111111111111111111111111111112</span>
<span class="pre">`</span></code></p>
<p>However, by default, <cite>gumdrop-cli.ts</cite> will instead transfer the tokens to the
generated throwaway <cite>Keypair</cite> so that multiple gumdrops can be created more
intuitively. These will be transferred back on [close](#closing-a-gumdrop)</p>
<p>Alternatively, by passing <cite>–delegate-only</cite>, Gumdrop state will be approved as
a [delegate](<a class="reference external" href="https://spl.solana.com/token#authority-delegation">https://spl.solana.com/token#authority-delegation</a>) for the sum of
tokens specified.</p>
<p>### NFT Candy Machine Pre-sale</p>
<p>The workflow for a Candy Machine pre-sale through the Gumdrop program is as
follows:</p>
<ol class="arabic simple">
<li><p>Create a whitelist mint token <cite>WLIST</cite> with the SPL token program</p></li>
<li><p>Create a Candy Machine V2 with whitelist mint settings with mint <cite>WLIST</cite>
([Candy Machine Docs](/developer-tools/sugar/)). For example,</p></li>
</ol>
<blockquote>
<div><p><a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a>json
{</p>
<blockquote>
<div><dl class="simple">
<dt>“whitelistMintSettings”: {</dt><dd><p>“mode”: “burnEveryTime”,
“mint”: &lt;WLIST&gt;,
“presale”: true,
“discountPrice”: null</p>
</dd>
</dl>
</div></blockquote>
</div></blockquote>
<ol class="arabic" start="3">
<li><p>Create a Gumdrop with <cite>–claim-integration candy</cite> and the corresponding
<cite>–candy-machine</cite>.</p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">$</span> <span class="pre">ts-node</span> <span class="pre">src/gumdrop-cli.ts</span> <span class="pre">create</span> <span class="pre">\</span>
<span class="pre">--claim-integration</span> <span class="pre">candy</span> <span class="pre">\</span>
<span class="pre">--candy-machine</span> <span class="pre">FuxMhU34GPggi1yzk8tQwhsLQFR52iiutM5B9nzzeRPa</span>&#160; <span class="pre">\</span>
<span class="pre">`</span></code></p>
<p><cite>gumdrop-cli.ts</cite> will parse the on-chain candy machine account and look for
the corresponding <cite>whitelistMintSettings</cite>. Then under-the-hood it
initializes a token-airdrop for <cite>WLIST</cite> but adds extra information in the
claim URL so that frontends can find the corresponding candy crank in
addition to the whitelist token account. In the produced <cite>urls.json</cite>, this
will look something like</p>
<p>?distributor=9zXd1NddYbZejacgd92XMQsAQKhXC4Yj9rhUspRyR1ud&amp;candy=FuxMhU34GPggi1yzk8tQwhsLQFR52iiutM5B9nzzeRPa&amp;tokenAcc=93fQV4RnstogfFqMstV9b8uAvZ5KsRFjgJUagJhpX2Wa…
<a href="#id5"><span class="problematic" id="id6">``</span></a><a href="#id7"><span class="problematic" id="id8">`</span></a></p>
</li>
<li><p>On the frontend, users click a button that formats 2 transactions. The first
claims the whitelist token gumdrop, and the second uses that token to crank
the candy machine.</p></li>
</ol>
<p>### Edition Prints</p>
<p>Similarly, the Gumdrop will act as a proxy for the owner of the master edition
and allow minting of limited editions. Ownership of the master edition will be
transferred to the Gumdrop state for the duration of the Gumdrop!</p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">$</span> <span class="pre">ts-node</span> <span class="pre">src/gumdrop-cli.ts</span> <span class="pre">create</span> <span class="pre">\</span>
<span class="pre">--claim-integration</span> <span class="pre">edition</span> <span class="pre">\</span>
<span class="pre">--edition-mint</span> <span class="pre">7Hy3FqSQYiXyg4fyobZnSJhMvAqMmraBLaTq9QSFF9ip</span>
<span class="pre">`</span></code></p>
<p>Closing the Gumdrop will reclaim the master edition.</p>
<p>## Distribution Method</p>
<p>The distribution method is used to notify recipients that they have received a
Gumdrop. Currently, the Gumdrop frontends support email, SMS, and discord
notifications.</p>
<p>For email and SMS,
<code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">$</span> <span class="pre">ts-node</span> <span class="pre">src/gumdrop-cli.ts</span> <span class="pre">create</span> <span class="pre">\</span>
<span class="pre">--distribution-method</span> <span class="pre">aws-email|aws-sms</span> <span class="pre">\</span>
<span class="pre">--aws-access-key-id</span> <span class="pre">&quot;$AWS_ACCESS_KEY_ID&quot;</span> <span class="pre">\</span>
<span class="pre">--aws-secret-access-key</span> <span class="pre">&quot;$AWS_SECRET_ACCESS_KEY&quot;</span>
<span class="pre">`</span></code></p>
<p>For Discord,
<code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">$</span> <span class="pre">ts-node</span> <span class="pre">src/gumdrop-cli.ts</span> <span class="pre">create</span> <span class="pre">\</span>
<span class="pre">--distribution-method</span> <span class="pre">discord</span> <span class="pre">\</span>
<span class="pre">--discord-token</span> <span class="pre">&quot;$DISCORD_TOKEN&quot;</span>
<span class="pre">`</span></code></p>
<p>With each of these methods, creators can also choose to enable OTP verification
with the <cite>–otp-auth</cite> flag. Enable and disable with <cite>–otp-auth enable</cite> and
<cite>–otp-auth disable</cite> respectively. In case OTP verification is configured, the
same distribution method will be used to verify the OTP.</p>
<p>Alternatively, creators can also choose to build the Gumdrop from public keys
which allows only the owner of said public key to claim the Gumdrop.  In
this case, the full list of URLs is expected to be uploaded by the creator
somewhere.</p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">$</span> <span class="pre">ts-node</span> <span class="pre">src/gumdrop-cli.ts</span> <span class="pre">create</span> <span class="pre">\</span>
<span class="pre">--distribution-method</span> <span class="pre">wallets</span>
<span class="pre">`</span></code></p>
<p>## Whitelist</p>
<p>The whitelist is used to specify the recipients of the Gumdrop. Both frontends
expect the whitelist to be a JSON list of recipients, each with a <cite>handle</cite>
identifying the user, an <cite>amount</cite> which determines the number of tokens, mints,
or prints that can be claimed, and in the case of [edition
prints](#edition-prints), an <cite>edition</cite> number.</p>
<p>More concretely, the frontends expect the list format to be</p>
<p><a href="#id9"><span class="problematic" id="id10">``</span></a><a href="#id11"><span class="problematic" id="id12">`</span></a>json
[</p>
<blockquote>
<div><dl class="simple">
<dt>{</dt><dd><p>“handle”: “&lt;DISTRIBUTION-METHOD-SPECIFIC-HANDLE&gt;”,
“amount”: &lt;GUMDROP-CLAIM-ALLOWANCE&gt;,
[“edition”: &lt;EDITION-NUMBER&gt;]</p>
</dd>
</dl>
</div></blockquote>
<section id="id13">
<h2>]<a class="headerlink" href="#id13" title="Permalink to this heading">¶</a></h2>
<p>The distribution method handles are as follows:</p>
<div class="line-block">
<div class="line">Type    | Format            | Example                                      |</div>
</div>
<p><a href="#id22"><span class="problematic" id="id23">|---------|</span></a>——————-<a href="#id24"><span class="problematic" id="id25">|----------------------------------------------|</span></a>
| Email   | <a class="reference external" href="mailto:local-part&#37;&#52;&#48;domain">local-part<span>&#64;</span>domain</a> | <a class="reference external" href="mailto:john&#46;smith&#37;&#52;&#48;example&#46;com">john<span>&#46;</span>smith<span>&#64;</span>example<span>&#46;</span>com</a>                       |
| SMS     | E.164             | +18005550100                                 |
| Discord | User ID           | 898959704573759608                           |
| Wallets | wallet public key | 8mTVkib7TwUSsZRTHDQy9EQbw7ZR7xLrvKeyPgkFPgZB |</p>
<p>At the moment, Discord handles are the hardest to programmatically create. One
option is to query for members in a Discord Guild and filter for the relevant
users by display-name there.</p>
<p>The distribution list has to be referenced in the create command like this:
<code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">$</span> <span class="pre">ts-node</span> <span class="pre">src/gumdrop-cli.ts</span> <span class="pre">create</span> <span class="pre">\</span>
<span class="pre">--distribution-list</span> <span class="pre">&lt;PATH</span> <span class="pre">TO</span> <span class="pre">WHITELIST</span> <span class="pre">JSON&gt;</span>
<span class="pre">`</span></code></p>
<p>NB: The frontends do some verification that the Gumdrop being created is
sufficient to satisfy all the recipients specified. However, these checks are
all dependent on the good behavior of the creator! For example, if the creator,
after creating a token-Gumdrop, moves all the tokens out of their wallet,
recipients will fail to claim their allocation.</p>
<p>## Closing a Gumdrop</p>
<p>When the gumdrop is finished, the master edition can be reclaimed by closing
the gumdrop. Currently, the small portion of rent used to store the Gumdrop
state is also redeemed but please do not rely on this behavior!</p>
<p>The command to close it is:</p>
<p><a href="#id14"><span class="problematic" id="id15">``</span></a><a href="#id16"><span class="problematic" id="id17">`</span></a>bash
ts-node gumdrop-cli.ts close </p>
<blockquote>
<div><p>–base &lt;id.json keypair that was created on gumdrop create&gt; –keypair &lt;your initial keypair&gt; –claim-integration &lt;creation –claim-integration&gt; –&lt;corresponding claim integration flag&gt;</p>
</div></blockquote>
<p><a href="#id18"><span class="problematic" id="id19">``</span></a><a href="#id20"><span class="problematic" id="id21">`</span></a></p>
<p>We pass additional information about the claim integration to revoke authority
or transfer back tokens, etc.</p>
<p>NB: somewhat obviously, recipients will no longer be able to redeem the Gumdrop
after it is closed.</p>
<p>## Deploy Custom Gumdrop Site</p>
<p>This method applies to _only_ [Vercel](<a class="reference external" href="https://vercel.com/">https://vercel.com/</a>).  In the <cite>gumdrop</cite> directory, remove <cite>homepage</cite> key-value entirely.  Connect your GitHub to Vercel and create a new project.  In the project setup, make sure these settings are set.</p>
<p>![Build and Development Settings](/assets/gumdrop/build-and-development-settings.png#radius#shadow)</p>
<p>![Root Directory Settings](/assets/gumdrop/root-directory.png#radius#shadow)</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">twit</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, jare.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../_sources/04-guides/03-airdrops.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>