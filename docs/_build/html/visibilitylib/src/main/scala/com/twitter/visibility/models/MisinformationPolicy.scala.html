<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>&lt;no title&gt; &#8212; twit  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../../../../../../_static/pygments.css?v=b3523f8e" />
    <link rel="stylesheet" type="text/css" href="../../../../../../../../_static/alabaster.css?v=039e1c02" />
    <script data-url_root="../../../../../../../../" id="documentation_options" src="../../../../../../../../_static/documentation_options.js?v=b3ba4146"></script>
    <script src="../../../../../../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../../../../../../_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="../../../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../../../search.html" />
   
  <link rel="stylesheet" href="../../../../../../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <p>package com.twitter.visibility.models</p>
<p>import com.twitter.datatools.entityservice.entities.thriftscala.FleetInterstitial
import com.twitter.datatools.entityservice.entities.{thriftscala =&gt; t}
import com.twitter.escherbird.softintervention.thriftscala.MisinformationLocalizedPolicy
import com.twitter.escherbird.thriftscala.TweetEntityAnnotation</p>
<dl>
<dt>case class MisinformationPolicy(</dt><dd><p>semanticCoreAnnotation: SemanticCoreAnnotation,
priority: Long = MisinformationPolicy.DefaultPriority,
filteringLevel: Int = MisinformationPolicy.DefaultFilteringLevel,
publishedState: PublishedState = MisinformationPolicy.DefaultPublishedState,
engagementNudge: Boolean = MisinformationPolicy.DefaultEngagementNudge,
suppressAutoplay: Boolean = MisinformationPolicy.DefaultSuppressAutoplay,
warning: Option[String] = None,
detailsUrl: Option[String] = None,
displayType: Option[MisinfoPolicyDisplayType] = None,
applicableCountries: Seq[String] = Seq.empty,
fleetInterstitial: Option[FleetInterstitial] = None)</p>
</dd>
<dt>object MisinformationPolicy {</dt><dd><p>private val DefaultPriority = 0
private val DefaultFilteringLevel = 1
private val DefaultPublishedState = PublishedState.Published
private val DefaultEngagementNudge = true
private val DefaultSuppressAutoplay = true</p>
<dl>
<dt>def apply(</dt><dd><p>annotation: TweetEntityAnnotation,
misinformation: MisinformationLocalizedPolicy</p>
</dd>
<dt>): MisinformationPolicy = {</dt><dd><dl>
<dt>MisinformationPolicy(</dt><dd><dl class="simple">
<dt>semanticCoreAnnotation = SemanticCoreAnnotation(</dt><dd><p>groupId = annotation.groupId,
domainId = annotation.domainId,
entityId = annotation.entityId</p>
</dd>
</dl>
<p>),
priority = misinformation.priority.getOrElse(DefaultPriority),
filteringLevel = misinformation.filteringLevel.getOrElse(DefaultFilteringLevel),
publishedState = misinformation.publishedState match {</p>
<blockquote>
<div><p>case Some(t.PublishedState.Draft) =&gt; PublishedState.Draft
case Some(t.PublishedState.Dogfood) =&gt; PublishedState.Dogfood
case Some(t.PublishedState.Published) =&gt; PublishedState.Published
case _ =&gt; DefaultPublishedState</p>
</div></blockquote>
<p>},
displayType = misinformation.displayType collect {</p>
<blockquote>
<div><p>case t.MisinformationDisplayType.GetTheLatest =&gt; MisinfoPolicyDisplayType.GetTheLatest
case t.MisinformationDisplayType.StayInformed =&gt; MisinfoPolicyDisplayType.StayInformed
case t.MisinformationDisplayType.Misleading =&gt; MisinfoPolicyDisplayType.Misleading
case t.MisinformationDisplayType.GovernmentRequested =&gt;</p>
<blockquote>
<div><p>MisinfoPolicyDisplayType.GovernmentRequested</p>
</div></blockquote>
</div></blockquote>
<p>},
applicableCountries = misinformation.applicableCountries match {</p>
<blockquote>
<div><p>case Some(countries) =&gt; countries.map(countryCode =&gt; countryCode.toLowerCase)
case _ =&gt; Seq.empty</p>
</div></blockquote>
<p>},
fleetInterstitial = misinformation.fleetInterstitial,
engagementNudge = misinformation.engagementNudge.getOrElse(DefaultEngagementNudge),
suppressAutoplay = misinformation.suppressAutoplay.getOrElse(DefaultSuppressAutoplay),
warning = misinformation.warning,
detailsUrl = misinformation.detailsUrl,</p>
</dd>
</dl>
<p>)</p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
<p>}</p>
<dl>
<dt>trait MisinformationPolicyTransform {</dt><dd><p>def apply(policies: Seq[MisinformationPolicy]): Seq[MisinformationPolicy]
def andThen(transform: MisinformationPolicyTransform): MisinformationPolicyTransform =</p>
<blockquote>
<div><p>(policies: Seq[MisinformationPolicy]) =&gt; transform(this.apply(policies))</p>
</div></blockquote>
</dd>
</dl>
<p>}</p>
<p>object MisinformationPolicyTransform {</p>
<blockquote>
<div><dl>
<dt>def prioritize: MisinformationPolicyTransform =</dt><dd><dl class="simple">
<dt>(policies: Seq[MisinformationPolicy]) =&gt;</dt><dd><dl class="simple">
<dt>policies</dt><dd><p>.sortBy(p =&gt; p.filteringLevel)(Ordering[Int].reverse)
.sortBy(p =&gt; p.priority)(Ordering[Long].reverse)</p>
</dd>
</dl>
</dd>
</dl>
</dd>
<dt>def filter(filters: Seq[MisinformationPolicy =&gt; Boolean]): MisinformationPolicyTransform =</dt><dd><dl class="simple">
<dt>(policies: Seq[MisinformationPolicy]) =&gt;</dt><dd><p>policies.filter { policy =&gt; filters.forall { filter =&gt; filter(policy) } }</p>
</dd>
</dl>
</dd>
<dt>def filterLevelAndState(</dt><dd><p>filteringLevel: Int,
publishedStates: Seq[PublishedState]</p>
</dd>
<dt>): MisinformationPolicyTransform =</dt><dd><dl>
<dt>filter(</dt><dd><dl class="simple">
<dt>Seq(</dt><dd><p>hasFilteringLevelAtLeast(filteringLevel),
hasPublishedStates(publishedStates)</p>
</dd>
</dl>
<p>))</p>
</dd>
</dl>
</dd>
<dt>def filterLevelAndStateAndLocalized(</dt><dd><p>filteringLevel: Int,
publishedStates: Seq[PublishedState]</p>
</dd>
<dt>): MisinformationPolicyTransform =</dt><dd><dl>
<dt>filter(</dt><dd><dl class="simple">
<dt>Seq(</dt><dd><p>hasFilteringLevelAtLeast(filteringLevel),
hasPublishedStates(publishedStates),
hasNonEmptyLocalization,</p>
</dd>
</dl>
<p>))</p>
</dd>
</dl>
</dd>
<dt>def filterState(</dt><dd><p>publishedStates: Seq[PublishedState]</p>
</dd>
<dt>): MisinformationPolicyTransform =</dt><dd><dl>
<dt>filter(</dt><dd><dl class="simple">
<dt>Seq(</dt><dd><p>hasPublishedStates(publishedStates)</p>
</dd>
</dl>
<p>))</p>
</dd>
</dl>
</dd>
<dt>def filterStateAndLocalized(</dt><dd><p>publishedStates: Seq[PublishedState]</p>
</dd>
<dt>): MisinformationPolicyTransform =</dt><dd><dl>
<dt>filter(</dt><dd><dl class="simple">
<dt>Seq(</dt><dd><p>hasPublishedStates(publishedStates),
hasNonEmptyLocalization,</p>
</dd>
</dl>
<p>))</p>
</dd>
</dl>
</dd>
<dt>def filterApplicableCountries(</dt><dd><p>countryCode: Option[String],</p>
</dd>
<dt>): MisinformationPolicyTransform =</dt><dd><p>filter(Seq(policyAppliesToCountry(countryCode)))</p>
</dd>
<dt>def filterOutGeoSpecific(): MisinformationPolicyTransform =</dt><dd><p>filter(Seq(policyIsGlobal()))</p>
</dd>
<dt>def filterNonEngagementNudges(): MisinformationPolicyTransform =</dt><dd><dl>
<dt>filter(</dt><dd><dl class="simple">
<dt>Seq(</dt><dd><p>hasEngagementNudge,</p>
</dd>
</dl>
<p>))</p>
</dd>
</dl>
</dd>
<dt>def policyAppliesToCountry(countryCode: Option[String]): MisinformationPolicy =&gt; Boolean =</dt><dd><dl class="simple">
<dt>policy =&gt;</dt><dd><dl class="simple">
<dt>policy.applicableCountries.isEmpty ||</dt><dd><p>(countryCode.nonEmpty &amp;&amp; policy.applicableCountries.contains(countryCode.get))</p>
</dd>
</dl>
</dd>
</dl>
</dd>
<dt>def policyIsGlobal(): MisinformationPolicy =&gt; Boolean =</dt><dd><p>policy =&gt; policy.applicableCountries.isEmpty</p>
</dd>
<dt>def hasFilteringLevelAtLeast(filteringLevel: Int): MisinformationPolicy =&gt; Boolean =</dt><dd><p>_.filteringLevel &gt;= filteringLevel</p>
</dd>
<dt>def hasPublishedStates(</dt><dd><p>publishedStates: Seq[PublishedState]</p>
</dd>
<dt>): MisinformationPolicy =&gt; Boolean =</dt><dd><p>policy =&gt; publishedStates.contains(policy.publishedState)</p>
</dd>
<dt>def hasNonEmptyLocalization: MisinformationPolicy =&gt; Boolean =</dt><dd><p>policy =&gt; policy.warning.nonEmpty &amp;&amp; policy.detailsUrl.nonEmpty</p>
</dd>
<dt>def hasEngagementNudge: MisinformationPolicy =&gt; Boolean =</dt><dd><p>policy =&gt; policy.engagementNudge</p>
</dd>
</dl>
</div></blockquote>
<p>}</p>
<p>sealed trait PublishedState
object PublishedState {</p>
<blockquote>
<div><p>case object Draft extends PublishedState
case object Dogfood extends PublishedState
case object Published extends PublishedState</p>
<p>val PublicPublishedStates = Seq(PublishedState.Published)
val EmployeePublishedStates = Seq(PublishedState.Published, PublishedState.Dogfood)</p>
</div></blockquote>
<p>}
sealed trait MisinfoPolicyDisplayType
object MisinfoPolicyDisplayType {</p>
<blockquote>
<div><p>case object GetTheLatest extends MisinfoPolicyDisplayType
case object StayInformed extends MisinfoPolicyDisplayType
case object Misleading extends MisinfoPolicyDisplayType
case object GovernmentRequested extends MisinfoPolicyDisplayType</p>
</div></blockquote>
<p>}</p>
<dl class="simple">
<dt>object SemanticCoreMisinformation {</dt><dd><p>val domainId: Long = 148L</p>
</dd>
</dl>
<p>}</p>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../../../../../../index.html">twit</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../../../../../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, jare.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../../../../../../../_sources/visibilitylib/src/main/scala/com/twitter/visibility/models/MisinformationPolicy.scala.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>