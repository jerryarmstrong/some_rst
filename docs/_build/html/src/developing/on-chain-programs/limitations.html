<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>docs/src/developing/on-chain-programs/limitations.md &#8212; twit  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b3523f8e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css?v=039e1c02" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js?v=b3ba4146"></script>
    <script src="../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="docs-src-developing-on-chain-programs-limitations-md">
<h1>docs/src/developing/on-chain-programs/limitations.md<a class="headerlink" href="#docs-src-developing-on-chain-programs-limitations-md" title="Permalink to this heading">¶</a></h1>
<p>Last edited: 2023-08-11 21:38:33</p>
<p>Contents:</p>
<div class="highlight-md notranslate"><div class="highlight"><pre><span></span>---
</pre></div>
</div>
<p>title: “Limitations”
—</p>
<p>Developing programs on the Solana blockchain have some inherent limitation associated with them. Below is a list of common limitation that you may run into.</p>
<p>## Rust libraries</p>
<p>Since Rust based on-chain programs must run be deterministic while running in a resource-constrained, single-threaded environment, they have some limitations on various libraries.</p>
<p>See [Developing with Rust - Restrictions](./developing-rust.md#restrictions) for a detailed breakdown these restrictions and limitations.</p>
<p>## Compute budget</p>
<p>To prevent abuse of the blockchain’s computational resources, each transaction is allocated a [compute budget](./../../terminology.md#compute-budget). Exceeding this compute budget will result in the transaction failing.</p>
<p>See [computational constraints](../programming-model/runtime.md#compute-budget) in the Runtime for more specific details.</p>
<p>## Call stack depth - <cite>CallDepthExceeded</cite> error</p>
<p>Solana programs are constrained to run quickly, and to facilitate this, the program’s call stack is limited to a max depth of <strong>64 frames</strong>.</p>
<p>When a program exceeds the allowed call stack depth limit, it will receive the <cite>CallDepthExceeded</cite> error.</p>
<p>## CPI call depth - <cite>CallDepth</cite> error</p>
<p>Cross-program invocations allow programs to invoke other programs directly, but the depth is constrained currently to <cite>4</cite>.</p>
<p>When a program exceeds the allowed [cross-program invocation call depth](../programming-model/calling-between-programs.md#call-depth), it will receive a <cite>CallDepth</cite> error</p>
<p>## Float Rust types support</p>
<p>Programs support a limited subset of Rust’s float operations. If a program
attempts to use a float operation that is not supported, the runtime will report
an unresolved symbol error.</p>
<p>Float operations are performed via software libraries, specifically LLVM’s float
built-ins. Due to the software emulated, they consume more compute units than
integer operations. In general, fixed point operations are recommended where
possible.</p>
<p>The Solana Program Library math tests will report the performance of some math
operations: <a class="reference external" href="https://github.com/solana-labs/solana-program-library/tree/master/libraries/math">https://github.com/solana-labs/solana-program-library/tree/master/libraries/math</a></p>
<p>To run the test: sync the repo and run:</p>
<p><code class="docutils literal notranslate"><span class="pre">`sh</span>
<span class="pre">cargo</span> <span class="pre">test-sbf</span> <span class="pre">--</span> <span class="pre">--nocapture</span> <span class="pre">--test-threads=1</span>
<span class="pre">`</span></code></p>
<p>Recent results show the float operations take more instructions compared to
integers equivalents. Fixed point implementations may vary but will also be
less than the float equivalents:</p>
<dl class="simple">
<dt><a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a></dt><dd><p>u64   f32</p>
</dd>
</dl>
<p>Multiply    8   176
Divide      9   219
<a href="#id5"><span class="problematic" id="id6">``</span></a><a href="#id7"><span class="problematic" id="id8">`</span></a></p>
<p>## Static writable data</p>
<p>Program shared objects do not support writable shared data. Programs are shared
between multiple parallel executions using the same shared read-only code and
data. This means that developers should not include any static writable or
global variables in programs. In the future a copy-on-write mechanism could be
added to support writable data.</p>
<p>## Signed division</p>
<p>The SBF instruction set does not support
[signed division](<a class="reference external" href="https://www.kernel.org/doc/html/latest/bpf/bpf_design_QA.Html#q-why-there-is-no-bpf-sdiv-for-signed-divide-operation">https://www.kernel.org/doc/html/latest/bpf/bpf_design_QA.Html#q-why-there-is-no-bpf-sdiv-for-signed-divide-operation</a>). Adding a signed division instruction is a consideration.</p>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">twit</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, jare.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../../_sources/src/developing/on-chain-programs/limitations.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>