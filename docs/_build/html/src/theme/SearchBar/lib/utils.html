<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>docs/src/theme/SearchBar/lib/utils.js &#8212; twit  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=b3523f8e" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/alabaster.css?v=039e1c02" />
    <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js?v=b3ba4146"></script>
    <script src="../../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../../_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
   
  <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="docs-src-theme-searchbar-lib-utils-js">
<h1>docs/src/theme/SearchBar/lib/utils.js<a class="headerlink" href="#docs-src-theme-searchbar-lib-utils-js" title="Permalink to this heading">¶</a></h1>
<p>Last edited: 2022-07-07 18:10:20</p>
<p>Contents:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="nx">$</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;autocomplete.js/zepto&quot;</span><span class="p">;</span>
</pre></div>
</div>
<dl>
<dt>const utils = {</dt><dd><p>/*
* Move the content of an object key one level higher.
* eg.
* {
*   name: ‘My name’,
*   hierarchy: {
*     lvl0: ‘Foo’,
*     lvl1: ‘Bar’
*   }
* }
* Will be converted to
* {
*   name: ‘My name’,
*   lvl0: ‘Foo’,
*   lvl1: ‘Bar’
* }
* &#64;param {Object} object Main object
* &#64;param {String} property Main object key to move up
* &#64;return {Object}
* &#64;throws Error when key is not an attribute of Object or is not an object itself
<a href="#id1"><span class="problematic" id="id2">*</span></a>/
mergeKeyWithParent(object, property) {</p>
<blockquote>
<div><dl class="simple">
<dt>if (object[property] === undefined) {</dt><dd><p>return object;</p>
</dd>
</dl>
<p>}
if (typeof object[property] !== ‘object’) {</p>
<blockquote>
<div><p>return object;</p>
</div></blockquote>
<p>}
const newObject = $.extend({}, object, object[property]);
delete newObject[property];
return newObject;</p>
</div></blockquote>
<p>},
/*
* Group all objects of a collection by the value of the specified attribute
* If the attribute is a string, use the lowercase form.
*
* eg.
* groupBy([
*   {name: ‘Tim’, category: ‘dev’},
*   {name: ‘Vincent’, category: ‘dev’},
*   {name: ‘Ben’, category: ‘sales’},
*   {name: ‘Jeremy’, category: ‘sales’},
*   {name: ‘AlexS’, category: ‘dev’},
*   {name: ‘AlexK’, category: ‘sales’}
* ], ‘category’);
* =&gt;
* {
*   ‘devs’: [
*     {name: ‘Tim’, category: ‘dev’},
*     {name: ‘Vincent’, category: ‘dev’},
*     {name: ‘AlexS’, category: ‘dev’}
*   ],
*   ‘sales’: [
*     {name: ‘Ben’, category: ‘sales’},
*     {name: ‘Jeremy’, category: ‘sales’},
*     {name: ‘AlexK’, category: ‘sales’}
*   ]
* }
* &#64;param {array} collection Array of objects to group
* &#64;param {String} property The attribute on which apply the grouping
* &#64;return {array}
* &#64;throws Error when one of the element does not have the specified property
<a href="#id3"><span class="problematic" id="id4">*</span></a>/
groupBy(collection, property) {</p>
<blockquote>
<div><p>const newCollection = {};
$.each(collection, (index, item) =&gt; {</p>
<blockquote>
<div><dl class="simple">
<dt>if (item[property] === undefined) {</dt><dd><p>throw new Error(<cite>[groupBy]: Object has no key ${property}</cite>);</p>
</dd>
</dl>
<p>}
let key = item[property];
if (typeof key === ‘string’) {</p>
<blockquote>
<div><p>key = key.toLowerCase();</p>
</div></blockquote>
<p>}
// fix #171 the given data type of docsearch hits might be conflict with the properties of the native Object,
// such as the constructor, so we need to do this check.
if (!Object.prototype.hasOwnProperty.call(newCollection, key)) {</p>
<blockquote>
<div><p>newCollection[key] = [];</p>
</div></blockquote>
<p>}
newCollection[key].push(item);</p>
</div></blockquote>
<p>});
return newCollection;</p>
</div></blockquote>
<p>},
/*
* Return an array of all the values of the specified object
* eg.
* values({
*   foo: 42,
*   bar: true,
*   baz: ‘yep’
* })
* =&gt;
* [42, true, yep]
* &#64;param {object} object Object to extract values from
* &#64;return {array}
<a href="#id5"><span class="problematic" id="id6">*</span></a>/
values(object) {</p>
<blockquote>
<div><p>return Object.keys(object).map(key =&gt; object[key]);</p>
</div></blockquote>
<p>},
/*
* Flattens an array
* eg.
* flatten([1, 2, [3, 4], [5, 6]])
* =&gt;
* [1, 2, 3, 4, 5, 6]
* &#64;param {array} array Array to flatten
* &#64;return {array}
<a href="#id7"><span class="problematic" id="id8">*</span></a>/
flatten(array) {</p>
<blockquote>
<div><p>const results = [];
array.forEach(value =&gt; {</p>
<blockquote>
<div><dl class="simple">
<dt>if (!Array.isArray(value)) {</dt><dd><p>results.push(value);
return;</p>
</dd>
</dl>
<p>}
value.forEach(subvalue =&gt; {</p>
<blockquote>
<div><p>results.push(subvalue);</p>
</div></blockquote>
<p>});</p>
</div></blockquote>
<p>});
return results;</p>
</div></blockquote>
<p>},
/*
* Flatten all values of an object into an array, marking each first element of
* each group with a specific flag
* eg.
* flattenAndFlagFirst({
*   ‘devs’: [
*     {name: ‘Tim’, category: ‘dev’},
*     {name: ‘Vincent’, category: ‘dev’},
*     {name: ‘AlexS’, category: ‘dev’}
*   ],
*   ‘sales’: [
*     {name: ‘Ben’, category: ‘sales’},
*     {name: ‘Jeremy’, category: ‘sales’},
*     {name: ‘AlexK’, category: ‘sales’}
*   ]
* , ‘isTop’);
* =&gt;
* [
*     {name: ‘Tim’, category: ‘dev’, isTop: true},
*     {name: ‘Vincent’, category: ‘dev’, isTop: false},
*     {name: ‘AlexS’, category: ‘dev’, isTop: false},
*     {name: ‘Ben’, category: ‘sales’, isTop: true},
*     {name: ‘Jeremy’, category: ‘sales’, isTop: false},
*     {name: ‘AlexK’, category: ‘sales’, isTop: false}
* ]
* &#64;param {object} object Object to flatten
* &#64;param {string} flag Flag to set to true on first element of each group
* &#64;return {array}
<a href="#id9"><span class="problematic" id="id10">*</span></a>/
flattenAndFlagFirst(object, flag) {</p>
<blockquote>
<div><dl>
<dt>const values = this.values(object).map(collection =&gt;</dt><dd><dl class="simple">
<dt>collection.map((item, index) =&gt; {</dt><dd><p>// eslint-disable-next-line no-param-reassign
item[flag] = index === 0;
return item;</p>
</dd>
</dl>
<p>})</p>
</dd>
</dl>
<p>);
return this.flatten(values);</p>
</div></blockquote>
<p>},
/*
* Removes all empty strings, null, false and undefined elements array
* eg.
* compact([42, false, null, undefined, ‘’, [], ‘foo’]);
* =&gt;
* [42, [], ‘foo’]
* &#64;param {array} array Array to compact
* &#64;return {array}
<a href="#id11"><span class="problematic" id="id12">*</span></a>/
compact(array) {</p>
<blockquote>
<div><p>const results = [];
array.forEach(value =&gt; {</p>
<blockquote>
<div><dl class="simple">
<dt>if (!value) {</dt><dd><p>return;</p>
</dd>
</dl>
<p>}
results.push(value);</p>
</div></blockquote>
<p>});
return results;</p>
</div></blockquote>
<p>},
/*</p>
<blockquote>
<div><ul class="simple">
<li><p>Returns the highlighted value of the specified key in the specified object.</p></li>
<li><p>If no highlighted value is available, will return the key value directly</p></li>
<li><p>eg.</p></li>
<li><p>getHighlightedValue({</p></li>
<li><p>_highlightResult: {</p></li>
<li><p>text: {</p></li>
<li><p>value: ‘&lt;mark&gt;foo&lt;/mark&gt;’</p></li>
<li><p>}</p></li>
<li><p>},</p></li>
<li><p>text: ‘foo’</p></li>
<li><p>}, ‘text’);</p></li>
<li><p>=&gt;</p></li>
<li><p>‘&lt;mark&gt;foo&lt;/mark&gt;’</p></li>
<li><p>&#64;param {object} object Hit object returned by the Algolia API</p></li>
<li><p>&#64;param {string} property Object key to look for</p></li>
<li><p>&#64;return {string}</p></li>
</ul>
<p><a href="#id13"><span class="problematic" id="id14">**</span></a>/</p>
</div></blockquote>
<dl>
<dt>getHighlightedValue(object, property) {</dt><dd><dl class="simple">
<dt>if (</dt><dd><p>object._highlightResult &amp;&amp;
object._highlightResult.hierarchy_camel &amp;&amp;
object._highlightResult.hierarchy_camel[property] &amp;&amp;
object._highlightResult.hierarchy_camel[property].matchLevel &amp;&amp;
object._highlightResult.hierarchy_camel[property].matchLevel !== ‘none’ &amp;&amp;
object._highlightResult.hierarchy_camel[property].value</p>
</dd>
<dt>) {</dt><dd><p>return object._highlightResult.hierarchy_camel[property].value;</p>
</dd>
</dl>
<p>}
if (</p>
<blockquote>
<div><p>object._highlightResult &amp;&amp;
object._highlightResult &amp;&amp;
object._highlightResult[property] &amp;&amp;
object._highlightResult[property].value</p>
</div></blockquote>
<dl class="simple">
<dt>) {</dt><dd><p>return object._highlightResult[property].value;</p>
</dd>
</dl>
<p>}
return object[property];</p>
</dd>
</dl>
<p>},
/*</p>
<blockquote>
<div><ul class="simple">
<li><p>Returns the snippeted value of the specified key in the specified object.</p></li>
<li><p>If no highlighted value is available, will return the key value directly.</p></li>
<li><p>Will add starting and ending ellipsis (…) if we detect that a sentence is</p></li>
<li><p>incomplete</p></li>
<li><p>eg.</p></li>
<li><p>getSnippetedValue({</p></li>
<li><p>_snippetResult: {</p></li>
<li><p>text: {</p></li>
<li><p>value: ‘&lt;mark&gt;This is an unfinished sentence&lt;/mark&gt;’</p></li>
<li><p>}</p></li>
<li><p>},</p></li>
<li><p>text: ‘This is an unfinished sentence’</p></li>
<li><p>}, ‘text’);</p></li>
<li><p>=&gt;</p></li>
<li><p>‘&lt;mark&gt;This is an unfinished sentence&lt;/mark&gt;…’</p></li>
<li><p>&#64;param {object} object Hit object returned by the Algolia API</p></li>
<li><p>&#64;param {string} property Object key to look for</p></li>
<li><p>&#64;return {string}</p></li>
</ul>
<p><a href="#id15"><span class="problematic" id="id16">**</span></a>/</p>
</div></blockquote>
<dl>
<dt>getSnippetedValue(object, property) {</dt><dd><dl class="simple">
<dt>if (</dt><dd><p>!object._snippetResult ||
!object._snippetResult[property] ||
!object._snippetResult[property].value</p>
</dd>
<dt>) {</dt><dd><p>return object[property];</p>
</dd>
</dl>
<p>}
let snippet = object._snippetResult[property].value;</p>
<dl class="simple">
<dt>if (snippet[0] !== snippet[0].toUpperCase()) {</dt><dd><p>snippet = <cite>…${snippet}</cite>;</p>
</dd>
</dl>
<p>}
if ([‘.’, ‘!’, ‘?’].indexOf(snippet[snippet.length - 1]) === -1) {</p>
<blockquote>
<div><p>snippet = <cite>${snippet}…</cite>;</p>
</div></blockquote>
<p>}
return snippet;</p>
</dd>
</dl>
<p>},
/*
* Deep clone an object.
* Note: This will not clone functions and dates
* &#64;param {object} object Object to clone
* &#64;return {object}
<a href="#id17"><span class="problematic" id="id18">*</span></a>/
deepClone(object) {</p>
<blockquote>
<div><p>return JSON.parse(JSON.stringify(object));</p>
</div></blockquote>
<p>},</p>
</dd>
</dl>
<p>};</p>
<p>export default utils;</p>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../../index.html">twit</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, jare.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../../../_sources/src/theme/SearchBar/lib/utils.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>