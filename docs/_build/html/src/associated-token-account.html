<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>docs/src/associated-token-account.md &#8212; twit  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b3523f8e" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=039e1c02" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=b3ba4146"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="docs-src-associated-token-account-md">
<h1>docs/src/associated-token-account.md<a class="headerlink" href="#docs-src-associated-token-account-md" title="Permalink to this heading">¶</a></h1>
<p>Last edited: 2022-07-07 18:10:20</p>
<p>Contents:</p>
<div class="highlight-md notranslate"><div class="highlight"><pre><span></span>---
</pre></div>
</div>
<p>title: Associated Token Account Program
—</p>
<p>This program defines the convention and provides the mechanism for mapping
the user’s wallet address to the associated token accounts they hold.</p>
<p>## Motivation</p>
<ul class="simple">
<li><p>A user may own arbitrarily many token accounts belonging to the same mint</p></li>
</ul>
<p>which makes it difficult for other users to know which account they should send
tokens to and introduces friction into many other aspects of token management.
This program introduces a way to _deterministically_ derive a token account key
from a user’s main System account address and a token mint address, allowing the
user to create a main token account for each token they own. We call these
accounts _Associated Token <a href="#id6"><span class="problematic" id="id7">Accounts_</span></a>.</p>
<ul class="simple">
<li><p>In addition, it allows a user to send tokens to another user even if the</p></li>
</ul>
<p>beneficiary does not yet have a token account for that mint. Unlike a system
transfer, for a token transfer to succeed the recipient must have a token
account with the compatible mint already, and somebody needs to fund that token
account. If the recipient must fund it first, it makes things like airdrop
campaigns difficult and just generally increases the friction of token
transfers. AToken allows the sender to create the associated token account for
the receiver, so the token transfer just works.</p>
<p>See the [SPL Token](token.mdx) program for more information about tokens in
general.</p>
<p>## Background</p>
<p>Solana’s programming model and the definitions of the Solana terms used in this
document are available at:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.solana.com/apps">https://docs.solana.com/apps</a></p></li>
<li><p><a class="reference external" href="https://docs.solana.com/terminology">https://docs.solana.com/terminology</a></p></li>
</ul>
<p>## Source</p>
<p>The Associated Token Account Program’s source is available on
[github](<a class="reference external" href="https://github.com/solana-labs/solana-program-library">https://github.com/solana-labs/solana-program-library</a>).</p>
<p>## Interface
The Associated Token Account Program is written in Rust and available on
[crates.io](<a class="reference external" href="https://crates.io/crates/spl-associated-token-account">https://crates.io/crates/spl-associated-token-account</a>) and
[docs.rs](<a class="reference external" href="https://docs.rs/spl-associated-token-account">https://docs.rs/spl-associated-token-account</a>).</p>
<p>### Finding the Associated Token Account address
The associated token account for a given wallet address is simply a
program-derived account consisting of the wallet address itself and the token mint.</p>
<p>The [get_associated_token_address](<a class="reference external" href="https://docs.rs/spl-associated-token-account/latest/spl_associated_token_account/fn.get_associated_token_address.html">https://docs.rs/spl-associated-token-account/latest/spl_associated_token_account/fn.get_associated_token_address.html</a>)
Rust function may be used by clients to derive the wallet’s associated token address.</p>
<p>The associated account address can be derived in TypeScript with:
<a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a>ts
import { PublicKey } from <a class="reference external" href="mailto:'&#37;&#52;&#48;solana/web3&#46;js">‘<span>&#64;</span>solana/web3<span>&#46;</span>js</a>’;
import { TOKEN_PROGRAM_ID } from <a class="reference external" href="mailto:'&#37;&#52;&#48;solana/spl-token">‘<span>&#64;</span>solana/spl-token</a>’;</p>
<dl class="simple">
<dt>const SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID: PublicKey = new PublicKey(</dt><dd><p>‘ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL’,</p>
</dd>
</dl>
<p>);</p>
<dl>
<dt>async function findAssociatedTokenAddress(</dt><dd><p>walletAddress: PublicKey,
tokenMintAddress: PublicKey</p>
</dd>
<dt>): Promise&lt;PublicKey&gt; {</dt><dd><dl>
<dt>return (await PublicKey.findProgramAddress(</dt><dd><dl class="simple">
<dt>[</dt><dd><p>walletAddress.toBuffer(),
TOKEN_PROGRAM_ID.toBuffer(),
tokenMintAddress.toBuffer(),</p>
</dd>
</dl>
<p>],
SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID</p>
</dd>
</dl>
<p>))[0];</p>
</dd>
</dl>
<section id="id5">
<h2>}<a class="headerlink" href="#id5" title="Permalink to this heading">¶</a></h2>
<p>### Creating an Associated Token Account</p>
<p>If the associated token account for a given wallet address does not yet exist,
it may be created by <em>anybody</em> by issuing a transaction containing the
instruction returned by [create_associated_token_account](<a class="reference external" href="https://docs.rs/spl-associated-token-account/latest/spl_associated_token_account/fn.create_associated_token_account.html">https://docs.rs/spl-associated-token-account/latest/spl_associated_token_account/fn.create_associated_token_account.html</a>).</p>
<p>Regardless of creator the new associated token account will be fully owned by
the wallet, as if the wallet itself had created it.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">twit</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, jare.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../_sources/src/associated-token-account.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>