<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>docs/src/feature-proposal.md &#8212; twit  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b3523f8e" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=039e1c02" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=b3ba4146"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="docs-src-feature-proposal-md">
<h1>docs/src/feature-proposal.md<a class="headerlink" href="#docs-src-feature-proposal-md" title="Permalink to this heading">¶</a></h1>
<p>Last edited: 2022-07-07 18:10:20</p>
<p>Contents:</p>
<div class="highlight-md notranslate"><div class="highlight"><pre><span></span>---
</pre></div>
</div>
<p>title: Feature Proposal Program
—</p>
<p>The Feature Proposal Program provides a workflow for activation of Solana
network features through community vote based on validator stake weight.</p>
<p>Community voting is accomplished using [SPL Tokens](token.mdx).  Tokens are
minted that represent the total active stake on the network, and distributed to
all validators based on their stake.  Validators vote for feature activation by
transferring their vote tokens to a predetermined address.  Once the vote
threshold is met the feature is activated.</p>
<p>## Background</p>
<p>The Solana validator software supports runtime feature activation through the
built-in <cite>Feature</cite> program.  This program ensures that features are activated
simultaneously across all validators to avoid divergent behavior that would
cause hard forks or otherwise break consensus.</p>
<p>The
[feature](<a class="reference external" href="https://docs.rs/solana-program/latest/solana_program/feature/index.html">https://docs.rs/solana-program/latest/solana_program/feature/index.html</a>)
and [feature_set](<a class="reference external" href="https://docs.rs/solana-sdk/latest/solana_sdk/feature_set/index.html">https://docs.rs/solana-sdk/latest/solana_sdk/feature_set/index.html</a>)
Rust modules are the primitives for this facility, and the <cite>solana feature</cite>
command-line subcommands allow for easy feature status inspection and feature
activation.</p>
<p>The <cite>solana feature activate</cite> workflow was designed for use by the core Solana
developers to allow for low-overhead addition of non-controversial network
features over time.</p>
<p>The Feature Proposal Program provides an additional mechanism over these runtime
feature activation primitives to permit feature activation by community vote
when appropriate.</p>
<p>## Source
The Feature Proposal Program’s source is available on
[github](<a class="reference external" href="https://github.com/solana-labs/solana-program-library">https://github.com/solana-labs/solana-program-library</a>)</p>
<p>## Interface
The Feature Proposal Program is written in Rust and available on [crates.io](<a class="reference external" href="https://crates.io/crates/spl-feature-proposal">https://crates.io/crates/spl-feature-proposal</a>) and [docs.rs](<a class="reference external" href="https://docs.rs/spl-feature-proposal">https://docs.rs/spl-feature-proposal</a>).</p>
<p>## Command-line Utility
The <cite>spl-feature-proposal</cite> command-line utility can be used to manage feature
proposal.  Once you have [Rust installed](<a class="reference external" href="https://rustup.rs/">https://rustup.rs/</a>), run:
<code class="docutils literal notranslate"><span class="pre">`sh</span>
<span class="pre">$</span> <span class="pre">cargo</span> <span class="pre">install</span> <span class="pre">spl-feature-proposal-cli</span>
<span class="pre">`</span></code></p>
<p>Run <cite>spl-feature-proposal –help</cite> for a full description of available commands.</p>
<p>### Configuration
The <cite>spl-feature-proposal</cite> configuration is shared with the <cite>solana</cite> command-line tool.</p>
<p>## Feature Proposal Life Cycle</p>
<p>This section describes the life cycle of a feature proposal.</p>
<p>### Implement the Feature
The first step is to conceive of the new feature and realize it in the
Solana code base, working with the core Solana developers at <a class="reference external" href="https://github.com/solana-labs/solana">https://github.com/solana-labs/solana</a>.</p>
<p>During the implementation, a <em>feature id</em> will be required to identity the new
feature in the code base to avoid the new functionality until its activation.
The <em>feature id</em> for a feature proposal is derived by running the following
commands.</p>
<p>First create a keypair for the proposal:
<code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">$</span> <span class="pre">solana-keygen</span> <span class="pre">new</span> <span class="pre">--outfile</span> <span class="pre">feature-proposal.json</span> <span class="pre">--silent</span> <span class="pre">--no-passphrase</span>
<span class="pre">Wrote</span> <span class="pre">new</span> <span class="pre">keypair</span> <span class="pre">to</span> <span class="pre">feature-proposal.json</span>
<span class="pre">`</span></code></p>
<p>Now run the <cite>spl-feature-proposal</cite> program to derive the <em>feature id</em>:
<code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">$</span> <span class="pre">spl-feature-proposal</span> <span class="pre">address</span> <span class="pre">feature-proposal.json</span>
<span class="pre">Feature</span> <span class="pre">Id:</span> <span class="pre">HQ3baDfNU7WKCyWvtMYZmi51YPs7vhSiLn1ESYp3jhiA</span>
<span class="pre">Token</span> <span class="pre">Mint</span> <span class="pre">Address:</span> <span class="pre">ALvA7Lv9jbo8JFhxqnRpjWWuR3aD12uCb5KBJst4uc3d</span>
<span class="pre">Acceptance</span> <span class="pre">Token</span> <span class="pre">Address:</span> <span class="pre">AdqKm3mSJf8AtTWjfpA5ZbJszWQPcwyLA2XkRyLbf3Di</span>
<span class="pre">`</span></code>
which in this case is <cite>HQ3baDfNU7WKCyWvtMYZmi51YPs7vhSiLn1ESYp3jhiA</cite>.</p>
<p><cite>HQ3baDfNU7WKCyWvtMYZmi51YPs7vhSiLn1ESYp3jhiA</cite> is the identifier that will be
used in the code base and eventually will be visible in the <cite>solana feature status</cite> command.</p>
<p>Note however that it is not possible to use <cite>solana feature activate</cite> to
activate this feature, as there is no private key for
<cite>HQ3baDfNU7WKCyWvtMYZmi51YPs7vhSiLn1ESYp3jhiA</cite>.  Activation of this feature is
only possible by the Feature Proposal Program.</p>
<p>### Initiate the Feature Proposal</p>
<p>After the feature is implemented and deployed to the Solana cluster,
the <em>feature id</em> will be visible in <cite>solana feature status</cite> and the <em>feature
proposer</em> may initiate the community proposal process.</p>
<p>This is done by running:
<a href="#id1"><span class="problematic" id="id2">``</span></a>`
$ spl-feature-proposal propose feature-proposal.json
Feature Id: HQ3baDfNU7WKCyWvtMYZmi51YPs7vhSiLn1ESYp3jhiA
Token Mint Address: ALvA7Lv9jbo8JFhxqnRpjWWuR3aD12uCb5KBJst4uc3d
Distributor Token Address: GK55hNft4TGc3Hg4KzbjEmju8VfaNuXK8jQNDTZKcsNF
Acceptance Token Address: AdqKm3mSJf8AtTWjfpA5ZbJszWQPcwyLA2XkRyLbf3Di
Number of validators: 376
Tokens to be minted: 134575791.53064314
Tokens required for acceptance: 90165780.3255309 (67%)
Token distribution file: feature-proposal.csv
JSON RPC URL: <a class="reference external" href="http://api.mainnet-beta.solana.com">http://api.mainnet-beta.solana.com</a></p>
<dl class="simple">
<dt>Distribute the proposal tokens to all validators by running:</dt><dd><p>$ solana-tokens distribute-spl-tokens –from GK55hNft4TGc3Hg4KzbjEmju8VfaNuXK8jQNDTZKcsNF –input-csv feature-proposal.csv –db-path db.8CyUVvio –fee-payer ~/.config/solana/id.json –owner &lt;FEATURE_PROPOSAL_KEYPAIR&gt;
$ solana-tokens spl-token-balances –mint ALvA7Lv9jbo8JFhxqnRpjWWuR3aD12uCb5KBJst4uc3d –input-csv feature-proposal.csv</p>
</dd>
<dt>Once the distribution is complete, request validators vote for the proposal. To vote, validators should first look up their token account address:</dt><dd><p>$ spl-token –owner ~/validator-keypair.json accounts ALvA7Lv9jbo8JFhxqnRpjWWuR3aD12uCb5KBJst4uc3d</p>
</dd>
<dt>and then submit their vote by running:</dt><dd><p>$ spl-token –owner ~/validator-keypair.json transfer &lt;TOKEN_ACCOUNT_ADDRESS&gt; ALL AdqKm3mSJf8AtTWjfpA5ZbJszWQPcwyLA2XkRyLbf3Di</p>
</dd>
<dt>Periodically the votes must be tallied by running:</dt><dd><p>$ spl-feature-proposal tally 8CyUVvio2oYAP28ZkMBPHq88ikhRgWet6i4NYsCW5Cxa</p>
</dd>
</dl>
<p>Tallying is permissionless and may be run by anybody.
Once this feature proposal is accepted, the HQ3baDfNU7WKCyWvtMYZmi51YPs7vhSiLn1ESYp3jhiA feature will be activated at the next epoch.</p>
<p>Add –confirm flag to initiate the feature proposal
<a href="#id3"><span class="problematic" id="id4">``</span></a><a href="#id5"><span class="problematic" id="id6">`</span></a></p>
<p>If the output looks good run the command again with the <cite>–confirm</cite> flag to
continue, and then follow the remaining steps in the output to distribute the
vote tokens to all the validators.</p>
<p><strong>COST:</strong> As a part of token distribution, the <em>feature proposer</em> will be
financing the creation of SPL Token accounts for each of the validators.  A SPL
Token account requires 0.00203928 SOL at creation, so the cost for initiating a
feature proposal on a network with 500 validators is approximately 1 SOL.</p>
<p>### Tally the Votes</p>
<p>After advertising to the validators that a feature proposal is pending their
acceptance, the votes are tallied by running:
<code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">$</span> <span class="pre">spl-feature-proposal</span> <span class="pre">tally</span> <span class="pre">8CyUVvio2oYAP28ZkMBPHq88ikhRgWet6i4NYsCW5Cxa</span>
<span class="pre">`</span></code>
Anybody may tally the vote.  Once the required number of votes are tallied, the
feature will be automatically activated at the start of the next epoch.</p>
<p>Upon a successful activation the feature will now show as activated by
<cite>solana feature status</cite> as well.</p>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">twit</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, jare.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../_sources/src/feature-proposal.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>