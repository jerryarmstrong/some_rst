<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>docs/src/cli/delegate-stake.md &#8212; twit  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b3523f8e" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=039e1c02" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=b3ba4146"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="docs-src-cli-delegate-stake-md">
<h1>docs/src/cli/delegate-stake.md<a class="headerlink" href="#docs-src-cli-delegate-stake-md" title="Permalink to this heading">¶</a></h1>
<p>Last edited: 2023-08-11 21:38:33</p>
<p>Contents:</p>
<div class="highlight-md notranslate"><div class="highlight"><pre><span></span>---
</pre></div>
</div>
<p>title: Staking
—
For an overview of staking, read first the
[Staking and Inflation FAQ](<a class="reference external" href="https://solana.com/staking">https://solana.com/staking</a>).</p>
<hr class="docutils" />
<p>After you have [received SOL](transfer-tokens.md), you might consider putting
it to use by delegating _stake_ to a validator. Stake is what we call tokens
in a _stake <a href="#id57"><span class="problematic" id="id58">account_</span></a>. Solana weights validator votes by the amount of stake
delegated to them, which gives those validators more influence in determining
then next valid block of transactions in the blockchain. Solana then generates
new SOL periodically to reward stakers and validators. You earn more rewards
the more stake you delegate.</p>
<p>## Create a Stake Account</p>
<p>To delegate stake, you will need to transfer some tokens into a stake account.
To create an account, you will need a keypair. Its public key will be used as
the [stake account address](../staking/stake-accounts.md#account-address).
No need for a password or encryption here; this keypair will be discarded right
after creating the stake account.</p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">solana-keygen</span> <span class="pre">new</span> <span class="pre">--no-passphrase</span> <span class="pre">-o</span> <span class="pre">stake-account.json</span>
<span class="pre">`</span></code></p>
<p>The output will contain the public key after the text <cite>pubkey:</cite>.</p>
<p><code class="docutils literal notranslate"><span class="pre">`text</span>
<span class="pre">pubkey:</span> <span class="pre">GKvqsuNcnwWqPzzuhLmGi4rzzh55FhJtGizkhHaEJqiV</span>
<span class="pre">`</span></code></p>
<p>Copy the public key and store it for safekeeping. You will need it any time you
want to perform an action on the stake account you create next.</p>
<p>Now, create a stake account:</p>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a>bash
solana create-stake-account –from &lt;KEYPAIR&gt; stake-account.json &lt;AMOUNT&gt; </p>
<blockquote>
<div><p>–stake-authority &lt;KEYPAIR&gt; –withdraw-authority &lt;KEYPAIR&gt; –fee-payer &lt;KEYPAIR&gt;</p>
</div></blockquote>
<p><a href="#id5"><span class="problematic" id="id6">``</span></a><a href="#id7"><span class="problematic" id="id8">`</span></a></p>
<p><cite>&lt;AMOUNT&gt;</cite> tokens are transferred from the account at the “from” <cite>&lt;KEYPAIR&gt;</cite> to
a new stake account at the public key of stake-account.json.</p>
<p>The stake-account.json file can now be discarded. To authorize additional
actions, you will use the <cite>–stake-authority</cite> or <cite>–withdraw-authority</cite> keypair,
not stake-account.json.</p>
<p>View the new stake account with the <cite>solana stake-account</cite> command:</p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">solana</span> <span class="pre">stake-account</span> <span class="pre">&lt;STAKE_ACCOUNT_ADDRESS&gt;</span>
<span class="pre">`</span></code></p>
<p>The output will look similar to this:</p>
<p><code class="docutils literal notranslate"><span class="pre">`text</span>
<span class="pre">Total</span> <span class="pre">Stake:</span> <span class="pre">5000</span> <span class="pre">SOL</span>
<span class="pre">Stake</span> <span class="pre">account</span> <span class="pre">is</span> <span class="pre">undelegated</span>
<span class="pre">Stake</span> <span class="pre">Authority:</span> <span class="pre">EXU95vqs93yPeCeAU7mPPu6HbRUmTFPEiGug9oCdvQ5F</span>
<span class="pre">Withdraw</span> <span class="pre">Authority:</span> <span class="pre">EXU95vqs93yPeCeAU7mPPu6HbRUmTFPEiGug9oCdvQ5F</span>
<span class="pre">`</span></code></p>
<p>### Set Stake and Withdraw Authorities</p>
<p>[Stake and withdraw authorities](../staking/stake-accounts.md#understanding-account-authorities)
can be set when creating an account via the
<cite>–stake-authority</cite> and <cite>–withdraw-authority</cite> options, or afterward with the
<cite>solana stake-authorize</cite> command. For example, to set a new stake authority,
run:</p>
<p><a href="#id9"><span class="problematic" id="id10">``</span></a><a href="#id11"><span class="problematic" id="id12">`</span></a>bash
solana stake-authorize &lt;STAKE_ACCOUNT_ADDRESS&gt; </p>
<blockquote>
<div><p>–stake-authority &lt;KEYPAIR&gt; –new-stake-authority &lt;PUBKEY&gt; –fee-payer &lt;KEYPAIR&gt;</p>
</div></blockquote>
<p><a href="#id13"><span class="problematic" id="id14">``</span></a><a href="#id15"><span class="problematic" id="id16">`</span></a></p>
<p>This will use the existing stake authority <cite>&lt;KEYPAIR&gt;</cite> to authorize a new stake
authority <cite>&lt;PUBKEY&gt;</cite> on the stake account <cite>&lt;STAKE_ACCOUNT_ADDRESS&gt;</cite>.</p>
<p>### Advanced: Derive Stake Account Addresses</p>
<p>When you delegate stake, you delegate all tokens in the stake account to a
single validator. To delegate to multiple validators, you will need multiple
stake accounts. Creating a new keypair for each account and managing those
addresses can be cumbersome. Fortunately, you can derive stake addresses using
the <cite>–seed</cite> option:</p>
<p><a href="#id17"><span class="problematic" id="id18">``</span></a><a href="#id19"><span class="problematic" id="id20">`</span></a>bash
solana create-stake-account –from &lt;KEYPAIR&gt; &lt;STAKE_ACCOUNT_KEYPAIR&gt; –seed &lt;STRING&gt; &lt;AMOUNT&gt; </p>
<blockquote>
<div><p>–stake-authority &lt;PUBKEY&gt; –withdraw-authority &lt;PUBKEY&gt; –fee-payer &lt;KEYPAIR&gt;</p>
</div></blockquote>
<p><a href="#id21"><span class="problematic" id="id22">``</span></a><a href="#id23"><span class="problematic" id="id24">`</span></a></p>
<p><cite>&lt;STRING&gt;</cite> is an arbitrary string up to 32 bytes, but will typically be a
number corresponding to which derived account this is. The first account might
be “0”, then “1”, and so on. The public key of <cite>&lt;STAKE_ACCOUNT_KEYPAIR&gt;</cite> acts
as the base address. The command derives a new address from the base address
and seed string. To see what stake address the command will derive, use <cite>solana create-address-with-seed</cite>:</p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">solana</span> <span class="pre">create-address-with-seed</span> <span class="pre">--from</span> <span class="pre">&lt;PUBKEY&gt;</span> <span class="pre">&lt;SEED_STRING&gt;</span> <span class="pre">STAKE</span>
<span class="pre">`</span></code></p>
<p><cite>&lt;PUBKEY&gt;</cite> is the public key of the <cite>&lt;STAKE_ACCOUNT_KEYPAIR&gt;</cite> passed to
<cite>solana create-stake-account</cite>.</p>
<p>The command will output a derived address, which can be used for the
<cite>&lt;STAKE_ACCOUNT_ADDRESS&gt;</cite> argument in staking operations.</p>
<p>## Delegate Stake</p>
<p>To delegate your stake to a validator, you will need its vote account address.
Find it by querying the cluster for the list of all validators and their vote
accounts with the <cite>solana validators</cite> command:</p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">solana</span> <span class="pre">validators</span>
<span class="pre">`</span></code></p>
<p>The first column of each row contains the validator’s identity and the second
is the vote account address. Choose a validator and use its vote account
address in <cite>solana delegate-stake</cite>:</p>
<p><a href="#id25"><span class="problematic" id="id26">``</span></a><a href="#id27"><span class="problematic" id="id28">`</span></a>bash
solana delegate-stake –stake-authority &lt;KEYPAIR&gt; &lt;STAKE_ACCOUNT_ADDRESS&gt; &lt;VOTE_ACCOUNT_ADDRESS&gt; </p>
<blockquote>
<div><p>–fee-payer &lt;KEYPAIR&gt;</p>
</div></blockquote>
<p><a href="#id29"><span class="problematic" id="id30">``</span></a><a href="#id31"><span class="problematic" id="id32">`</span></a></p>
<p>The stake authority <cite>&lt;KEYPAIR&gt;</cite> authorizes the operation on the account with
address <cite>&lt;STAKE_ACCOUNT_ADDRESS&gt;</cite>. The stake is delegated to the vote account
with address <cite>&lt;VOTE_ACCOUNT_ADDRESS&gt;</cite>.</p>
<p>After delegating stake, use <cite>solana stake-account</cite> to observe the changes
to the stake account:</p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">solana</span> <span class="pre">stake-account</span> <span class="pre">&lt;STAKE_ACCOUNT_ADDRESS&gt;</span>
<span class="pre">`</span></code></p>
<p>You will see new fields “Delegated Stake” and “Delegated Vote Account Address”
in the output. The output will look similar to this:</p>
<p><code class="docutils literal notranslate"><span class="pre">`text</span>
<span class="pre">Total</span> <span class="pre">Stake:</span> <span class="pre">5000</span> <span class="pre">SOL</span>
<span class="pre">Credits</span> <span class="pre">Observed:</span> <span class="pre">147462</span>
<span class="pre">Delegated</span> <span class="pre">Stake:</span> <span class="pre">4999.99771712</span> <span class="pre">SOL</span>
<span class="pre">Delegated</span> <span class="pre">Vote</span> <span class="pre">Account</span> <span class="pre">Address:</span> <span class="pre">CcaHc2L43ZWjwCHART3oZoJvHLAe9hzT2DJNUpBzoTN1</span>
<span class="pre">Stake</span> <span class="pre">activates</span> <span class="pre">starting</span> <span class="pre">from</span> <span class="pre">epoch:</span> <span class="pre">42</span>
<span class="pre">Stake</span> <span class="pre">Authority:</span> <span class="pre">EXU95vqs93yPeCeAU7mPPu6HbRUmTFPEiGug9oCdvQ5F</span>
<span class="pre">Withdraw</span> <span class="pre">Authority:</span> <span class="pre">EXU95vqs93yPeCeAU7mPPu6HbRUmTFPEiGug9oCdvQ5F</span>
<span class="pre">`</span></code></p>
<p>## Deactivate Stake</p>
<p>Once delegated, you can undelegate stake with the <cite>solana deactivate-stake</cite>
command:</p>
<p><a href="#id33"><span class="problematic" id="id34">``</span></a><a href="#id35"><span class="problematic" id="id36">`</span></a>bash
solana deactivate-stake –stake-authority &lt;KEYPAIR&gt; &lt;STAKE_ACCOUNT_ADDRESS&gt; </p>
<blockquote>
<div><p>–fee-payer &lt;KEYPAIR&gt;</p>
</div></blockquote>
<p><a href="#id37"><span class="problematic" id="id38">``</span></a><a href="#id39"><span class="problematic" id="id40">`</span></a></p>
<p>The stake authority <cite>&lt;KEYPAIR&gt;</cite> authorizes the operation on the account
with address <cite>&lt;STAKE_ACCOUNT_ADDRESS&gt;</cite>.</p>
<p>Note that stake takes several epochs to “cool down”. Attempts to delegate stake
in the cool down period will fail.</p>
<p>## Withdraw Stake</p>
<p>Transfer tokens out of a stake account with the <cite>solana withdraw-stake</cite> command:</p>
<p><a href="#id41"><span class="problematic" id="id42">``</span></a><a href="#id43"><span class="problematic" id="id44">`</span></a>bash
solana withdraw-stake –withdraw-authority &lt;KEYPAIR&gt; &lt;STAKE_ACCOUNT_ADDRESS&gt; &lt;RECIPIENT_ADDRESS&gt; &lt;AMOUNT&gt; </p>
<blockquote>
<div><p>–fee-payer &lt;KEYPAIR&gt;</p>
</div></blockquote>
<p><a href="#id45"><span class="problematic" id="id46">``</span></a><a href="#id47"><span class="problematic" id="id48">`</span></a></p>
<p><cite>&lt;STAKE_ACCOUNT_ADDRESS&gt;</cite> is the existing stake account, the stake authority
<cite>&lt;KEYPAIR&gt;</cite> is the withdraw authority, and <cite>&lt;AMOUNT&gt;</cite> is the number of tokens
to transfer to <cite>&lt;RECIPIENT_ADDRESS&gt;</cite>.</p>
<p>## Split Stake</p>
<p>You may want to delegate stake to additional validators while your existing
stake is not eligible for withdrawal. It might not be eligible because it is
currently staked, cooling down, or locked up. To transfer tokens from an
existing stake account to a new one, use the <cite>solana split-stake</cite> command:</p>
<p><a href="#id49"><span class="problematic" id="id50">``</span></a><a href="#id51"><span class="problematic" id="id52">`</span></a>bash
solana split-stake –stake-authority &lt;KEYPAIR&gt; &lt;STAKE_ACCOUNT_ADDRESS&gt; &lt;NEW_STAKE_ACCOUNT_KEYPAIR&gt; &lt;AMOUNT&gt; </p>
<blockquote>
<div><p>–fee-payer &lt;KEYPAIR&gt;</p>
</div></blockquote>
<p><a href="#id53"><span class="problematic" id="id54">``</span></a><a href="#id55"><span class="problematic" id="id56">`</span></a></p>
<p><cite>&lt;STAKE_ACCOUNT_ADDRESS&gt;</cite> is the existing stake account, the stake authority
<cite>&lt;KEYPAIR&gt;</cite> is the stake authority, <cite>&lt;NEW_STAKE_ACCOUNT_KEYPAIR&gt;</cite> is the
keypair for the new account, and <cite>&lt;AMOUNT&gt;</cite> is the number of tokens to transfer
to the new account.</p>
<p>To split a stake account into a derived account address, use the <cite>–seed</cite>
option. See
[Derive Stake Account Addresses](#advanced-derive-stake-account-addresses)
for details.</p>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">twit</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, jare.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../_sources/src/cli/delegate-stake.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>