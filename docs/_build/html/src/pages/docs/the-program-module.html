<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>docs/src/pages/docs/the-program-module.md &#8212; twit  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b3523f8e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css?v=039e1c02" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js?v=b3ba4146"></script>
    <script src="../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="docs-src-pages-docs-the-program-module-md">
<h1>docs/src/pages/docs/the-program-module.md<a class="headerlink" href="#docs-src-pages-docs-the-program-module-md" title="Permalink to this heading">¶</a></h1>
<p>Last edited: 2022-12-14 20:15:57</p>
<p>Contents:</p>
<div class="highlight-md notranslate"><div class="highlight"><pre><span></span>---
</pre></div>
</div>
<p>title: The Program Module
description: Anchor - The Program Module
—</p>
<p>The program module is where you define your business logic. You do so by writing functions which can be called by clients or other programs. You’ve already seen one example of such a function, the <cite>set_data</cite> function from the previous section.</p>
<p>—</p>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a>rust
#[program]
mod hello_anchor {</p>
<blockquote>
<div><p>use super::<a href="#id5"><span class="problematic" id="id6">*</span></a>;
pub fn set_data(ctx: Context&lt;SetData&gt;, data: u64) -&gt; Result&lt;()&gt; {</p>
<blockquote>
<div><dl class="simple">
<dt>if ctx.accounts.token_account.amount &gt; 0 {</dt><dd><p>ctx.accounts.my_account.data = data;</p>
</dd>
</dl>
<p>}
Ok(())</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
<section id="id7">
<h2>}<a class="headerlink" href="#id7" title="Permalink to this heading">¶</a></h2>
<p>## Context</p>
<p>&gt; [Context Reference](<a class="reference external" href="https://docs.rs/anchor-lang/latest/anchor_lang/context/index.html">https://docs.rs/anchor-lang/latest/anchor_lang/context/index.html</a>)</p>
<p>Each endpoint function takes a <cite>Context</cite> type as its first argument. Through this context argument it can access the accounts (<cite>ctx.accounts</cite>), the program id (<cite>ctx.program_id</cite>) of the executing program, and the remaining accounts (<cite>ctx.remaining_accounts</cite>). <cite>remaining_accounts</cite> is a vector that contains all accounts that were passed into the instruction but are not declared in the <cite>Accounts</cite> struct. This is useful when you want your function to handle a variable amount of accounts, e.g. when initializing a game with a variable number of players.</p>
<p>## Instruction Data</p>
<p>If your function requires instruction data, you can add it by adding arguments to the function after the context argument. Anchor will then automatically deserialize the instruction data into the arguments. You can have as many as you like. You can even pass in your own types as long as you use`#[derive(AnchorDeserialize)]` on them or implement <cite>AnchorDeserialize</cite> for them yourself. Here’s an example with a custom type used as an instruction data arg:</p>
<p><a href="#id8"><span class="problematic" id="id9">``</span></a><a href="#id10"><span class="problematic" id="id11">`</span></a>rust
#[program]
mod hello_anchor {</p>
<blockquote>
<div><p>use super::<a href="#id12"><span class="problematic" id="id13">*</span></a>;
pub fn set_data(ctx: Context&lt;SetData&gt;, data: Data) -&gt; Result&lt;()&gt; {</p>
<blockquote>
<div><p>ctx.accounts.my_account.data = data.data;
ctx.accounts.my_account.age = data.age;
Ok(())</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
<p>}</p>
<p>#[account]
#[derive(Default)]
pub struct MyAccount {</p>
<blockquote>
<div><p>pub data: u64,
pub age: u8</p>
</div></blockquote>
<p>}</p>
<p>#[derive(AnchorSerialize, AnchorDeserialize, Eq, PartialEq, Clone, Copy, Debug)]
pub struct Data {</p>
<blockquote>
<div><p>pub data: u64,
pub age: u8</p>
</div></blockquote>
</section>
<section id="id14">
<h2>}<a class="headerlink" href="#id14" title="Permalink to this heading">¶</a></h2>
<p>Conveniently, <cite>#[account]</cite> implements <cite>Anchor(De)Serialize</cite> for <cite>MyAccount</cite>, so the example above can be simplified.</p>
<p><a href="#id15"><span class="problematic" id="id16">``</span></a><a href="#id17"><span class="problematic" id="id18">`</span></a>rust
#[program]
mod hello_anchor {</p>
<blockquote>
<div><p>use super::<a href="#id19"><span class="problematic" id="id20">*</span></a>;
pub fn set_data(ctx: Context&lt;SetData&gt;, data: MyAccount) -&gt; Result&lt;()&gt; {</p>
<blockquote>
<div><p>ctx.accounts.my_account.set_inner(data);
Ok(())</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
<p>}</p>
<p>#[account]
#[derive(Default)]
pub struct MyAccount {</p>
<blockquote>
<div><p>pub data: u64,
pub age: u8</p>
</div></blockquote>
</section>
<section id="id21">
<h2>}<a class="headerlink" href="#id21" title="Permalink to this heading">¶</a></h2>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">twit</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, jare.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../../_sources/src/pages/docs/the-program-module.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>