<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>docs/src/offline-signing.md &#8212; twit  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b3523f8e" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=039e1c02" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=b3ba4146"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="docs-src-offline-signing-md">
<h1>docs/src/offline-signing.md<a class="headerlink" href="#docs-src-offline-signing-md" title="Permalink to this heading">¶</a></h1>
<p>Last edited: 2023-08-11 21:38:33</p>
<p>Contents:</p>
<div class="highlight-md notranslate"><div class="highlight"><pre><span></span>---
</pre></div>
</div>
<p>title: Offline Transaction Signing
—</p>
<p>Some security models require keeping signing keys, and thus the signing
process, separated from transaction creation and network broadcast. Examples
include:</p>
<ul class="simple">
<li><p>Collecting signatures from geographically disparate signers in a
[multi-signature scheme](<a class="reference external" href="https://spl.solana.com/token#multisig-usage">https://spl.solana.com/token#multisig-usage</a>)</p></li>
<li><p>Signing transactions using an [airgapped](&lt;<a class="reference external" href="https://en.wikipedia.org/wiki/Air_gap_(networking)">https://en.wikipedia.org/wiki/Air_gap_(networking)</a>&gt;)
signing device</p></li>
</ul>
<p>This document describes using Solana’s CLI to separately sign and submit a
transaction.</p>
<p>## Commands Supporting Offline Signing</p>
<p>At present, the following commands support offline signing:</p>
<ul class="simple">
<li><p>[<cite>create-stake-account</cite>](cli/usage.md#solana-create-stake-account)</p></li>
<li><p>[<cite>create-stake-account-checked</cite>](cli/usage.md#solana-create-stake-account-checked)</p></li>
<li><p>[<cite>deactivate-stake</cite>](cli/usage.md#solana-deactivate-stake)</p></li>
<li><p>[<cite>delegate-stake</cite>](cli/usage.md#solana-delegate-stake)</p></li>
<li><p>[<cite>split-stake</cite>](cli/usage.md#solana-split-stake)</p></li>
<li><p>[<cite>stake-authorize</cite>](cli/usage.md#solana-stake-authorize)</p></li>
<li><p>[<cite>stake-authorize-checked</cite>](cli/usage.md#solana-stake-authorize-checked)</p></li>
<li><p>[<cite>stake-set-lockup</cite>](cli/usage.md#solana-stake-set-lockup)</p></li>
<li><p>[<cite>stake-set-lockup-checked</cite>](cli/usage.md#solana-stake-set-lockup-checked)</p></li>
<li><p>[<cite>transfer</cite>](cli/usage.md#solana-transfer)</p></li>
<li><p>[<cite>withdraw-stake</cite>](cli/usage.md#solana-withdraw-stake)</p></li>
<li><p>[<cite>create-vote-account</cite>](cli/usage.md#solana-create-vote-account)</p></li>
<li><p>[<cite>vote-authorize-voter</cite>](cli/usage.md#solana-vote-authorize-voter)</p></li>
<li><p>[<cite>vote-authorize-voter-checked</cite>](cli/usage.md#solana-vote-authorize-voter-checked)</p></li>
<li><p>[<cite>vote-authorize-withdrawer</cite>](cli/usage.md#solana-vote-authorize-withdrawer)</p></li>
<li><p>[<cite>vote-authorize-withdrawer-checked</cite>](cli/usage.md#solana-vote-authorize-withdrawer-checked)</p></li>
<li><p>[<cite>vote-update-commission</cite>](cli/usage.md#solana-vote-update-commission)</p></li>
<li><p>[<cite>vote-update-validator</cite>](cli/usage.md#solana-vote-update-validator)</p></li>
<li><p>[<cite>withdraw-from-vote-account</cite>](cli/usage.md#solana-withdraw-from-vote-account)</p></li>
</ul>
<p>## Signing Transactions Offline</p>
<p>To sign a transaction offline, pass the following arguments on the command line</p>
<ol class="arabic simple">
<li><p><cite>–sign-only</cite>, prevents the client from submitting the signed transaction
to the network. Instead, the pubkey/signature pairs are printed to stdout.</p></li>
<li><p><cite>–blockhash BASE58_HASH</cite>, allows the caller to specify the value used to
fill the transaction’s <cite>recent_blockhash</cite> field. This serves a number of
purposes, namely:
_ Eliminates the need to connect to the network and query a recent blockhash
via RPC
_ Enables the signers to coordinate the blockhash in a multiple-signature
scheme</p></li>
</ol>
<p>### Example: Offline Signing a Payment</p>
<p>Command</p>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a>bash
solana&#64;offline$ solana transfer –sign-only –blockhash 5Tx8F3jgSHx21CbtjwmdaKPLM5tWmreWAnPrbqHomSJF </p>
<blockquote>
<div><p>recipient-keypair.json 1</p>
</div></blockquote>
<p><a href="#id5"><span class="problematic" id="id6">``</span></a><a href="#id7"><span class="problematic" id="id8">`</span></a></p>
<p>Output</p>
<p><a href="#id9"><span class="problematic" id="id10">``</span></a><a href="#id11"><span class="problematic" id="id12">`</span></a>text</p>
<p>Blockhash: 5Tx8F3jgSHx21CbtjwmdaKPLM5tWmreWAnPrbqHomSJF
Signers (Pubkey=Signature):</p>
<blockquote>
<div><p>FhtzLVsmcV7S5XqGD79ErgoseCLhZYmEZnz9kQg1Rp7j=4vC38p4bz7XyiXrk6HtaooUqwxTWKocf45cstASGtmrD398biNJnmTcUCVEojE7wVQvgdYbjHJqRFZPpzfCQpmUN</p>
</div></blockquote>
<p>{“blockhash”:”5Tx8F3jgSHx21CbtjwmdaKPLM5tWmreWAnPrbqHomSJF”,”signers”:[“FhtzLVsmcV7S5XqGD79ErgoseCLhZYmEZnz9kQg1Rp7j=4vC38p4bz7XyiXrk6HtaooUqwxTWKocf45cstASGtmrD398biNJnmTcUCVEojE7wVQvgdYbjHJqRFZPpzfCQpmUN”]}’
<a href="#id13"><span class="problematic" id="id14">``</span></a><a href="#id15"><span class="problematic" id="id16">`</span></a></p>
<p>## Submitting Offline Signed Transactions to the Network</p>
<p>To submit a transaction that has been signed offline to the network, pass the
following arguments on the command line</p>
<ol class="arabic simple">
<li><p><cite>–blockhash BASE58_HASH</cite>, must be the same blockhash as was used to sign</p></li>
<li><p><cite>–signer BASE58_PUBKEY=BASE58_SIGNATURE</cite>, one for each offline signer. This
includes the pubkey/signature pairs directly in the transaction rather than
signing it with any local keypair(s)</p></li>
</ol>
<p>### Example: Submitting an Offline Signed Payment</p>
<p>Command</p>
<p><a href="#id17"><span class="problematic" id="id18">``</span></a><a href="#id19"><span class="problematic" id="id20">`</span></a>bash
solana&#64;online$ solana transfer –blockhash 5Tx8F3jgSHx21CbtjwmdaKPLM5tWmreWAnPrbqHomSJF </p>
<blockquote>
<div><p>–signer FhtzLVsmcV7S5XqGD79ErgoseCLhZYmEZnz9kQg1Rp7j=4vC38p4bz7XyiXrk6HtaooUqwxTWKocf45cstASGtmrD398biNJnmTcUCVEojE7wVQvgdYbjHJqRFZPpzfCQpmUN
recipient-keypair.json 1</p>
</div></blockquote>
<p><a href="#id21"><span class="problematic" id="id22">``</span></a><a href="#id23"><span class="problematic" id="id24">`</span></a></p>
<p>Output</p>
<p><code class="docutils literal notranslate"><span class="pre">`text</span>
<span class="pre">4vC38p4bz7XyiXrk6HtaooUqwxTWKocf45cstASGtmrD398biNJnmTcUCVEojE7wVQvgdYbjHJqRFZPpzfCQpmUN</span>
<span class="pre">`</span></code></p>
<p>## Offline Signing Over Multiple Sessions</p>
<p>Offline signing can also take place over multiple sessions. In this scenario,
pass the absent signer’s public key for each role. All pubkeys that were specified,
but no signature was generated for will be listed as absent in the offline signing
output</p>
<p>### Example: Transfer with Two Offline Signing Sessions</p>
<p>Command (Offline Session #1)</p>
<p><a href="#id25"><span class="problematic" id="id26">``</span></a><a href="#id27"><span class="problematic" id="id28">`</span></a>text
solana&#64;offline1$ solana transfer Fdri24WUGtrCXZ55nXiewAj6RM18hRHPGAjZk3o6vBut 10 </p>
<blockquote>
<div><p>–blockhash 7ALDjLv56a8f6sH6upAZALQKkXyjAwwENH9GomyM8Dbc –sign-only –keypair fee_payer.json –from 674RgFMgdqdRoVtMqSBg7mHFbrrNm1h1r721H1ZMquHL</p>
</div></blockquote>
<p><a href="#id29"><span class="problematic" id="id30">``</span></a><a href="#id31"><span class="problematic" id="id32">`</span></a></p>
<p>Output (Offline Session #1)</p>
<p><a href="#id33"><span class="problematic" id="id34">``</span></a><a href="#id35"><span class="problematic" id="id36">`</span></a>text
Blockhash: 7ALDjLv56a8f6sH6upAZALQKkXyjAwwENH9GomyM8Dbc
Signers (Pubkey=Signature):</p>
<blockquote>
<div><p>3bo5YiRagwmRikuH6H1d2gkKef5nFZXE3gJeoHxJbPjy=ohGKvpRC46jAduwU9NW8tP91JkCT5r8Mo67Ysnid4zc76tiiV1Ho6jv3BKFSbBcr2NcPPCarmfTLSkTHsJCtdYi</p>
</div></blockquote>
<dl class="simple">
<dt>Absent Signers (Pubkey):</dt><dd><p>674RgFMgdqdRoVtMqSBg7mHFbrrNm1h1r721H1ZMquHL</p>
</dd>
</dl>
<p><a href="#id37"><span class="problematic" id="id38">``</span></a><a href="#id39"><span class="problematic" id="id40">`</span></a></p>
<p>Command (Offline Session #2)</p>
<p><a href="#id41"><span class="problematic" id="id42">``</span></a><a href="#id43"><span class="problematic" id="id44">`</span></a>text
solana&#64;offline2$ solana transfer Fdri24WUGtrCXZ55nXiewAj6RM18hRHPGAjZk3o6vBut 10 </p>
<blockquote>
<div><p>–blockhash 7ALDjLv56a8f6sH6upAZALQKkXyjAwwENH9GomyM8Dbc –sign-only –keypair from.json –fee-payer 3bo5YiRagwmRikuH6H1d2gkKef5nFZXE3gJeoHxJbPjy</p>
</div></blockquote>
<p><a href="#id45"><span class="problematic" id="id46">``</span></a><a href="#id47"><span class="problematic" id="id48">`</span></a></p>
<p>Output (Offline Session #2)</p>
<p><a href="#id49"><span class="problematic" id="id50">``</span></a><a href="#id51"><span class="problematic" id="id52">`</span></a>text
Blockhash: 7ALDjLv56a8f6sH6upAZALQKkXyjAwwENH9GomyM8Dbc
Signers (Pubkey=Signature):</p>
<blockquote>
<div><p>674RgFMgdqdRoVtMqSBg7mHFbrrNm1h1r721H1ZMquHL=3vJtnba4dKQmEAieAekC1rJnPUndBcpvqRPRMoPWqhLEMCty2SdUxt2yvC1wQW6wVUa5putZMt6kdwCaTv8gk7sQ</p>
</div></blockquote>
<dl class="simple">
<dt>Absent Signers (Pubkey):</dt><dd><p>3bo5YiRagwmRikuH6H1d2gkKef5nFZXE3gJeoHxJbPjy</p>
</dd>
</dl>
<p><a href="#id53"><span class="problematic" id="id54">``</span></a><a href="#id55"><span class="problematic" id="id56">`</span></a></p>
<p>Command (Online Submission)</p>
<p><a href="#id57"><span class="problematic" id="id58">``</span></a><a href="#id59"><span class="problematic" id="id60">`</span></a>text
solana&#64;online$ solana transfer Fdri24WUGtrCXZ55nXiewAj6RM18hRHPGAjZk3o6vBut 10 </p>
<blockquote>
<div><p>–blockhash 7ALDjLv56a8f6sH6upAZALQKkXyjAwwENH9GomyM8Dbc –from 674RgFMgdqdRoVtMqSBg7mHFbrrNm1h1r721H1ZMquHL –signer 674RgFMgdqdRoVtMqSBg7mHFbrrNm1h1r721H1ZMquHL=3vJtnba4dKQmEAieAekC1rJnPUndBcpvqRPRMoPWqhLEMCty2SdUxt2yvC1wQW6wVUa5putZMt6kdwCaTv8gk7sQ –fee-payer 3bo5YiRagwmRikuH6H1d2gkKef5nFZXE3gJeoHxJbPjy –signer 3bo5YiRagwmRikuH6H1d2gkKef5nFZXE3gJeoHxJbPjy=ohGKvpRC46jAduwU9NW8tP91JkCT5r8Mo67Ysnid4zc76tiiV1Ho6jv3BKFSbBcr2NcPPCarmfTLSkTHsJCtdYi</p>
</div></blockquote>
<p><a href="#id61"><span class="problematic" id="id62">``</span></a><a href="#id63"><span class="problematic" id="id64">`</span></a></p>
<p>Output (Online Submission)</p>
<p><code class="docutils literal notranslate"><span class="pre">`text</span>
<span class="pre">ohGKvpRC46jAduwU9NW8tP91JkCT5r8Mo67Ysnid4zc76tiiV1Ho6jv3BKFSbBcr2NcPPCarmfTLSkTHsJCtdYi</span>
<span class="pre">`</span></code></p>
<p>## Buying More Time to Sign</p>
<p>Typically a Solana transaction must be signed and accepted by the network within
a number of slots from the blockhash in its <cite>recent_blockhash</cite> field (~1min at
the time of this writing). If your signing procedure takes longer than this, a
[Durable Transaction Nonce](offline-signing/durable-nonce.md) can give you the extra time you
need.</p>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">twit</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, jare.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../_sources/src/offline-signing.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>