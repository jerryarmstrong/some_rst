<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>docs/src/running-validator/validator-start.md &#8212; twit  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b3523f8e" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=039e1c02" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=b3ba4146"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="docs-src-running-validator-validator-start-md">
<h1>docs/src/running-validator/validator-start.md<a class="headerlink" href="#docs-src-running-validator-validator-start-md" title="Permalink to this heading">¶</a></h1>
<p>Last edited: 2023-08-11 21:38:33</p>
<p>Contents:</p>
<div class="highlight-md notranslate"><div class="highlight"><pre><span></span>---
</pre></div>
</div>
<p>title: Starting a Validator
—</p>
<p>## Configure Solana CLI</p>
<p>The solana cli includes <cite>get</cite> and <cite>set</cite> configuration commands to automatically
set the <cite>–url</cite> argument for cli commands. For example:</p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">solana</span> <span class="pre">config</span> <span class="pre">set</span> <span class="pre">--url</span> <span class="pre">http://api.devnet.solana.com</span>
<span class="pre">`</span></code></p>
<p>While this section demonstrates how to connect to the Devnet cluster, the steps
are similar for the other [Solana Clusters](../clusters.md).</p>
<p>## Confirm The Cluster Is Reachable</p>
<p>Before attaching a validator node, sanity check that the cluster is accessible
to your machine by fetching the transaction count:</p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">solana</span> <span class="pre">transaction-count</span>
<span class="pre">`</span></code></p>
<p>View the [metrics dashboard](<a class="reference external" href="https://metrics.solana.com:3000/d/monitor/cluster-telemetry">https://metrics.solana.com:3000/d/monitor/cluster-telemetry</a>) for more
detail on cluster activity.</p>
<p>## Enabling CUDA</p>
<p>If your machine has a GPU with CUDA installed (Linux-only currently), include
the <cite>–cuda</cite> argument to <cite>solana-validator</cite>.</p>
<p>When your validator is started look for the following log message to indicate
that CUDA is enabled: <cite>“[&lt;timestamp&gt; solana::validator] CUDA is enabled”</cite></p>
<p>## System Tuning</p>
<p>### Linux</p>
<p>If you would prefer to manage system settings on your own, you may do so with
the following commands.</p>
<p>#### <strong>Optimize sysctl knobs</strong></p>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a>bash
sudo bash -c “cat &gt;/etc/sysctl.d/21-solana-validator.conf &lt;&lt;EOF
# Increase UDP buffer sizes
net.core.rmem_default = 134217728
net.core.rmem_max = 134217728
net.core.wmem_default = 134217728
net.core.wmem_max = 134217728</p>
<p># Increase memory mapped files limit
vm.max_map_count = 1000000</p>
<p># Increase number of allowed open file descriptors
fs.nr_open = 1000000
EOF”
<a href="#id5"><span class="problematic" id="id6">``</span></a><a href="#id7"><span class="problematic" id="id8">`</span></a></p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">sudo</span> <span class="pre">sysctl</span> <span class="pre">-p</span> <span class="pre">/etc/sysctl.d/21-solana-validator.conf</span>
<span class="pre">`</span></code></p>
<p>#### <strong>Increase systemd and session file limits</strong></p>
<p>Add</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">LimitNOFILE=1000000</span>
<span class="pre">`</span></code></p>
<p>to the <cite>[Service]</cite> section of your systemd service file, if you use one,
otherwise add</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">DefaultLimitNOFILE=1000000</span>
<span class="pre">`</span></code></p>
<p>to the <cite>[Manager]</cite> section of <cite>/etc/systemd/system.conf</cite>.</p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">daemon-reload</span>
<span class="pre">`</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">sudo</span> <span class="pre">bash</span> <span class="pre">-c</span> <span class="pre">&quot;cat</span> <span class="pre">&gt;/etc/security/limits.d/90-solana-nofiles.conf</span> <span class="pre">&lt;&lt;EOF</span>
<span class="pre">#</span> <span class="pre">Increase</span> <span class="pre">process</span> <span class="pre">file</span> <span class="pre">descriptor</span> <span class="pre">count</span> <span class="pre">limit</span>
<span class="pre">*</span> <span class="pre">-</span> <span class="pre">nofile</span> <span class="pre">1000000</span>
<span class="pre">EOF&quot;</span>
<span class="pre">`</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">###</span> <span class="pre">Close</span> <span class="pre">all</span> <span class="pre">open</span> <span class="pre">sessions</span> <span class="pre">(log</span> <span class="pre">out</span> <span class="pre">then,</span> <span class="pre">in</span> <span class="pre">again)</span> <span class="pre">###</span>
<span class="pre">`</span></code></p>
<p>#### System Clock</p>
<p>Large system clock drift can prevent a node from properly participating in Solana’s [gossip protocol](../validator/gossip.md).  Ensure that your system clock is accurate.  To check the current system clock, use:</p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">timedatectl</span>
<span class="pre">`</span></code></p>
<p>Operators commonly use an ntp server to maintain an accurate system clock.</p>
<p>## Generate identity</p>
<p>Create an identity keypair for your validator by running:</p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">solana-keygen</span> <span class="pre">new</span> <span class="pre">-o</span> <span class="pre">~/validator-keypair.json</span>
<span class="pre">`</span></code></p>
<p>The identity public key can now be viewed by running:</p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">solana-keygen</span> <span class="pre">pubkey</span> <span class="pre">~/validator-keypair.json</span>
<span class="pre">`</span></code></p>
<p>&gt; Note: The “validator-keypair.json” file is also your (ed25519) private key.</p>
<p>### Paper Wallet identity</p>
<p>You can create a paper wallet for your identity file instead of writing the
keypair file to disk with:</p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">solana-keygen</span> <span class="pre">new</span> <span class="pre">--no-outfile</span>
<span class="pre">`</span></code></p>
<p>The corresponding identity public key can now be viewed by running:</p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">solana-keygen</span> <span class="pre">pubkey</span> <span class="pre">ASK</span>
<span class="pre">`</span></code></p>
<p>and then entering your seed phrase.</p>
<p>See [Paper Wallet Usage](../wallet-guide/paper-wallet.md) for more info.</p>
<p>—</p>
<p>### Vanity Keypair</p>
<p>You can generate a custom vanity keypair using solana-keygen. For instance:</p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">solana-keygen</span> <span class="pre">grind</span> <span class="pre">--starts-with</span> <span class="pre">e1v1s:1</span>
<span class="pre">`</span></code></p>
<p>You may request that the generated vanity keypair be expressed as a seed phrase
which allows recovery of the keypair from the seed phrase and an optionally
supplied passphrase (note that this is significantly slower than grinding without
a mnemonic):</p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">solana-keygen</span> <span class="pre">grind</span> <span class="pre">--use-mnemonic</span> <span class="pre">--starts-with</span> <span class="pre">e1v1s:1</span>
<span class="pre">`</span></code></p>
<p>Depending on the string requested, it may take days to find a match…</p>
<p>—</p>
<p>Your validator identity keypair uniquely identifies your validator within the
network. <strong>It is crucial to back-up this information.</strong></p>
<p>If you don’t back up this information, you WILL NOT BE ABLE TO RECOVER YOUR
VALIDATOR if you lose access to it. If this happens, YOU WILL LOSE YOUR
ALLOCATION OF SOL TOO.</p>
<p>To back-up your validator identify keypair, <strong>back-up your
“validator-keypair.json” file or your seed phrase to a secure location.</strong></p>
<p>## More Solana CLI Configuration</p>
<p>Now that you have a keypair, set the solana configuration to use your validator
keypair for all following commands:</p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">solana</span> <span class="pre">config</span> <span class="pre">set</span> <span class="pre">--keypair</span> <span class="pre">~/validator-keypair.json</span>
<span class="pre">`</span></code></p>
<p>You should see the following output:</p>
<p><code class="docutils literal notranslate"><span class="pre">`text</span>
<span class="pre">Config</span> <span class="pre">File:</span> <span class="pre">/home/solana/.config/solana/cli/config.yml</span>
<span class="pre">RPC</span> <span class="pre">URL:</span> <span class="pre">http://api.devnet.solana.com</span>
<span class="pre">WebSocket</span> <span class="pre">URL:</span> <span class="pre">ws://api.devnet.solana.com/</span> <span class="pre">(computed)</span>
<span class="pre">Keypair</span> <span class="pre">Path:</span> <span class="pre">/home/solana/validator-keypair.json</span>
<span class="pre">Commitment:</span> <span class="pre">confirmed</span>
<span class="pre">`</span></code></p>
<p>## Airdrop &amp; Check Validator Balance</p>
<p>Airdrop yourself some SOL to get started:</p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">solana</span> <span class="pre">airdrop</span> <span class="pre">1</span>
<span class="pre">`</span></code></p>
<p>Note that airdrops are only available on Devnet and Testnet. Both are limited
to 1 SOL per request.</p>
<p>To view your current balance:</p>
<p><code class="docutils literal notranslate"><span class="pre">`text</span>
<span class="pre">solana</span> <span class="pre">balance</span>
<span class="pre">`</span></code></p>
<p>Or to see in finer detail:</p>
<p><code class="docutils literal notranslate"><span class="pre">`text</span>
<span class="pre">solana</span> <span class="pre">balance</span> <span class="pre">--lamports</span>
<span class="pre">`</span></code></p>
<p>Read more about the [difference between SOL and lamports here](../introduction.md#what-are-sols).</p>
<p>## Create Authorized Withdrawer Account</p>
<p>If you haven’t already done so, create an authorized-withdrawer keypair to be used
as the ultimate authority over your validator. This keypair will have the
authority to withdraw from your vote account, and will have the additional
authority to change all other aspects of your vote account. Needless to say,
this is a very important keypair as anyone who possesses it can make any
changes to your vote account, including taking ownership of it permanently.
So it is very important to keep your authorized-withdrawer keypair in a safe
location. It does not need to be stored on your validator, and should not be
stored anywhere from where it could be accessed by unauthorized parties. To
create your authorized-withdrawer keypair:</p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">solana-keygen</span> <span class="pre">new</span> <span class="pre">-o</span> <span class="pre">~/authorized-withdrawer-keypair.json</span>
<span class="pre">`</span></code></p>
<p>## Create Vote Account</p>
<p>If you haven’t already done so, create a vote-account keypair and create the
vote account on the network. If you have completed this step, you should see the
“vote-account-keypair.json” in your Solana runtime directory:</p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">solana-keygen</span> <span class="pre">new</span> <span class="pre">-o</span> <span class="pre">~/vote-account-keypair.json</span>
<span class="pre">`</span></code></p>
<p>The following command can be used to create your vote account on the blockchain
with all the default options:</p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">solana</span> <span class="pre">create-vote-account</span> <span class="pre">~/vote-account-keypair.json</span> <span class="pre">~/validator-keypair.json</span> <span class="pre">~/authorized-withdrawer-keypair.json</span>
<span class="pre">`</span></code></p>
<p>Remember to move your authorized withdrawer keypair into a very secure location after running the above command.</p>
<p>Read more about [creating and managing a vote account](vote-accounts.md).</p>
<p>## Known validators</p>
<p>If you know and respect other validator operators, you can specify this on the command line with the <cite>–known-validator &lt;PUBKEY&gt;</cite>
argument to <cite>solana-validator</cite>. You can specify multiple ones by repeating the argument <cite>–known-validator &lt;PUBKEY1&gt; –known-validator &lt;PUBKEY2&gt;</cite>.
This has two effects, one is when the validator is booting with <cite>–only-known-rpc</cite>, it will only ask that set of
known nodes for downloading genesis and snapshot data. Another is that in combination with the <cite>–halt-on-known-validators-accounts-hash-mismatch</cite> option,
it will monitor the merkle root hash of the entire accounts state of other known nodes on gossip and if the hashes produce any mismatch,
the validator will halt the node to prevent the validator from voting or processing potentially incorrect state values. At the moment, the slot that
the validator publishes the hash on is tied to the snapshot interval. For the feature to be effective, all validators in the known
set should be set to the same snapshot interval value or multiples of the same.</p>
<p>It is highly recommended you use these options to prevent malicious snapshot state download or
account state divergence.</p>
<p>## Connect Your Validator</p>
<p>Connect to the cluster by running:</p>
<p><a href="#id9"><span class="problematic" id="id10">``</span></a><a href="#id11"><span class="problematic" id="id12">`</span></a>bash
solana-validator </p>
<blockquote>
<div><p>–identity ~/validator-keypair.json –vote-account ~/vote-account-keypair.json –rpc-port 8899 –entrypoint entrypoint.devnet.solana.com:8001 –limit-ledger-size –log ~/solana-validator.log</p>
</div></blockquote>
<p><a href="#id13"><span class="problematic" id="id14">``</span></a><a href="#id15"><span class="problematic" id="id16">`</span></a></p>
<p>To force validator logging to the console add a <cite>–log -</cite> argument, otherwise
the validator will automatically log to a file.</p>
<p>The ledger will be placed in the <cite>ledger/</cite> directory by default, use the
<cite>–ledger</cite> argument to specify a different location.</p>
<p>&gt; Note: You can use a
&gt; [paper wallet seed phrase](../wallet-guide/paper-wallet.md)
&gt; for your <cite>–identity</cite> and/or
&gt; <cite>–authorized-voter</cite> keypairs. To use these, pass the respective argument as
&gt; <cite>solana-validator –identity ASK … –authorized-voter ASK …</cite>
&gt; and you will be prompted to enter your seed phrases and optional passphrase.</p>
<p>Confirm your validator is connected to the network by opening a new terminal and
running:</p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">solana</span> <span class="pre">gossip</span>
<span class="pre">`</span></code></p>
<p>If your validator is connected, its public key and IP address will appear in the list.</p>
<p>### Controlling local network port allocation</p>
<p>By default the validator will dynamically select available network ports in the
8000-10000 range, and may be overridden with <cite>–dynamic-port-range</cite>. For
example, <cite>solana-validator –dynamic-port-range 11000-11020 …</cite> will restrict
the validator to ports 11000-11020.</p>
<p>### Limiting ledger size to conserve disk space</p>
<p>The <cite>–limit-ledger-size</cite> parameter allows you to specify how many ledger
[shreds](../terminology.md#shred) your node retains on disk. If you do not
include this parameter, the validator will keep all received ledger data
until it runs out of disk space. Otherwise, the validator will continually
purge the oldest data once to stay under the specified <cite>–limit-ledger-size</cite>
value.</p>
<p>The default value attempts to keep the blockstore (data within the rocksdb
directory) disk usage under 500 GB. More or less disk usage may be requested
by adding an argument to <cite>–limit-ledger-size</cite> if desired. More information
about selecting a custom limit value is [available
here](<a class="reference external" href="https://github.com/solana-labs/solana/blob/aa72aa87790277619d12c27f1ebc864d23739557/core/src/ledger_cleanup_service.rs#L26-L37">https://github.com/solana-labs/solana/blob/aa72aa87790277619d12c27f1ebc864d23739557/core/src/ledger_cleanup_service.rs#L26-L37</a>).</p>
<p>Note that the above target of 500 GB does not account for other items that
may reside in the <cite>ledger</cite> directory, depending on validator configuration.
These items may include (but are not limited to):
- Persistent accounts data
- Persistent accounts index
- Snapshots</p>
<p>### Systemd Unit</p>
<p>Running the validator as a systemd unit is one easy way to manage running in the
background.</p>
<p>Assuming you have a user called <cite>sol</cite> on your machine, create the file <cite>/etc/systemd/system/sol.service</cite> with
the following:</p>
<p><a href="#id17"><span class="problematic" id="id18">``</span></a>`
[Unit]
Description=Solana Validator
After=network.target
StartLimitIntervalSec=0</p>
<p>[Service]
Type=simple
Restart=always
RestartSec=1
User=sol
LimitNOFILE=1000000
LogRateLimitIntervalSec=0
Environment=”PATH=/bin:/usr/bin:/home/sol/.local/share/solana/install/active_release/bin”
ExecStart=/home/sol/bin/validator.sh</p>
<p>[Install]
WantedBy=multi-user.target
<a href="#id19"><span class="problematic" id="id20">``</span></a><a href="#id21"><span class="problematic" id="id22">`</span></a></p>
<p>Now create <cite>/home/sol/bin/validator.sh</cite> to include the desired
<cite>solana-validator</cite> command-line. Ensure that the ‘exec’ command is used to
start the validator process (i.e. “exec solana-validator …”). This is
important because without it, logrotate will end up killing the validator
every time the logs are rotated.</p>
<p>Ensure that running <cite>/home/sol/bin/validator.sh</cite> manually starts
the validator as expected. Don’t forget to mark it executable with <cite>chmod +x /home/sol/bin/validator.sh</cite></p>
<p>Start the service with:</p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">$</span> <span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">enable</span> <span class="pre">--now</span> <span class="pre">sol</span>
<span class="pre">`</span></code></p>
<p>### Logging</p>
<p>#### Log output tuning</p>
<p>The messages that a validator emits to the log can be controlled by the <cite>RUST_LOG</cite>
environment variable. Details can by found in the [documentation](<a class="reference external" href="https://docs.rs/env_logger/latest/env_logger/#enabling-logging">https://docs.rs/env_logger/latest/env_logger/#enabling-logging</a>)
for the <cite>env_logger</cite> Rust crate.</p>
<p>Note that if logging output is reduced, this may make it difficult to debug issues
encountered later. Should support be sought from the team, any changes will need
to be reverted and the issue reproduced before help can be provided.</p>
<p>#### Log rotation</p>
<p>The validator log file, as specified by <cite>–log ~/solana-validator.log</cite>, can get
very large over time and it’s recommended that log rotation be configured.</p>
<p>The validator will re-open its log file when it receives the <cite>USR1</cite> signal, which is the
basic primitive that enables log rotation.</p>
<p>If the validator is being started by a wrapper shell script, it is important to
launch the process with <cite>exec</cite> (<cite>exec solana-validator …</cite>) when using logrotate.
This will prevent the <cite>USR1</cite> signal from being sent to the script’s process
instead of the validator’s, which will kill them both.</p>
<p>#### Using logrotate</p>
<p>An example setup for the <cite>logrotate</cite>, which assumes that the validator is
running as a systemd service called <cite>sol.service</cite> and writes a log file at
/home/sol/solana-validator.log:</p>
<p><a href="#id23"><span class="problematic" id="id24">``</span></a><a href="#id25"><span class="problematic" id="id26">`</span></a>bash
# Setup log rotation</p>
<p>cat &gt; logrotate.sol &lt;&lt;EOF
/home/sol/solana-validator.log {</p>
<blockquote>
<div><p>rotate 7
daily
missingok
postrotate</p>
<blockquote>
<div><p>systemctl kill -s USR1 sol.service</p>
</div></blockquote>
<p>endscript</p>
</div></blockquote>
<p>}
EOF
sudo cp logrotate.sol /etc/logrotate.d/sol
systemctl restart logrotate.service
<a href="#id27"><span class="problematic" id="id28">``</span></a><a href="#id29"><span class="problematic" id="id30">`</span></a></p>
<p>As mentioned earlier, be sure that if you use logrotate, any script you create
which starts the solana validator process uses “exec” to do so (example: “exec
solana-validator …”); otherwise, when logrotate sends its signal to the
validator, the enclosing script will die and take the validator process with
it.</p>
<p>### Using a ramdisk with spill-over into swap for the accounts database to reduce SSD wear</p>
<p>If your machine has plenty of RAM, a tmpfs ramdisk
([tmpfs](<a class="reference external" href="https://man7.org/linux/man-pages/man5/tmpfs.5.html">https://man7.org/linux/man-pages/man5/tmpfs.5.html</a>)) may be used to hold
the accounts database</p>
<p>When using tmpfs it’s essential to also configure swap on your machine as well to
avoid running out of tmpfs space periodically.</p>
<p>A 300GB tmpfs partition is recommended, with an accompanying 250GB swap
partition.</p>
<p>Example configuration:</p>
<ol class="arabic simple">
<li><p><cite>sudo mkdir /mnt/solana-accounts</cite></p></li>
<li><p>Add a 300GB tmpfs partition by adding a new line containing <cite>tmpfs /mnt/solana-accounts tmpfs rw,size=300G,user=sol 0 0</cite> to <cite>/etc/fstab</cite>
(assuming your validator is running under the user “sol”). <strong>CAREFUL: If you
incorrectly edit /etc/fstab your machine may no longer boot</strong></p></li>
<li><p>Create at least 250GB of swap space</p></li>
</ol>
<ul class="simple">
<li><p>Choose a device to use in place of <cite>SWAPDEV</cite> for the remainder of these instructions.
Ideally select a free disk partition of 250GB or greater on a fast disk. If one is not
available, create a swap file with <cite>sudo dd if=/dev/zero of=/swapfile bs=1MiB count=250KiB</cite>,
set its permissions with <cite>sudo chmod 0600 /swapfile</cite> and use <cite>/swapfile</cite> as <cite>SWAPDEV</cite> for
the remainder of these instructions</p></li>
<li><p>Format the device for usage as swap with <cite>sudo mkswap SWAPDEV</cite></p></li>
</ul>
<ol class="arabic simple" start="4">
<li><p>Add the swap file to <cite>/etc/fstab</cite> with a new line containing <cite>SWAPDEV swap swap defaults 0 0</cite></p></li>
<li><p>Enable swap with <cite>sudo swapon -a</cite> and mount the tmpfs with <cite>sudo mount /mnt/solana-accounts/</cite></p></li>
<li><p>Confirm swap is active with <cite>free -g</cite> and the tmpfs is mounted with <cite>mount</cite></p></li>
</ol>
<p>Now add the <cite>–accounts /mnt/solana-accounts</cite> argument to your <cite>solana-validator</cite>
command-line arguments and restart the validator.</p>
<p>### Account indexing</p>
<p>As the number of populated accounts on the cluster grows, account-data RPC
requests that scan the entire account set – like
[<cite>getProgramAccounts</cite>](../api/http#getprogramaccounts) and
[SPL-token-specific requests](../api/http#gettokenaccountsbydelegate) –
may perform poorly. If your validator needs to support any of these requests,
you can use the <cite>–account-index</cite> parameter to activate one or more in-memory
account indexes that significantly improve RPC performance by indexing accounts
by the key field. Currently supports the following parameter values:</p>
<ul class="simple">
<li><p><cite>program-id</cite>: each account indexed by its owning program; used by [getProgramAccounts](../api/http#getprogramaccounts)</p></li>
<li><p><cite>spl-token-mint</cite>: each SPL token account indexed by its token Mint; used by [getTokenAccountsByDelegate](../api/http#gettokenaccountsbydelegate), and [getTokenLargestAccounts](../api/http#gettokenlargestaccounts)</p></li>
<li><p><cite>spl-token-owner</cite>: each SPL token account indexed by the token-owner address; used by [getTokenAccountsByOwner](../api/http#gettokenaccountsbyowner), and [getProgramAccounts](../api/http#getprogramaccounts) requests that include an spl-token-owner filter.</p></li>
</ul>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">twit</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, jare.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../_sources/src/running-validator/validator-start.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>