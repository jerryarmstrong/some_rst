<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>docs/src/running-validator/validator-stake.md &#8212; twit  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b3523f8e" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=039e1c02" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=b3ba4146"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="docs-src-running-validator-validator-stake-md">
<h1>docs/src/running-validator/validator-stake.md<a class="headerlink" href="#docs-src-running-validator-validator-stake-md" title="Permalink to this heading">¶</a></h1>
<p>Last edited: 2023-08-11 21:38:33</p>
<p>Contents:</p>
<div class="highlight-md notranslate"><div class="highlight"><pre><span></span>---
</pre></div>
</div>
<p>title: Staking
—</p>
<p><strong>By default your validator will have no stake.</strong> This means it will be
ineligible to become leader.</p>
<p>## Monitoring Catch Up</p>
<p>To delegate stake, first make sure your validator is running and has caught up
to the cluster. It may take some time to catch up after your validator boots.
Use the <cite>catchup</cite> command to monitor your validator through this process:</p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">solana</span> <span class="pre">catchup</span> <span class="pre">~/validator-keypair.json</span>
<span class="pre">`</span></code></p>
<p>Until your validator has caught up, it will not be able to vote successfully and
stake cannot be delegated to it.</p>
<p>Also if you find the cluster’s slot advancing faster than yours, you will likely
never catch up. This typically implies some kind of networking issue between
your validator and the rest of the cluster.</p>
<p>## Create Stake Keypair</p>
<p>If you haven’t already done so, create a staking keypair. If you have completed
this step, you should see the “validator-stake-keypair.json” in your Solana
runtime directory.</p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">solana-keygen</span> <span class="pre">new</span> <span class="pre">-o</span> <span class="pre">~/validator-stake-keypair.json</span>
<span class="pre">`</span></code></p>
<p>## Delegate Stake</p>
<p>Now delegate 1 SOL to your validator by first creating your stake account:</p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">solana</span> <span class="pre">create-stake-account</span> <span class="pre">~/validator-stake-keypair.json</span> <span class="pre">1</span>
<span class="pre">`</span></code></p>
<p>and then delegating that stake to your validator:</p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">solana</span> <span class="pre">delegate-stake</span> <span class="pre">~/validator-stake-keypair.json</span> <span class="pre">~/vote-account-keypair.json</span>
<span class="pre">`</span></code></p>
<p>&gt; Don’t delegate your remaining SOL, as your validator will use those tokens to vote.</p>
<p>Stakes can be re-delegated to another node at any time with the same command,
but only one re-delegation is permitted per epoch:</p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">solana</span> <span class="pre">delegate-stake</span> <span class="pre">~/validator-stake-keypair.json</span> <span class="pre">~/some-other-vote-account-keypair.json</span>
<span class="pre">`</span></code></p>
<p>Assuming the node is voting, now you’re up and running and generating validator
rewards. Rewards are paid automatically on epoch boundaries.</p>
<p>The rewards lamports earned are split between your stake account and the vote
account according to the commission rate set in the vote account. Rewards can
only be earned while the validator is up and running. Further, once staked, the
validator becomes an important part of the network. In order to safely remove a
validator from the network, first deactivate its stake.</p>
<p>At the end of each slot, a validator is expected to send a vote transaction.
These vote transactions are paid for by lamports from a validator’s identity
account.</p>
<p>This is a normal transaction so the standard transaction fee will apply. The
transaction fee range is defined by the genesis block. The actual fee will
fluctuate based on transaction load. You can determine the current fee via the
[RPC API “getRecentBlockhash”](../api/http#getrecentblockhash)
before submitting a transaction.</p>
<p>Learn more about [transaction fees here](../implemented-proposals/transaction-fees.md).</p>
<p>## Validator Stake Warm-up</p>
<p>To combat various attacks on consensus, new stake delegations are subject to
a [warm-up](/staking/stake-accounts#delegation-warmup-and-cooldown)
period.</p>
<p>Monitor a validator’s stake during warmup by:</p>
<ul class="simple">
<li><p>View your vote account:<cite>solana vote-account ~/vote-account-keypair.json</cite> This displays the current state of all the votes the validator has submitted to the network.</p></li>
<li><p>View your stake account, the delegation preference and details of your stake:<cite>solana stake-account ~/validator-stake-keypair.json</cite></p></li>
<li><p><cite>solana validators</cite> displays the current active stake of all validators, including yours</p></li>
<li><p><cite>solana stake-history</cite> shows the history of stake warming up and cooling down over recent epochs</p></li>
<li><p>Look for log messages on your validator indicating your next leader slot: <cite>[2019-09-27T20:16:00.319721164Z INFO solana_core::replay_stage] &lt;VALIDATOR_IDENTITY_PUBKEY&gt; voted and reset PoH at tick height ####. My next leader slot is ####</cite></p></li>
<li><p>Once your stake is warmed up, you will see a stake balance listed for your validator by running <cite>solana validators</cite></p></li>
</ul>
<p>## Monitor Your Staked Validator</p>
<p>Confirm your validator becomes a [leader](../terminology.md#leader)</p>
<ul class="simple">
<li><p>After your validator is caught up, use the <cite>solana balance</cite> command to monitor the earnings as your validator is selected as leader and collects transaction fees</p></li>
<li><p>Solana nodes offer a number of useful JSON-RPC methods to return information about the network and your validator’s participation. Make a request by using curl (or another http client of your choosing), specifying the desired method in JSON-RPC-formatted data. For example:</p></li>
</ul>
<dl>
<dt><a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a>bash</dt><dd><p>// Request
curl -X POST -H “Content-Type: application/json” -d ‘{“jsonrpc”:”2.0”,”id”:1, “method”:”getEpochInfo”}’ <a class="reference external" href="http://localhost:8899">http://localhost:8899</a></p>
<p>// Result
{“jsonrpc”:”2.0”,”result”:{“epoch”:3,”slotIndex”:126,”slotsInEpoch”:256},”id”:1}</p>
</dd>
</dl>
<p><a href="#id5"><span class="problematic" id="id6">``</span></a><a href="#id7"><span class="problematic" id="id8">`</span></a></p>
<p>Helpful JSON-RPC methods:</p>
<ul class="simple">
<li><p><a href="#id9"><span class="problematic" id="id10">`</span></a>getEpochInfo`[An epoch](../terminology.md#epoch) is the time, i.e. number of [slots](../terminology.md#slot), for which a [leader schedule](../terminology.md#leader-schedule) is valid. This will tell you what the current epoch is and how far into it the cluster is.</p></li>
<li><p><cite>getVoteAccounts</cite> This will tell you how much active stake your validator currently has. A % of the validator’s stake is activated on an epoch boundary. You can learn more about staking on Solana [here](../cluster/stake-delegation-and-rewards.md).</p></li>
<li><p><cite>getLeaderSchedule</cite> At any given moment, the network expects only one validator to produce ledger entries. The [validator currently selected to produce ledger entries](../cluster/leader-rotation.md#leader-rotation) is called the “leader”. This will return the complete leader schedule (on a slot-by-slot basis) for currently activated stake, the identity pubkey will show up 1 or more times here.</p></li>
</ul>
<p>## Deactivating Stake</p>
<p>Before detaching your validator from the cluster, you should deactivate the
stake that was previously delegated by running:</p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">solana</span> <span class="pre">deactivate-stake</span> <span class="pre">~/validator-stake-keypair.json</span>
<span class="pre">`</span></code></p>
<p>Stake is not deactivated immediately and instead cools down in a similar fashion
as stake warm up. Your validator should remain attached to the cluster while
the stake is cooling down. While cooling down, your stake will continue to earn
rewards. Only after stake cooldown is it safe to turn off your validator or
withdraw it from the network. Cooldown may take several epochs to complete,
depending on active stake and the size of your stake.</p>
<p>Note that a stake account may only be used once, so after deactivation, use the
cli’s <cite>withdraw-stake</cite> command to recover the previously staked lamports.</p>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">twit</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, jare.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../_sources/src/running-validator/validator-stake.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>