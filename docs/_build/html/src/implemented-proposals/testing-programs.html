<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>docs/src/implemented-proposals/testing-programs.md &#8212; twit  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b3523f8e" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=039e1c02" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=b3ba4146"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="docs-src-implemented-proposals-testing-programs-md">
<h1>docs/src/implemented-proposals/testing-programs.md<a class="headerlink" href="#docs-src-implemented-proposals-testing-programs-md" title="Permalink to this heading">¶</a></h1>
<p>Last edited: 2023-08-11 21:38:33</p>
<p>Contents:</p>
<div class="highlight-md notranslate"><div class="highlight"><pre><span></span>---
</pre></div>
</div>
<p>title: Testing Programs
—</p>
<p>Applications send transactions to a Solana cluster and query validators to confirm the transactions were processed and to check each transaction’s result. When the cluster doesn’t behave as anticipated, it could be for a number of reasons:</p>
<ul>
<li><p>The program is buggy</p></li>
<li><p>The BPF loader rejected an unsafe program instruction</p></li>
<li><p>The transaction was too big</p></li>
<li><p>The transaction was invalid</p></li>
<li><p>The Runtime tried to execute the transaction when another one was accessing</p>
<p>the same account</p>
</li>
<li><p>The network dropped the transaction</p></li>
<li><p>The cluster rolled back the ledger</p></li>
<li><p>A validator responded to queries maliciously</p></li>
</ul>
<p>## The AsyncClient and SyncClient Traits</p>
<p>To troubleshoot, the application should retarget a lower-level component, where fewer errors are possible. Retargeting can be done with different implementations of the AsyncClient and SyncClient traits.</p>
<p>Components implement the following primary methods:</p>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a>text
trait AsyncClient {</p>
<blockquote>
<div><p>fn async_send_transaction(&amp;self, transaction: Transaction) -&gt; io::Result&lt;Signature&gt;;</p>
</div></blockquote>
<p>}</p>
<dl class="simple">
<dt>trait SyncClient {</dt><dd><p>fn get_signature_status(&amp;self, signature: &amp;Signature) -&gt; Result&lt;Option&lt;transaction::Result&lt;()&gt;&gt;&gt;;</p>
</dd>
</dl>
<section id="id5">
<h2>}<a class="headerlink" href="#id5" title="Permalink to this heading">¶</a></h2>
<p>Users send transactions and asynchrounously and synchrounously await results.</p>
<p>### ThinClient for Clusters</p>
<p>The highest level implementation, ThinClient, targets a Solana cluster, which may be a deployed testnet or a local cluster running on a development machine.</p>
<p>### TpuClient for the TPU</p>
<p>The next level is the TPU implementation, which is not yet implemented. At the TPU level, the application sends transactions over Rust channels, where there can be no surprises from network queues or dropped packets. The TPU implements all “normal” transaction errors. It does signature verification, may report account-in-use errors, and otherwise results in the ledger, complete with proof of history hashes.</p>
<p>## Low-level testing</p>
<p>### BankClient for the Bank</p>
<p>Below the TPU level is the Bank. The Bank doesn’t do signature verification or generate a ledger. The Bank is a convenient layer at which to test new on-chain programs. It allows developers to toggle between native program implementations and BPF-compiled variants. No need for the Transact trait here. The Bank’s API is synchronous.</p>
<p>## Unit-testing with the Runtime</p>
<p>Below the Bank is the Runtime. The Runtime is the ideal test environment for unit-testing. By statically linking the Runtime into a native program implementation, the developer gains the shortest possible edit-compile-run loop. Without any dynamic linking, stack traces include debug symbols and program errors are straightforward to troubleshoot.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">twit</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, jare.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../_sources/src/implemented-proposals/testing-programs.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>