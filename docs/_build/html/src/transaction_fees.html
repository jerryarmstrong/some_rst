<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>docs/src/transaction_fees.md &#8212; twit  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b3523f8e" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=039e1c02" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=b3ba4146"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="docs-src-transaction-fees-md">
<h1>docs/src/transaction_fees.md<a class="headerlink" href="#docs-src-transaction-fees-md" title="Permalink to this heading">¶</a></h1>
<p>Last edited: 2023-08-11 21:38:33</p>
<p>Contents:</p>
<div class="highlight-md notranslate"><div class="highlight"><pre><span></span>---
</pre></div>
</div>
<p>title: Transaction Fees
description:</p>
<blockquote>
<div><p>“Transaction fees are the small fees paid to process instructions on the
network. These fees are based on computation and an optional prioritization
fee.”</p>
</div></blockquote>
<dl class="simple">
<dt>keywords:</dt><dd><ul class="simple">
<li><p>instruction fee</p></li>
<li><p>processing fee</p></li>
<li><p>storage fee</p></li>
<li><p>low fee blockchain</p></li>
<li><p>gas</p></li>
<li><p>gwei</p></li>
<li><p>cheap network</p></li>
<li><p>affordable blockchain</p></li>
</ul>
</dd>
</dl>
<p>—</p>
<p>The small fees paid to process [instructions](./terminology.md#instruction) on
the Solana blockchain are known as “_transaction <a href="#id11"><span class="problematic" id="id12">fees_</span></a>”.</p>
<p>As each transaction (which contains one or more instructions) is sent through
the network, it gets processed by the current leader validation-client. Once
confirmed as a global state transaction, this _transaction <a href="#id13"><span class="problematic" id="id14">fee_</span></a> is paid to the
network to help support the [economic design](#economic-design) of the Solana
blockchain.</p>
<p>&gt; <strong>NOTE:</strong> Transaction fees are different from
&gt; [account rent](./terminology.md#rent)! While transaction fees are paid to
&gt; process instructions on the Solana network, rent is paid to store data on the
&gt; blockchain.</p>
<p>&gt; You can learn more about rent here:
&gt; [What is rent?](./developing/intro/rent.md)</p>
<p>## Why pay transaction fees?</p>
<p>Transaction fees offer many benefits in the Solana
[economic design](#basic-economic-design) described below. Mainly:</p>
<ul class="simple">
<li><p>they provide compensation to the validator network for the CPU/GPU resources
necessary to process transactions,</p></li>
<li><p>reduce network spam by introducing real cost to transactions,</p></li>
<li><p>and provide long-term economic stability to the network through a
protocol-captured minimum fee amount per transaction</p></li>
</ul>
<p>&gt; <strong>NOTE:</strong> Network consensus votes are sent as normal system transfers, which
&gt; means that validators pay transaction fees to participate in consensus.</p>
<p>## Basic economic design</p>
<p>Many blockchain networks (e.g. Bitcoin and Ethereum), rely on inflationary
_protocol-based <a href="#id15"><span class="problematic" id="id16">rewards_</span></a> to secure the network in the short-term. Over the
long-term, these networks will increasingly rely on _transaction <a href="#id17"><span class="problematic" id="id18">fees_</span></a> to
sustain security.</p>
<p>The same is true on Solana. Specifically:</p>
<ul class="simple">
<li><p>A fixed proportion (initially 50%) of each transaction fee is _burned_
(destroyed), with the remaining going to the current
[leader](./terminology.md#leader) processing the transaction.</p></li>
<li><p>A scheduled global inflation rate provides a source for
[rewards](./implemented-proposals/staking-rewards.md) distributed to
[Solana Validators](../src/running-validator.md).</p></li>
</ul>
<p>### Why burn some fees?</p>
<p>As mentioned above, a fixed proportion of each transaction fee is _burned_
(destroyed). This is intended to cement the economic value of SOL and thus
sustain the network’s security. Unlike a scheme where transactions fees are
completely burned, leaders are still incentivized to include as many
transactions as possible in their slots.</p>
<p>Burnt fees can also help prevent malicious validators from censoring
transactions by being considered in [fork](./terminology.md#fork) selection.</p>
<p>#### Example of an attack:</p>
<p>In the case of a [Proof of History (PoH)](./terminology.md#proof-of-history-poh)
fork with a malicious, censoring leader:</p>
<ul class="simple">
<li><p>due to the fees lost from censoring, we would expect the total fees burned to
be <strong>_less than_</strong> a comparable honest fork</p></li>
<li><p>if the censoring leader is to compensate for these lost protocol fees, they
would have to replace the burnt fees on their fork themselves</p></li>
<li><p>thus potentially reducing the incentive to censor in the first place</p></li>
</ul>
<p>## Calculating transaction fees</p>
<p>Transactions fees are calculated based on two main parts:</p>
<ul class="simple">
<li><p>a statically set base fee per signature, and</p></li>
<li><p>the computational resources used during the transaction, measured in
“[_compute <a href="#id19"><span class="problematic" id="id20">units_</span></a>](./terminology.md#compute-units)”</p></li>
</ul>
<p>Since each transaction may require a different amount of computational
resources, they are alloted a maximum number of _compute <a href="#id21"><span class="problematic" id="id22">units_</span></a> per transaction
known as the “[_compute <a href="#id23"><span class="problematic" id="id24">budget_</span></a>](./terminology.md#compute-budget)”.</p>
<p>The execution of each instruction within a transaction consumes a different
number of _compute <a href="#id25"><span class="problematic" id="id26">units_</span></a>. After the maximum number of _compute <a href="#id27"><span class="problematic" id="id28">units_</span></a> has been
consumed (aka compute budget exhaustion), the runtime will halt the transaction
and return an error. This results in a failed transaction.</p>
<p>&gt; <strong>Learn more:</strong> compute units and the
&gt; [Compute Budget](./developing/programming-model/runtime#compute-budget) in the
&gt; Runtime and [requesting a fee estimate](../api/http#getfeeformessage) from the
&gt; RPC.</p>
<p>## Prioritization fee</p>
<p>A Solana transaction can include an <strong>optional</strong> fee to prioritize itself
against others known as a
“_[prioritization fee](./terminology.md#prioritization-fee)_”. Paying this
additional fee helps boost how a transaction is prioritized against others,
resulting in faster execution times.</p>
<p>### How the prioritization fee is calculated</p>
<p>A transaction’s [prioritization fee](./terminology.md#prioritization-fee) is
calculated by multiplying the maximum number of <strong>_compute units_</strong> by the
<strong>_compute unit price_</strong> (measured in _micro-<a href="#id29"><span class="problematic" id="id30">lamports_</span></a>).</p>
<p>Each transaction can set the maximum number of compute units it is allowed to
consume and the compute unit price by including a <cite>SetComputeUnitLimit</cite> and
<cite>SetComputeUnitPrice</cite> compute budget instruction respectively.</p>
<p>:::info
[Compute Budget instructions](<a class="reference external" href="https://github.com/solana-labs/solana/blob/master/sdk/src/compute_budget.rs">https://github.com/solana-labs/solana/blob/master/sdk/src/compute_budget.rs</a>)
do <strong>not</strong> require any accounts. ::</p>
<p>If no <cite>SetComputeUnitLimit</cite> instruction is provided, the limit will be
calculated as the product of the number of instructions in the transaction and
the default per-instruction units, which is currently
[200k](<a class="reference external" href="https://github.com/solana-labs/solana/blob/4293f11cf13fc1e83f1baa2ca3bb2f8ea8f9a000/program-runtime/src/compute_budget.rs#L13">https://github.com/solana-labs/solana/blob/4293f11cf13fc1e83f1baa2ca3bb2f8ea8f9a000/program-runtime/src/compute_budget.rs#L13</a>).</p>
<p>If no <cite>SetComputeUnitPrice</cite> instruction is provided, the transaction will
default to no additional elevated fee and the lowest priority.</p>
<p>### How to set the prioritization fee</p>
<p>A transaction’s prioritization fee is set by including a <cite>SetComputeUnitPrice</cite>
instruction, and optionally a <cite>SetComputeUnitLimit</cite> instruction. The runtime
will use these values to calculate the prioritization fee, which will be used to
prioritize the given transaction within the block.</p>
<p>You can craft each of these instructions via their <cite>rust</cite> or <cite>&#64;solana/web3.js</cite>
functions. Each of these instructions can then be included in the transaction
and sent to the cluster like normal. See also the
[best practices](#prioritization-fee-best-practices) below.</p>
<p>:::caution Transactions can only contain <strong>one of each type</strong> of compute budget
instruction. Duplicate types will result in an
[<cite>TransactionError::DuplicateInstruction</cite>](<a class="reference external" href="https://github.com/solana-labs/solana/blob/master/sdk/src/transaction/error.rs#L144-145">https://github.com/solana-labs/solana/blob/master/sdk/src/transaction/error.rs#L144-145</a>)
error, and ultimately transaction failure. ::</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#### Rust</span>
</pre></div>
</div>
<p>The rust <cite>solana-sdk</cite> crate includes functions within
[<cite>ComputeBudgetInstruction</cite>](<a class="reference external" href="https://docs.rs/solana-sdk/latest/solana_sdk/compute_budget/enum.ComputeBudgetInstruction.html">https://docs.rs/solana-sdk/latest/solana_sdk/compute_budget/enum.ComputeBudgetInstruction.html</a>)
to craft instructions for setting the _compute unit <a href="#id31"><span class="problematic" id="id32">limit_</span></a> and _compute unit
<a href="#id33"><span class="problematic" id="id34">price_</span></a>:</p>
<p><code class="docutils literal notranslate"><span class="pre">`rust</span>
<span class="pre">let</span> <span class="pre">instruction</span> <span class="pre">=</span> <span class="pre">ComputeBudgetInstruction::set_compute_unit_limit(300_000);</span>
<span class="pre">`</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">`rust</span>
<span class="pre">let</span> <span class="pre">instruction</span> <span class="pre">=</span> <span class="pre">ComputeBudgetInstruction::set_compute_unit_price(1);</span>
<span class="pre">`</span></code></p>
<p>#### Javascript</p>
<p>The <cite>&#64;solana/web3.js</cite> library includes functions within the
[<cite>ComputeBudgetProgram</cite>](<a class="reference external" href="https://solana-labs.github.io/solana-web3.js/classes/ComputeBudgetProgram.html">https://solana-labs.github.io/solana-web3.js/classes/ComputeBudgetProgram.html</a>)
class to craft instructions for setting the _compute unit <a href="#id35"><span class="problematic" id="id36">limit_</span></a> and _compute
unit <a href="#id37"><span class="problematic" id="id38">price_</span></a>:</p>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a>js
const instruction = ComputeBudgetProgram.setComputeUnitLimit({</p>
<blockquote>
<div><p>units: 300_000,</p>
</div></blockquote>
<section id="id5">
<h2>});<a class="headerlink" href="#id5" title="Permalink to this heading">¶</a></h2>
<p><a href="#id6"><span class="problematic" id="id7">``</span></a><a href="#id8"><span class="problematic" id="id9">`</span></a>js
const instruction = ComputeBudgetProgram.setComputeUnitPrice({</p>
<blockquote>
<div><p>microLamports: 1,</p>
</div></blockquote>
</section>
<section id="id10">
<h2>});<a class="headerlink" href="#id10" title="Permalink to this heading">¶</a></h2>
<p>### Prioritization fee best practices</p>
<p>#### Request the minimum compute units</p>
<p>Transactions should request the minimum amount of compute units required for
execution to minimize fees. Also note that fees are not adjusted when the number
of requested compute units exceeds the number of compute units actually consumed
by an executed transaction.</p>
<p>#### Get recent prioritization fees</p>
<p>Prior to sending a transaction to the cluster, you can use the
[<cite>getRecentPrioritizationFees</cite>](/api/http#getrecentprioritizationfees) RPC
method to get a list of the recent paid prioritization fees within the recent
blocks processed by the node.</p>
<p>You could then use this data to estimate an appropriate prioritization fee for
your transaction to both (a) better ensure it gets processed by the cluster and
(b) minimize the fees paid.</p>
<p>## Fee Collection</p>
<p>Transactions are required to have at least one account which has signed the
transaction and is writable. Writable signer accounts are serialized first in
the list of transaction accounts and the first of these accounts is always used
as the “fee payer”.</p>
<p>Before any transaction instructions are processed, the fee payer account balance
will be deducted to pay for transaction fees. If the fee payer balance is not
sufficient to cover transaction fees, the transaction will be dropped by the
cluster. If the balance was sufficient, the fees will be deducted whether the
transaction is processed successfully or not. In fact, if any of the transaction
instructions return an error or violate runtime restrictions, all account
changes _except_ the transaction fee deduction will be rolled back.</p>
<p>## Fee Distribution</p>
<p>Transaction fees are partially burned and the remaining fees are collected by
the validator that produced the block that the corresponding transactions were
included in. The transaction fee burn rate was initialized as 50% when inflation
rewards were enabled at the beginning of 2021 and has not changed so far. These
fees incentivize a validator to process as many transactions as possible during
its slots in the leader schedule. Collected fees are deposited in the
validator’s account (listed in the leader schedule for the current slot) after
processing all of the transactions included in a block.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">twit</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, jare.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../_sources/src/transaction_fees.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>