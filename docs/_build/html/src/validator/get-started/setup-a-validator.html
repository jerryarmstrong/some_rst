<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>docs/src/validator/get-started/setup-a-validator.md &#8212; twit  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b3523f8e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css?v=039e1c02" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js?v=b3ba4146"></script>
    <script src="../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="docs-src-validator-get-started-setup-a-validator-md">
<h1>docs/src/validator/get-started/setup-a-validator.md<a class="headerlink" href="#docs-src-validator-get-started-setup-a-validator-md" title="Permalink to this heading">¶</a></h1>
<p>Last edited: 2023-08-11 21:38:33</p>
<p>Contents:</p>
<div class="highlight-md notranslate"><div class="highlight"><pre><span></span>---
</pre></div>
</div>
<p>title: Setup a Solana Validator
sidebar_label: Setup a Validator
—</p>
<p>This is a guide for getting your validator setup on the Solana testnet cluster for the first time. Testnet is a Solana cluster that is used for performance testing of the software before the software is used on mainnet. Since testnet is stress tested daily, it is a good cluster to practice validator operations.</p>
<p>Once you have a working validator on testnet, you will want to learn about [operational best practices](../best-practices/operations.md) in the next section. Although the guide is specific to testnet, it can be adapted to mainnet or devnet as well. Refer to the [clusters](../../clusters) section of the Solana docs to see example commands for each cluster.</p>
<p>Now let’s get started.</p>
<p>## Open The Terminal Program</p>
<p>To start this guide, you will be running commands on your trusted computer, not on the remote machine that you plan to use for validator operations. First, locate the terminal program on your _trusted <a href="#id21"><span class="problematic" id="id22">computer_</span></a>.</p>
<ul class="simple">
<li><p>on Mac, you can search for the word _terminal_ in spotlight.</p></li>
<li><p>on Ubuntu, you can type <cite>CTRL + Alt + T</cite>.</p></li>
<li><p>on Windows, you will have to open the command prompt as an Administrator.</p></li>
</ul>
<p>## Install The Solana CLI Locally</p>
<p>To create your validator vote account, you need to install the [Solana command line interface](../../cli.md) on your local computer.</p>
<p>You can either use [Solana’s Install Tool](../../cli/install-solana-cli-tools#use-solanas-install-tool) section from the Solana docs to install the CLI, or alternatively, you can also [build from source](../../cli/install-solana-cli-tools#build-from-source).</p>
<p>&gt; Building from source is a great option for those that want a more secure and potentially more performant executable.</p>
<p>Once the Solana CLI is installed, you can return to this document once you are able to run the following command and get an answer on your terminal:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">solana</span> <span class="pre">--version</span>
<span class="pre">`</span></code></p>
<p>You should see an output that looks similar to this (note your version number may be higher):</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">solana-cli</span> <span class="pre">1.14.17</span> <span class="pre">(src:b29a37cf;</span> <span class="pre">feat:3488713414)</span>
<span class="pre">`</span></code></p>
<p>Once you have successfully installed the cli, the next step is to change your config so that it is making requests to the <cite>testnet</cite> cluster:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">solana</span> <span class="pre">config</span> <span class="pre">set</span> <span class="pre">--url</span> <span class="pre">https://api.testnet.solana.com</span>
<span class="pre">`</span></code></p>
<p>To verify that your config has change run:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">solana</span> <span class="pre">config</span> <span class="pre">get</span>
<span class="pre">`</span></code></p>
<p>You should see a line that says: <cite>RPC URL: https://api.testnet.solana.com</cite></p>
<p>## Create Keys</p>
<p>On your local computer, create the 3 keypairs that you will need to run your validator ([docs for reference](../../running-validator/validator-start#generate-identity)):</p>
<p>&gt; <strong>NOTE</strong> Some operators choose to make vanity keypairs for their identity and vote account using the <cite>grind</cite> sub command ([docs for reference](../../running-validator/validator-start#vanity-keypair)).</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">solana-keygen</span> <span class="pre">new</span> <span class="pre">-o</span> <span class="pre">validator-keypair.json</span>
<span class="pre">`</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">solana-keygen</span> <span class="pre">new</span> <span class="pre">-o</span> <span class="pre">vote-account-keypair.json</span>
<span class="pre">`</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">solana-keygen</span> <span class="pre">new</span> <span class="pre">-o</span> <span class="pre">authorized-withdrawer-keypair.json</span>
<span class="pre">`</span></code></p>
<p>&gt; <strong>IMPORTANT</strong> the <cite>authorized-withdrawer-keypair.json</cite> should be considered very sensitive information.  Many operators choose to use a multisig, hardware wallet, or paper wallet for the authorized withdrawer keypair.  A keypair is created on disk in this example for simplicity. Additionally, the withdrawer keypair should always be stored safely. The authorized withdrawer keypair should <strong>never</strong> be stored on the remote machine that the validator software runs on.  For more information, see [validator security best practices](../best-practices/security.md#do-not-store-your-withdrawer-key-on-your-validator)</p>
<p>## Create a Vote Account</p>
<p>Before you can create your vote account, you need to configure the Solana command line tool a bit more.</p>
<p>The below command sets the default keypair that the Solana CLI uses to the <cite>validator-keypair.json</cite> file that you just created in the terminal:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">solana</span> <span class="pre">config</span> <span class="pre">set</span> <span class="pre">--keypair</span> <span class="pre">./validator-keypair.json</span>
<span class="pre">`</span></code></p>
<p>Now verify your account balance of <cite>0</cite>:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">solana</span> <span class="pre">balance</span>
<span class="pre">`</span></code></p>
<p>Next, you need to deposit some SOL into that keypair account in order create a transaction (in this case, making your vote account):</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">solana</span> <span class="pre">airdrop</span> <span class="pre">1</span>
<span class="pre">`</span></code></p>
<p>&gt; <strong>NOTE</strong> The <cite>airdrop</cite> sub command does not work on mainnet, so you will have to acquire SOL and transfer it into this keypair’s account if you are setting up a mainnet validator.</p>
<p>Now, use the Solana cluster to create a vote account.</p>
<p>As a reminder, all commands mentioned so far <strong>should be done on your trusted computer</strong> and <strong>NOT</strong> on a server where you intend to run your validator. It is especially important that the following command is done on a <strong>trusted computer</strong>:</p>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a>`
solana create-vote-account -ut </p>
<blockquote>
<div><p>–fee-payer ./validator-keypair.json ./vote-account-keypair.json ./validator-keypair.json ./authorized-withdrawer-keypair.json</p>
</div></blockquote>
<p><a href="#id3"><span class="problematic" id="id4">``</span></a><a href="#id5"><span class="problematic" id="id6">`</span></a></p>
<p>&gt; Note <cite>-ut</cite> tells the cli command that we would like to use the testnet cluster.  <cite>–fee-payer</cite> specifies the keypair that will be used to pay the transaction fees.  Both flags are not necessary if you configured the solana cli properly above but they are useful to ensure you’re using the intended cluster and keypair.</p>
<p>## Save the Withdrawer Keypair Securely</p>
<p>Make sure your <cite>authorized-withdrawer-keypair.json</cite> is stored in a safe place.  If you have chosen to create a keypair on disk, you should first backup the keypair and then delete it from your local machine.</p>
<p><strong>IMPORTANT</strong>: If you lose your withdrawer key pair, you will lose control of your vote account. You will not be able to withdraw tokens from the vote account or update the withdrawer. Make sure to store the <cite>authorized-withdrawer-keypair.json</cite> securely before you move on.</p>
<p>## SSH To Your Validator</p>
<p>Connect to your remote server. This is specific to your server but will look something like this:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">ssh</span> <span class="pre">user&#64;&lt;server.hostname&gt;</span>
<span class="pre">`</span></code></p>
<p>You will have to check with your server provider to get the correct user account and hostname that you will ssh into.</p>
<p>## Update Your Ubuntu Packages</p>
<p>Make sure you have the latest and greatest package versions on your server</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">update</span>
<span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">install</span>
<span class="pre">`</span></code></p>
<p>## Sol User</p>
<p>Create a new Ubuntu user, named <cite>sol</cite>, for running the validator:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">sudo</span> <span class="pre">adduser</span> <span class="pre">sol</span>
<span class="pre">`</span></code></p>
<p>It is a best practice to always run your validator as a non-root user, like the <cite>sol</cite> user we just created.</p>
<p>## Hard Drive Setup</p>
<p>On your Ubuntu computer make sure that you have at least <cite>2TB</cite> of disk space mounted. You can check disk space using the <cite>df</cite> command:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">df</span> <span class="pre">-h</span>
<span class="pre">`</span></code></p>
<p>&gt; If you have a drive that is not mounted/formatted, you will have to set up the partition and mount the drive.</p>
<p>To see the hard disk devices that you have available, use the list block devices command:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">lsblk</span> <span class="pre">-f</span>
<span class="pre">`</span></code></p>
<p>You may see some devices in the list that have a name but do not have a UUID. Any device without a UUID is unformatted.</p>
<p>### Drive Formatting: Ledger</p>
<p>Assuming you have an nvme drive that is not formatted, you will have to format the drive and then mount it.</p>
<p>For example, if your computer has a device located at <cite>/dev/nvme0n1</cite>, then you can format the drive with the command:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">sudo</span> <span class="pre">mkfs</span> <span class="pre">-t</span> <span class="pre">ext4</span> <span class="pre">/dev/nvme0n1</span>
<span class="pre">`</span></code></p>
<p>For your computer, the device name and location may be different.</p>
<p>Next, check that you now have a UUID for that device:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">lsblk</span> <span class="pre">-f</span>
<span class="pre">`</span></code></p>
<p>In the fourth column, next to your device name, you should see a string of letters and numbers that look like this: <cite>6abd1aa5-8422-4b18-8058-11f821fd3967</cite>. That is the UUID for the device.</p>
<p>### Mounting Your Drive: Ledger</p>
<p>So far we have created a formatted drive, but you do not have access to it until you mount it. Make a directory for mounting your drive:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">sudo</span> <span class="pre">mkdir</span> <span class="pre">-p</span> <span class="pre">/mnt/ledger</span>
<span class="pre">`</span></code></p>
<p>Next, change the ownership of the directory to your <cite>sol</cite> user:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">sudo</span> <span class="pre">chown</span> <span class="pre">-R</span> <span class="pre">sol:sol</span> <span class="pre">/mnt/ledger</span>
<span class="pre">`</span></code></p>
<p>Now you can mount the drive:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">sudo</span> <span class="pre">mount</span> <span class="pre">/dev/nvme0n1</span> <span class="pre">/mnt/ledger</span>
<span class="pre">`</span></code></p>
<p>### Formatting And Mounting Drive: AccountsDB</p>
<p>You will also want to mount the accounts db on a separate hard drive. The process will be similar to the ledger example above.</p>
<p>Assuming you have device at <cite>/dev/nvme1n1</cite>, format the device and verify it exists:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">sudo</span> <span class="pre">mkfs</span> <span class="pre">-t</span> <span class="pre">ext4</span> <span class="pre">/dev/nvme1n1</span>
<span class="pre">`</span></code></p>
<p>Then verify the UUID for the device exists:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">lsblk</span> <span class="pre">-f</span>
<span class="pre">`</span></code></p>
<p>Create a directory for mounting:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">sudo</span> <span class="pre">mkdir</span> <span class="pre">-p</span> <span class="pre">/mnt/accounts</span>
<span class="pre">`</span></code></p>
<p>Change the ownership of that directory:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">sudo</span> <span class="pre">chown</span> <span class="pre">-R</span> <span class="pre">sol:sol</span> <span class="pre">/mnt/accounts</span>
<span class="pre">`</span></code></p>
<p>And lastly, mount the drive:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">sudo</span> <span class="pre">mount</span> <span class="pre">/dev/nvme1n1</span> <span class="pre">/mnt/accounts</span>
<span class="pre">`</span></code></p>
<p>## System Tuning</p>
<p>### Linux</p>
<p>Your system will need to be tuned in order to run properly. Your validator may not start without the settings below.</p>
<p>#### <strong>Optimize sysctl knobs</strong></p>
<p><a href="#id7"><span class="problematic" id="id8">``</span></a><a href="#id9"><span class="problematic" id="id10">`</span></a>bash
sudo bash -c “cat &gt;/etc/sysctl.d/21-solana-validator.conf &lt;&lt;EOF
# Increase UDP buffer sizes
net.core.rmem_default = 134217728
net.core.rmem_max = 134217728
net.core.wmem_default = 134217728
net.core.wmem_max = 134217728</p>
<p># Increase memory mapped files limit
vm.max_map_count = 1000000</p>
<p># Increase number of allowed open file descriptors
fs.nr_open = 1000000
EOF”
<a href="#id11"><span class="problematic" id="id12">``</span></a><a href="#id13"><span class="problematic" id="id14">`</span></a></p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">sudo</span> <span class="pre">sysctl</span> <span class="pre">-p</span> <span class="pre">/etc/sysctl.d/21-solana-validator.conf</span>
<span class="pre">`</span></code></p>
<p>#### <strong>Increase systemd and session file limits</strong></p>
<p>Add</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">LimitNOFILE=1000000</span>
<span class="pre">`</span></code></p>
<p>to the <cite>[Service]</cite> section of your systemd service file, if you use one,
otherwise add</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">DefaultLimitNOFILE=1000000</span>
<span class="pre">`</span></code></p>
<p>to the <cite>[Manager]</cite> section of <cite>/etc/systemd/system.conf</cite>.</p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">daemon-reload</span>
<span class="pre">`</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">sudo</span> <span class="pre">bash</span> <span class="pre">-c</span> <span class="pre">&quot;cat</span> <span class="pre">&gt;/etc/security/limits.d/90-solana-nofiles.conf</span> <span class="pre">&lt;&lt;EOF</span>
<span class="pre">#</span> <span class="pre">Increase</span> <span class="pre">process</span> <span class="pre">file</span> <span class="pre">descriptor</span> <span class="pre">count</span> <span class="pre">limit</span>
<span class="pre">*</span> <span class="pre">-</span> <span class="pre">nofile</span> <span class="pre">1000000</span>
<span class="pre">EOF&quot;</span>
<span class="pre">`</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">###</span> <span class="pre">Close</span> <span class="pre">all</span> <span class="pre">open</span> <span class="pre">sessions</span> <span class="pre">(log</span> <span class="pre">out</span> <span class="pre">then,</span> <span class="pre">in</span> <span class="pre">again)</span> <span class="pre">###</span>
<span class="pre">`</span></code></p>
<p>## Copy Key Pairs</p>
<p>On your personal computer, not on the validator, securely copy your <cite>validator-keypair.json</cite> file and your <cite>vote-account-keypair.json</cite> file to the validator server:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">scp</span> <span class="pre">validator-keypair.json</span> <span class="pre">sol&#64;&lt;server.hostname&gt;:</span>
<span class="pre">scp</span> <span class="pre">vote-account-keypair.json</span> <span class="pre">sol&#64;&lt;server.hostname&gt;:</span>
<span class="pre">`</span></code></p>
<p>&gt; <strong>Note</strong>: The <cite>vote-account-keypair.json</cite> does not have any function other than identifying the vote account to potential delegators.  Only the public key of the vote account is important once the account is created.</p>
<p>## Switch to the sol User</p>
<p>On the validator server, switch to the <cite>sol</cite> user:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">su</span> <span class="pre">-</span> <span class="pre">sol</span>
<span class="pre">`</span></code></p>
<p>## Install The Solana CLI on Remote Machine</p>
<p>Your remote machine will need the Solana cli installed to run the validator software.  Refer again to [Solana’s Install Tool](../../cli/install-solana-cli-tools#use-solanas-install-tool) or [build from source](../../cli/install-solana-cli-tools#build-from-source).  It is best for operators to build from source rather than using the pre built binaries.</p>
<p>## Create A Validator Startup Script</p>
<p>In your sol home directory (e.g. <cite>/home/sol/</cite>), create a folder called <cite>bin</cite>. Inside that folder create a file called <cite>validator.sh</cite> and make it executable:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">mkdir</span> <span class="pre">-p</span> <span class="pre">/home/sol/bin</span>
<span class="pre">touch</span> <span class="pre">/home/sol/bin/validator.sh</span>
<span class="pre">chmod</span> <span class="pre">+x</span> <span class="pre">/home/sol/bin/validator.sh</span>
<span class="pre">`</span></code></p>
<p>Next, open the <cite>validator.sh</cite> file for editing:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">nano</span> <span class="pre">/home/sol/bin/validator.sh</span>
<span class="pre">`</span></code></p>
<p>Copy and paste the following contents into <cite>validator.sh</cite> then save the file:</p>
<p><a href="#id15"><span class="problematic" id="id16">``</span></a>`
exec solana-validator </p>
<blockquote>
<div><p>–identity validator-keypair.json –vote-account vote-account-keypair.json –known-validator 5D1fNXzvv5NjV1ysLjirC4WY92RNsVH18vjmcszZd8on –known-validator 7XSY3MrYnK8vq693Rju17bbPkCN3Z7KvvfvJx4kdrsSY –known-validator Ft5fbkqNa76vnsjYNwjDZUXoTWpP7VYm3mtsaQckQADN –known-validator 9QxCLckBiJc783jnMvXZubK4wH86Eqqvashtrwvcsgkv –only-known-rpc –log /home/sol/solana-validator.log –ledger /mnt/ledger –rpc-port 8899 –dynamic-port-range 8000-8020 –entrypoint entrypoint.testnet.solana.com:8001 –entrypoint entrypoint2.testnet.solana.com:8001 –entrypoint entrypoint3.testnet.solana.com:8001 –expected-genesis-hash 4uhcVJyU9pJkvQyS88uRDiswHXSCkY3zQawwpjk2NsNY –wal-recovery-mode skip_any_corrupted_record –limit-ledger-size</p>
</div></blockquote>
<p><a href="#id17"><span class="problematic" id="id18">``</span></a><a href="#id19"><span class="problematic" id="id20">`</span></a></p>
<p>Refer to <cite>solana-validator –help</cite> for more information on what each flag is doing in this script. Also refer to the section on [best practices for operating a validator](../best-practices/operations.md).</p>
<p>## Verifying Your Validator Is Working</p>
<p>Test that your <cite>validator.sh</cite> file is running properly by executing the <cite>validator.sh</cite> script:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">/home/sol/bin/validator.sh</span>
<span class="pre">`</span></code></p>
<p>The script should execute the <cite>solana-validator</cite> process. In a new terminal window, shh into your server, then verify that the process is running:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">ps</span> <span class="pre">aux</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">solana-validator</span>
<span class="pre">`</span></code></p>
<p>You should see a line in the output that includes <cite>solana-validator</cite> with all the flags that were added to your <cite>validator.sh</cite> script.</p>
<p>Next, we need to look at the logs to make sure everything is operating properly.</p>
<p>### Tailing The Logs</p>
<p>As a spot check, you will want to make sure your validator is producing reasonable log output (<strong>warning</strong>, there will be a lot of log output).</p>
<p>In a new terminal window, ssh into your validator machine, switch users to the <cite>sol</cite> user and <cite>tail</cite> the logs:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">su</span> <span class="pre">-</span> <span class="pre">sol</span>
<span class="pre">tail</span> <span class="pre">-f</span> <span class="pre">solana-validator.log</span>
<span class="pre">`</span></code></p>
<p>The <cite>tail</cite> command will continue to display the output of a file as the file changes. You should see a continuous stream of log output as your validator runs. Keep an eye out for any lines that say <cite>_ERROR_</cite>.</p>
<p>Assuming you do not see any error messages, exit out of the command.</p>
<p>### Gossip Protocol</p>
<p>Gossip is a protocol used in the Solana clusters to communicate between validator nodes. For more information on gossip, see [Gossip Service](../gossip.md).  To verify that your validator is running properly, make sure that the validator has registered itself with the gossip network.</p>
<p>In a new terminal window, connect to your server via ssh. Identify your validator’s pubkey:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">solana-keygen</span> <span class="pre">pubkey</span> <span class="pre">~/validator-keypair.json</span>
<span class="pre">`</span></code></p>
<p>The command <cite>solana gossip</cite> lists all validators that have registered with the protocol. To check that the newly setup validator is in gossip, we will <cite>grep</cite> for our pubkey in the output:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">solana</span> <span class="pre">gossip</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">&lt;pubkey&gt;</span>
<span class="pre">`</span></code></p>
<p>After running the command, you should see a single line that looks like this:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">139.178.68.207</span>&#160; <span class="pre">|</span> <span class="pre">5D1fNXzvv5NjV1ysLjirC4WY92RNsVH18vjmcszZd8on</span> <span class="pre">|</span> <span class="pre">8001</span>&#160;&#160; <span class="pre">|</span> <span class="pre">8004</span>&#160; <span class="pre">|</span> <span class="pre">139.178.68.207:80</span>&#160;&#160;&#160;&#160; <span class="pre">|</span> <span class="pre">1.14.17</span> <span class="pre">|</span> <span class="pre">3488713414</span>
<span class="pre">`</span></code></p>
<p>If you do not see any output after grep-ing the output of gossip, your validator may be having startup problems. If that is the case, start debugging by looking through the validator log output.</p>
<p>### Solana Validators</p>
<p>After you have verified that your validator is in gossip, you can verify that your validator has joined the network using the <cite>solana validators</cite> command. The command lists all validators in the network, but like before, we can <cite>grep</cite> the output for the validator we care about:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">solana</span> <span class="pre">validators</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">&lt;pubkey&gt;</span>
<span class="pre">`</span></code></p>
<p>You should see a line of output that looks like this:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">5D1fNXzvv5NjV1ysLjirC4WY92RNsVH18vjmcszZd8on</span>&#160; <span class="pre">FX6NNbS5GHc2kuzgTZetup6GZX6ReaWyki8Z8jC7rbNG</span>&#160; <span class="pre">100%</span>&#160; <span class="pre">197434166</span> <span class="pre">(</span>&#160; <span class="pre">0)</span>&#160; <span class="pre">197434133</span> <span class="pre">(</span>&#160; <span class="pre">0)</span>&#160;&#160; <span class="pre">2.11%</span>&#160;&#160; <span class="pre">323614</span>&#160; <span class="pre">1.14.17</span>&#160;&#160; <span class="pre">2450110.588302720</span> <span class="pre">SOL</span> <span class="pre">(1.74%)</span>
<span class="pre">`</span></code></p>
<p>### Solana Catchup</p>
<p>The <cite>solana catchup</cite> command is a useful tool for seeing how quickly your validator is processing blocks. The Solana network has the capability to produce many transactions per second. Since your validator is new to the network, it has to ask another validator (listed as a <cite>–known-validator</cite> in your startup script) for a recent snapshot of the ledger. By the time you receive the snapshot, you may already be behind the network. Many transactions may have been processed and finalized in that time. In order for your validator to participate in consensus, it must _catchup_ to the rest of the network by asking for the more recent transactions that it does not have.</p>
<p>The <cite>solana catchup</cite> command is a tool that tells you how far behind the network your validator is and how quickly you are catching up:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">solana</span> <span class="pre">catchup</span> <span class="pre">&lt;pubkey&gt;</span>
<span class="pre">`</span></code></p>
<p>If you see a message about trying to connect, your validator may not be part of the network yet. Make sure to check the logs and double check <cite>solana gossip</cite> and <cite>solana validators</cite> to make sure your validator is running properly.</p>
<p>Once you are happy that the validator can start up without errors, the next step is to create a system service to run the <cite>validator.sh</cite> file automatically. Stop the currently running validator by pressing <cite>CTRL+C</cite> in the window where <cite>validator.sh</cite> is running.</p>
<p>## Create a System Service</p>
<p>Follow these instructions for [running the validator as a system service](../../running-validator/validator-start#systemd-unit)</p>
<p>Make sure to implement log rotate as well. Once you have the system service configured, start your validator using the newly configured service:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">enable</span> <span class="pre">--now</span> <span class="pre">sol</span>
<span class="pre">`</span></code></p>
<p>Now verify that the validator is running properly by tailing the logs and using the commands mentioned earlier to check gossip and Solana validators:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">tail</span> <span class="pre">-f</span> <span class="pre">/home/sol/solana-validator*.log</span>
<span class="pre">`</span></code></p>
<p>## Monitoring</p>
<p><cite>solana-watchtower</cite> is a command you can run on a separate machine to monitor your server. You can read more about handling [automatic restarts and monitoring](../best-practices/monitoring.md#solana-watchtower) using Solana Watchtower here in the docs.</p>
<p>## Common issues</p>
<p>### Out of disk space</p>
<p>Make sure your ledger is on drive with at least <cite>2TB</cite> of space.</p>
<p>### Validator not catching up</p>
<p>This could be a networking/hardware issue, or you may need to get the latest snapshot from another validator node.</p>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">twit</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, jare.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../../_sources/src/validator/get-started/setup-a-validator.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>