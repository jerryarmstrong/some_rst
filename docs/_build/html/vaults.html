<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>docs/vaults.md &#8212; twit  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b3523f8e" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=039e1c02" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=b3ba4146"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="docs-vaults-md">
<h1>docs/vaults.md<a class="headerlink" href="#docs-vaults-md" title="Permalink to this heading">¶</a></h1>
<p>Last edited: 2022-12-05 19:44:34</p>
<p>Contents:</p>
<div class="highlight-md notranslate"><div class="highlight"><pre><span></span><span class="gh"># Vaults</span>
</pre></div>
</div>
<p>Vaults are on-chain programs that implement various yield farming strategies. Under the hood, they interact with underlying Liquidity Pools and other Defi protocols to generate an extra yield for users that wouldn’t be possible with passive investments. Individual yield farming strategies are stored under the <cite>strategies</cite> sub-folder.</p>
<p><cite>RDM-STAKE-LP-COMPOUND</cite> strategy works as follows:</p>
<ul class="simple">
<li><p>User deposits tokens into a Vault with add_liquidity transaction. For example, Vault <cite>RDM.STC.RAY-SRM</cite> takes RAY and SRM tokens. To get a list of available Vaults, one can use the <cite>client.get_vaults()</cite> function or <cite>api/v1/vaults</cite> RPC call. Vault tokens are minted back to the user to represent their share in the Vault.</p></li>
<li><p>Vault sends user tokens to the corresponding Raydium Pool, receives LP tokens, and stakes them to the Raydium Farm.</p></li>
<li><p>Vaults should be cranked on a periodic basis. Crank operation is permissionless and can be done by anyone. And it is executed for the entire Vault, not per individual user. Crank consists of three steps:
1. Harvest Farm rewards (in one or both tokens);
2. Rebalance rewards to get proper amounts of each token;
3. Place rewards back into the Pool and stake received LP tokens. A small Vault fee is taken from rewards, and it can be used to incentivize Crank operations.</p></li>
<li><p>Upon liquidity removal, the user gets original tokens back in amounts proportional to Vault tokens they hold. Vault tokens are then burned.</p></li>
</ul>
<p><cite>SBR-STAKE-LP-COMPOUND</cite> and <cite>ORC-STAKE-LP-COMPOUND</cite> are similar strategies but use Saber and Orca protocols.</p>
<p>## Initialization</p>
<p>In order to run Vaults, first, build and deploy Farm programs and upload metadata as described in the [Quick Start Guide](<a class="reference external" href="https://github.com/solana-labs/farms/blob/master/docs/quick_start.md">https://github.com/solana-labs/farms/blob/master/docs/quick_start.md</a>).</p>
<p>To initialize and enable Vaults, run:</p>
<p><code class="docutils literal notranslate"><span class="pre">`sh</span>
<span class="pre">solana-farm-ctrl</span> <span class="pre">vault-init</span> <span class="pre">all</span>
<span class="pre">solana-farm-ctrl</span> <span class="pre">vault-enable-deposits</span> <span class="pre">all</span>
<span class="pre">solana-farm-ctrl</span> <span class="pre">vault-enable-withdrawals</span> <span class="pre">all</span>
<span class="pre">`</span></code></p>
<p>You can set Vault fees and minimum allowed crank interval with <cite>vault-set-fee</cite> and <cite>vault-set-min-crank-interval</cite>. Cranks need to be executed periodically using <cite>solana-farm-ctrl vault-crank all</cite> or <cite>solana-farm-client crank-vaults</cite>. Alternatively you can use [HTTP Client](<a class="reference external" href="https://github.com/solana-labs/farms/blob/master/docs/http_client.md">https://github.com/solana-labs/farms/blob/master/docs/http_client.md</a>) or [Rust Client](<a class="reference external" href="https://github.com/solana-labs/farms/blob/master/docs/rust_client.md">https://github.com/solana-labs/farms/blob/master/docs/rust_client.md</a>) or send raw instructions.</p>
<p>Whether the Vault is properly initialized can be verified with client tools, e.g., <cite>solana-farm-client vault-info [VAULT_NAME]</cite>.</p>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">twit</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, jare.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="_sources/vaults.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>