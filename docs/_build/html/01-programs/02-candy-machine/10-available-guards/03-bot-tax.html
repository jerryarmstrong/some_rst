<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>docs/01-programs/02-candy-machine/10-available-guards/03-bot-tax.md &#8212; twit  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b3523f8e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css?v=039e1c02" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js?v=b3ba4146"></script>
    <script src="../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="docs-01-programs-02-candy-machine-10-available-guards-03-bot-tax-md">
<h1>docs/01-programs/02-candy-machine/10-available-guards/03-bot-tax.md<a class="headerlink" href="#docs-01-programs-02-candy-machine-10-available-guards-03-bot-tax-md" title="Permalink to this heading">¶</a></h1>
<p>Last edited: 2023-08-08 19:56:25</p>
<p>Contents:</p>
<div class="highlight-md notranslate"><div class="highlight"><pre><span></span>---
</pre></div>
</div>
<p>description: “Configurable tax to charge invalid transactions.”
—</p>
<p>import { Accordion, AccordionItem } from ‘/src/accordion.jsx’;</p>
<p># Bot Tax</p>
<p>## Overview</p>
<p>The <strong>Bot Tax</strong> guard charges a penalty for invalid transactions to discourage bots from attempting to mint NFTs. This amount is usually small to hurt bots without affecting genuine mistakes from real users. All bot taxes will be transferred to the Candy Machine account so that, once minting is over, you can access these funds by deleting the Candy Machine account.</p>
<p>This guard is a bit special and affects the minting behaviour of all other guards. When the Bot Tax is activated and any other guard fails to validate the mint, <strong>the transaction will pretend to succeed</strong>. This means no errors will be returned by the program but no NFT will be minted either. This is because the transaction must succeed for the funds to be transferred from the bot to the Candy Machine account.</p>
<p>Additionally, the Bot Tax guard enables us to ensure the mint instruction was the last instruction of the transaction. This prevents bots from adding malicious instructions after the mint and returns an error to avoid paying the tax.</p>
<p>![CandyMachinesV3-GuardsBotTax.png](/assets/candy-machine-v3/CandyMachinesV3-GuardsBotTax.png#radius)</p>
<p>## Guard Settings</p>
<p>The Bot Tax guard contains the following settings:</p>
<ul class="simple">
<li><p><strong>Lamports</strong>: The amount in SOL (or lamports) to charge for an invalid transaction. We recommend setting a fairly small amount to avoid affecting real users who made a genuine mistake. Client-side validation can also help reduce affecting real users.</p></li>
<li><p><strong>Last Instruction</strong>: Whether or not we should forbid minting and charge a bot tax when the mint instruction is not the last instruction of the transaction. We recommend setting this to <cite>true</cite> to be better protected against bots.</p></li>
</ul>
<p>&lt;Accordion&gt;
&lt;AccordionItem title=”JavaScript — Umi library (recommended)” open={true}&gt;
&lt;div className=”accordion-item-padding”&gt;</p>
<p>Here’s how we can set up a Candy Machine using the Bot Tax guard.</p>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a>ts
create(umi, {</p>
<blockquote>
<div><p>// …
guards: {</p>
<blockquote>
<div><dl class="simple">
<dt>botTax: some({</dt><dd><p>lamports: sol(0.01),
lastInstruction: true,</p>
</dd>
</dl>
<p>}),</p>
</div></blockquote>
<p>},</p>
</div></blockquote>
<section id="id5">
<h2>});<a class="headerlink" href="#id5" title="Permalink to this heading">¶</a></h2>
<p>API References: [create](<a class="reference external" href="https://mpl-candy-machine-js-docs.vercel.app/functions/create.html">https://mpl-candy-machine-js-docs.vercel.app/functions/create.html</a>), [BotTax](<a class="reference external" href="https://mpl-candy-machine-js-docs.vercel.app/types/BotTax.html">https://mpl-candy-machine-js-docs.vercel.app/types/BotTax.html</a>)</p>
<p>&lt;/div&gt;
&lt;/AccordionItem&gt;
&lt;AccordionItem title=”JavaScript — SDK”&gt;
&lt;div className=”accordion-item-padding”&gt;</p>
<p>Here’s how we can set up a Candy Machine using the Bot Tax guard via the JS SDK.</p>
<p><a href="#id6"><span class="problematic" id="id7">``</span></a><a href="#id8"><span class="problematic" id="id9">`</span></a>tsx
import { sol } from “&#64;metaplex-foundation/js”;</p>
<dl>
<dt>const { candyMachine } = await metaplex.candyMachines().create({</dt><dd><p>// …
guards: {</p>
<blockquote>
<div><dl class="simple">
<dt>botTax: {</dt><dd><p>lamports: sol(0.01),
lastInstruction: true,</p>
</dd>
</dl>
<p>},</p>
</div></blockquote>
<p>},</p>
</dd>
</dl>
</section>
<section id="id10">
<h2>});<a class="headerlink" href="#id10" title="Permalink to this heading">¶</a></h2>
<p>API References: [Operation](<a class="reference external" href="https://metaplex-foundation.github.io/js/classes/js.CandyMachineClient.html#create">https://metaplex-foundation.github.io/js/classes/js.CandyMachineClient.html#create</a>), [Input](<a class="reference external" href="https://metaplex-foundation.github.io/js/types/js.CreateCandyMachineInput.html">https://metaplex-foundation.github.io/js/types/js.CreateCandyMachineInput.html</a>), [Output](<a class="reference external" href="https://metaplex-foundation.github.io/js/types/js.CreateCandyMachineOutput.html">https://metaplex-foundation.github.io/js/types/js.CreateCandyMachineOutput.html</a>), [Transaction Builder](<a class="reference external" href="https://metaplex-foundation.github.io/js/classes/js.CandyMachineBuildersClient.html#create">https://metaplex-foundation.github.io/js/classes/js.CandyMachineBuildersClient.html#create</a>), [Guard Settings](<a class="reference external" href="https://metaplex-foundation.github.io/js/types/js.BotTaxGuardSettings.html">https://metaplex-foundation.github.io/js/types/js.BotTaxGuardSettings.html</a>).</p>
<p>&lt;/div&gt;
&lt;/AccordionItem&gt;
&lt;/Accordion&gt;</p>
<p>## Mint Settings</p>
<p>_The Bot Tax guard does not need Mint Settings._</p>
<p>## Route Instruction</p>
<p>_The Bot Tax guard does not support the route instruction._</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">twit</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, jare.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../../_sources/01-programs/02-candy-machine/10-available-guards/03-bot-tax.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>