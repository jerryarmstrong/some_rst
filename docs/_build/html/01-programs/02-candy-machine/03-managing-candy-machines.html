<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>docs/01-programs/02-candy-machine/03-managing-candy-machines.md &#8212; twit  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b3523f8e" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=039e1c02" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=b3ba4146"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="docs-01-programs-02-candy-machine-03-managing-candy-machines-md">
<h1>docs/01-programs/02-candy-machine/03-managing-candy-machines.md<a class="headerlink" href="#docs-01-programs-02-candy-machine-03-managing-candy-machines-md" title="Permalink to this heading">¶</a></h1>
<p>Last edited: 2023-08-08 19:56:25</p>
<p>Contents:</p>
<div class="highlight-md notranslate"><div class="highlight"><pre><span></span>---
</pre></div>
</div>
<p>description: “Explains how to manage Candy Machines.”
—</p>
<p>import { Accordion, AccordionItem } from ‘/src/accordion.jsx’;</p>
<p># Managing Candy Machines</p>
<p>## Introduction</p>
<p>On [the previous page](/programs/candy-machine/candy-machine-settings), we went through the various settings of a Candy Machine. So now, let’s see how we can use these settings to create and update Candy Machines. We’ll also talk about how to fetch an existing Candy Machine and how to delete it when it has served its purpose.</p>
<p>Essentially, we’ll be going through the Create, Read, Update and Delete steps of a Candy Machine. Let’s go!</p>
<p>## Create Candy Machines</p>
<p>You may use the settings discussed on the previous page to create a brand-new Candy Machine account.</p>
<p>Our SDKs push this even further and will associate every new Candy Machine account with a new Candy Guard account which keeps track of all activated guards affecting the minting process. On this page, we will focus on the Candy Machine account but we’ll dig into Candy Guard accounts and what we can do with them on [dedicated pages](/programs/candy-machine/candy-guards).</p>
<p>Remember that a Candy Machine [must be associated with a Collection NFT](/programs/candy-machine/candy-machine-settings#metaplex-certified-collections) and its update authority must authorize this operation. If you haven’t got a Collection NFT for your Candy Machine yet, our SDKs can help with that too.</p>
<p>&lt;Accordion&gt;
&lt;AccordionItem title=”JavaScript — Umi library (recommended)” open={true}&gt;
&lt;div className=”accordion-item-padding”&gt;</p>
<p>Here’s how you can create a Candy Machine using a brand new Collection NFT via the Umi library.</p>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a>ts
import {</p>
<blockquote>
<div><p>createNft,
TokenStandard,</p>
</div></blockquote>
<p>} from “&#64;metaplex-foundation/mpl-token-metadata”;
import { create } from “&#64;metaplex-foundation/mpl-candy-machine”;
import { generateSigner, percentAmount } from “&#64;metaplex-foundation/umi”;</p>
<p>// Create the Collection NFT.
const collectionUpdateAuthority = generateSigner(umi);
const collectionMint = generateSigner(umi);
await createNft(umi, {</p>
<blockquote>
<div><p>mint: collectionMint,
authority: collectionUpdateAuthority,
name: “My Collection NFT”,
uri: “<a class="reference external" href="https://example.com/path/to/some/json/metadata.json">https://example.com/path/to/some/json/metadata.json</a>”,
sellerFeeBasisPoints: percentAmount(9.99, 2), // 9.99%
isCollection: true,</p>
</div></blockquote>
<p>}).sendAndConfirm(umi);</p>
<p>// Create the Candy Machine.
const candyMachine = generateSigner(umi);
await create(umi, {</p>
<blockquote>
<div><p>candyMachine,
collectionMint: collectionMint.publicKey,
collectionUpdateAuthority,
tokenStandard: TokenStandard.NonFungible,
sellerFeeBasisPoints: percentAmount(9.99, 2), // 9.99%
itemsAvailable: 5000,
creators: [</p>
<blockquote>
<div><dl class="simple">
<dt>{</dt><dd><p>address: umi.identity.publicKey,
verified: true,
percentageShare: 100,</p>
</dd>
</dl>
<p>},</p>
</div></blockquote>
<p>],
configLineSettings: some({</p>
<blockquote>
<div><p>prefixName: “”,
nameLength: 32,
prefixUri: “”,
uriLength: 200,
isSequential: false,</p>
</div></blockquote>
<p>}),</p>
</div></blockquote>
<p>}).sendAndConfirm(umi);
<a href="#id5"><span class="problematic" id="id6">``</span></a><a href="#id7"><span class="problematic" id="id8">`</span></a></p>
<p>As mentioned above, this operation will also take care of creating and associating a new Candy Guard account with the created Candy Machine. That’s because a Candy Machine without a Candy Guard is not very useful and you’ll want to do that most of the time. Still, if you’d like to disable that behaviour, you may use the <cite>createCandyMachineV2</cite> method instead.</p>
<p><a href="#id9"><span class="problematic" id="id10">``</span></a><a href="#id11"><span class="problematic" id="id12">`</span></a>tsx
import { createCandyMachineV2 } from “&#64;metaplex-foundation/mpl-candy-machine”;</p>
<dl class="simple">
<dt>await createCandyMachineV2(umi, {</dt><dd><p>// …</p>
</dd>
</dl>
<p>}).sendAndConfirm(umi);
<a href="#id13"><span class="problematic" id="id14">``</span></a><a href="#id15"><span class="problematic" id="id16">`</span></a></p>
<p>In these examples, we only focused on the required parameters but you may want to check out the following API References to see what you can do with this <cite>create</cite> function.</p>
<p>API References: [create](<a class="reference external" href="https://mpl-candy-machine-js-docs.vercel.app/functions/create.html">https://mpl-candy-machine-js-docs.vercel.app/functions/create.html</a>), [createCandyMachineV2](<a class="reference external" href="https://mpl-candy-machine-js-docs.vercel.app/functions/createCandyMachineV2.html">https://mpl-candy-machine-js-docs.vercel.app/functions/createCandyMachineV2.html</a>).</p>
<p>&lt;/div&gt;
&lt;/AccordionItem&gt;
&lt;AccordionItem title=”JavaScript — SDK”&gt;
&lt;div className=”accordion-item-padding”&gt;</p>
<p>:::info
The JS SDK is only compatible with Candy Machine V3 accounts whose account version is 1. That means, it does not support minting programmable NFTs and it is not compatible with Candy Machines created with the latest version of [Sugar](/developer-tools/sugar/overview/introduction).</p>
<p>You may consider [using the Umi library](/programs/candy-machine/getting-started#umi-library-recommended) instead which supports all account versions of Candy Machine V3. Alternatively, you may downgrade you Sugar version to <cite>2.0.0</cite> or use the Solita-generated library.</p>
<p>See [Programmable NFTs](/programs/candy-machine/programmable-nfts) for more details.
::</p>
<p>Here’s how you can create a Candy Machine using a brand new Collection NFT using the JS SDK. Notice that, by default, the current identity is used as the authority of these entities.</p>
<p><a href="#id17"><span class="problematic" id="id18">``</span></a><a href="#id19"><span class="problematic" id="id20">`</span></a>ts
import { toBigNumber } from “&#64;metaplex-foundation/js”;
import { Keypair } from “&#64;solana/web3.js”;</p>
<p>// Create the Collection NFT.
const { nft: collectionNft } = await metaplex.nfts().create({</p>
<blockquote>
<div><p>name: “My Collection NFT”,
uri: “<a class="reference external" href="https://example.com/path/to/some/json/metadata.json">https://example.com/path/to/some/json/metadata.json</a>”,
sellerFeeBasisPoints: 0,
isCollection: true,</p>
</div></blockquote>
<p>});</p>
<p>// Create the Candy Machine.
const { candyMachine } = await metaplex.candyMachines().create({</p>
<blockquote>
<div><p>itemsAvailable: toBigNumber(5000),
sellerFeeBasisPoints: 333, // 3.33%
collection: {</p>
<blockquote>
<div><p>address: collectionNft.address,
updateAuthority: metaplex.identity(),</p>
</div></blockquote>
<p>},</p>
</div></blockquote>
<section id="id21">
<h2>});<a class="headerlink" href="#id21" title="Permalink to this heading">¶</a></h2>
<p>As mentioned above, this operation will also take care of creating and associating a new Candy Guard account with the created Candy Machine. That’s because a Candy Machine without a Candy Guard is not very useful and you’ll want to do that most of the time. Still, if you’d like to disable that behaviour, you may use the <cite>withoutCandyGuard</cite> option.</p>
<p><a href="#id22"><span class="problematic" id="id23">``</span></a><a href="#id24"><span class="problematic" id="id25">`</span></a>tsx
const { candyMachine } = await metaplex.candyMachines().create({</p>
<blockquote>
<div><p>withoutCandyGuard: true,
// …</p>
</div></blockquote>
</section>
<section id="id26">
<h2>});<a class="headerlink" href="#id26" title="Permalink to this heading">¶</a></h2>
<p>In these examples, we only focused on the required parameters but you may want to check out the following API References to see what you can do with this <cite>create</cite> operation.</p>
<p>API References: [Operation](<a class="reference external" href="https://metaplex-foundation.github.io/js/classes/js.CandyMachineClient.html#create">https://metaplex-foundation.github.io/js/classes/js.CandyMachineClient.html#create</a>), [Input](<a class="reference external" href="https://metaplex-foundation.github.io/js/types/js.CreateCandyMachineInput.html">https://metaplex-foundation.github.io/js/types/js.CreateCandyMachineInput.html</a>), [Output](<a class="reference external" href="https://metaplex-foundation.github.io/js/types/js.CreateCandyMachineOutput.html">https://metaplex-foundation.github.io/js/types/js.CreateCandyMachineOutput.html</a>), [Transaction Builder](<a class="reference external" href="https://metaplex-foundation.github.io/js/classes/js.CandyMachineBuildersClient.html#create">https://metaplex-foundation.github.io/js/classes/js.CandyMachineBuildersClient.html#create</a>).</p>
<p>&lt;/div&gt;
&lt;/AccordionItem&gt;
&lt;/Accordion&gt;</p>
<p>## Candy Machine Account</p>
<p>Now that we’ve created the Candy Machine account, let’s see what data is stored inside it.</p>
<p>First of all, it stores all the settings provided when the account was created and keeps track of any changes. See the [previous page](/programs/candy-machine/candy-machine-settings) for more details on these settings.</p>
<p>Additionally, it stores the following attributes:</p>
<ul class="simple">
<li><p><strong>Items Redeemed</strong>. This keeps track of the number of NFTs that were minted from the Candy Machine. Note that, as soon as this number goes from 0 to 1, most settings will no longer be updatable.</p></li>
<li><p><strong>Account Version</strong>. This enum is used to keep track of the account version of the Candy Machine. It is used to determine which features are available and how the account should be interpreted. Note that this is not to be confused with “Candy Machine V3” which refers to the third and latest iteration of the Candy Machine programs (including the Candy Machine Core and Candy Guard programs).</p></li>
<li><p><strong>Feature Flags</strong>. This helps the program with backward and forward compatibility as more features get introduced.</p></li>
</ul>
<p>Finally, it stores all items inserted in the Candy Machine and whether or not they have been minted. This only applies for Candy Machine using [<strong>Config Line Settings</strong>](/programs/candy-machine/candy-machine-settings#config-line-settings) since [<strong>Hidden Settings</strong>](/programs/candy-machine/candy-machine-settings#hidden-settings) don’t allow you to insert any items. This section contains the following information:</p>
<ul class="simple">
<li><p>The number of items that have been loaded.</p></li>
<li><p>A list of all items that have been or will be inserted. When an item is not inserted yet, the name and URI of the item at that position are empty.</p></li>
<li><p>A bitmap — a list of yes or no — that keeps track of which items have been loaded. When this bitmap is full of yeses, all items have been loaded.</p></li>
<li><p>A list of all items that have _not_ been minted yet when minting using a random order. This allows the program to grab an index at random without having to worry about picking an index that has already been minted and start again.</p></li>
</ul>
<p>Note that this last section is purposely not deserialised on the program but our SDKs parse all that data for you in a human-friendly format.</p>
<p>For more detailed information about the Candy Machine account, check out the [program’s API References](<a class="reference external" href="https://github.com/metaplex-foundation/mpl-candy-machine/tree/main/programs/candy-machine-core#account">https://github.com/metaplex-foundation/mpl-candy-machine/tree/main/programs/candy-machine-core#account</a>).</p>
<p>&lt;Accordion&gt;
&lt;AccordionItem title=”JavaScript — Umi library (recommended)” open={true}&gt;
&lt;div className=”accordion-item-padding”&gt;</p>
<p>The best way to check how Candy Machines are modelled in the Umi library is by checking [the API References of the <cite>CandyMachine</cite> account](<a class="reference external" href="https://mpl-candy-machine-js-docs.vercel.app/types/CandyMachine.html">https://mpl-candy-machine-js-docs.vercel.app/types/CandyMachine.html</a>). You may also want to check out the [API References of the <cite>candyGuard</cite> account](<a class="reference external" href="https://mpl-candy-machine-js-docs.vercel.app/types/CandyGuard.html">https://mpl-candy-machine-js-docs.vercel.app/types/CandyGuard.html</a>) since one is automatically created for each candy machine when using the <cite>create</cite> function.</p>
<p>Here’s a small code example showcasing some of the Candy Machine attributes.</p>
<p><a href="#id27"><span class="problematic" id="id28">``</span></a><a href="#id29"><span class="problematic" id="id30">`</span></a>tsx
import {</p>
<blockquote>
<div><p>fetchCandyMachine,
fetchCandyGuard,</p>
</div></blockquote>
<p>} from “&#64;metaplex-foundation/mpl-candy-machine”;</p>
<p>const candyMachine = await fetchCandyMachine(umi, candyMachineAddress);
const candyGuard = await fetchCandyGuard(umi, candyMachine.mintAuthority);</p>
<p>candyMachine.publicKey; // The public key of the Candy Machine account.
candyMachine.mintAuthority; // The mint authority of the Candy Machine which, in most cases, is the Candy Guard address.
candyMachine.data.itemsAvailable; // Total number of NFTs available.
candyMachine.itemsRedeemed; // Number of NFTs minted.
candyMachine.items[0].index; // The index of the first loaded item.
candyMachine.items[0].name; // The name of the first loaded item (with prefix).
candyMachine.items[0].uri; // The URI of the first loaded item (with prefix).
candyMachine.items[0].minted; // Whether the first item has been minted.
<a href="#id31"><span class="problematic" id="id32">``</span></a><a href="#id33"><span class="problematic" id="id34">`</span></a></p>
<p>&lt;/div&gt;
&lt;/AccordionItem&gt;
&lt;AccordionItem title=”JavaScript — SDK”&gt;
&lt;div className=”accordion-item-padding”&gt;</p>
<p>The best way to check how Candy Machines are modelled in the JS SDK is by checking [the API References of the <cite>CandyMachine</cite> model](<a class="reference external" href="https://metaplex-foundation.github.io/js/types/js.CandyMachine.html">https://metaplex-foundation.github.io/js/types/js.CandyMachine.html</a>). Notice how the <cite>CandyMachine</cite> model encapsulates both the Candy Machine account and the (optional) Candy Guard account so you have everything you need under the same object.</p>
<p>Here’s a small code example showcasing some of the Candy Machine attributes.</p>
<p><a href="#id35"><span class="problematic" id="id36">``</span></a><a href="#id37"><span class="problematic" id="id38">`</span></a>tsx
const { candyMachine } = await metaplex.candyMachines().create({…});</p>
<p>candyMachine.address;         // The public key of the Candy Machine account.
candyMachine.itemsAvailable;  // Number of NFTs available.
candyMachine.itemsMinted;     // Number of NFTs minted.
candyMachine.itemsRemaining;  // Number of NFTs left to mint.
candyMachine.items[0].index;  // The index of the first loaded item.
candyMachine.items[0].name;   // The name of the first loaded item (with prefix).
candyMachine.items[0].uri;    // The URI of the first loaded item (with prefix).
candyMachine.items[0].minted; // Whether the first item has been minted.
<a href="#id39"><span class="problematic" id="id40">``</span></a><a href="#id41"><span class="problematic" id="id42">`</span></a></p>
<p>&lt;/div&gt;
&lt;/AccordionItem&gt;
&lt;/Accordion&gt;</p>
<p>## Fetch Candy Machines</p>
<p>To fetch an existing Candy Machine, you simply need to provide its address and our SDKs will take care of parsing the account data for you.</p>
<p>&lt;Accordion&gt;
&lt;AccordionItem title=”JavaScript — Umi library (recommended)” open={true}&gt;
&lt;div className=”accordion-item-padding”&gt;</p>
<p>Here’s how you can fetch a Candy Machine using its address and its associated Candy Guard account if any.</p>
<p><a href="#id43"><span class="problematic" id="id44">``</span></a><a href="#id45"><span class="problematic" id="id46">`</span></a>ts
import { publicKey } from “&#64;metaplex-foundation/umi”;
import {</p>
<blockquote>
<div><p>fetchCandyMachine,
fetchCandyGuard,</p>
</div></blockquote>
<p>} from “&#64;metaplex-foundation/mpl-candy-machine”;</p>
<p>const candyMachine = await fetchCandyMachine(umi, publicKey(”…”));
const candyGuard = await fetchCandyGuard(umi, candyMachine.mintAuthority);
<a href="#id47"><span class="problematic" id="id48">``</span></a><a href="#id49"><span class="problematic" id="id50">`</span></a></p>
<p>API References: [fetchCandyMachine](<a class="reference external" href="https://mpl-candy-machine-js-docs.vercel.app/functions/fetchCandyMachine.html">https://mpl-candy-machine-js-docs.vercel.app/functions/fetchCandyMachine.html</a>), [fetchCandyGuard](<a class="reference external" href="https://mpl-candy-machine-js-docs.vercel.app/functions/fetchCandyGuard.html">https://mpl-candy-machine-js-docs.vercel.app/functions/fetchCandyGuard.html</a>).</p>
<p>&lt;/div&gt;
&lt;/AccordionItem&gt;
&lt;AccordionItem title=”JavaScript — SDK”&gt;
&lt;div className=”accordion-item-padding”&gt;</p>
<p>Here’s how you can fetch a Candy Machine using its address on the JS SDK.</p>
<p><a href="#id51"><span class="problematic" id="id52">``</span></a><a href="#id53"><span class="problematic" id="id54">`</span></a>tsx
import { PublicKey } from “&#64;solana/web3.js”;</p>
<dl class="simple">
<dt>const candyMachine = await metaplex</dt><dd><p>.candyMachines()
.findByAddress({ address: new PublicKey(“Gjwc…thJS”) });</p>
</dd>
</dl>
<p><a href="#id55"><span class="problematic" id="id56">``</span></a><a href="#id57"><span class="problematic" id="id58">`</span></a></p>
<p>API References: [Operation](<a class="reference external" href="https://metaplex-foundation.github.io/js/classes/js.CandyMachineClient.html#findByAddress">https://metaplex-foundation.github.io/js/classes/js.CandyMachineClient.html#findByAddress</a>), [Input](<a class="reference external" href="https://metaplex-foundation.github.io/js/types/js.FindCandyMachineByAddressInput.html">https://metaplex-foundation.github.io/js/types/js.FindCandyMachineByAddressInput.html</a>), [Output](<a class="reference external" href="https://metaplex-foundation.github.io/js/types/js.CandyMachine.html">https://metaplex-foundation.github.io/js/types/js.CandyMachine.html</a>).</p>
<p>&lt;/div&gt;
&lt;/AccordionItem&gt;
&lt;/Accordion&gt;</p>
<p>## Update Authorities</p>
<p>Once a Candy Machine is created, you can update most of its settings later on, as long as you are the authority of the Candy Machine. In the next few sections we’ll see how to update these settings but first, let’s see how you can update the <strong>Authority</strong> and <strong>Mint Authority</strong> of a Candy Machine.</p>
<ul class="simple">
<li><p>To update the authority, you need to pass the current authority as a signer and the address of the new authority.</p></li>
<li><p>To update the mint authority, you need to pass both the current authority and the new mint authority as signers. This is because the mint authority is mostly used to associate a Candy Guard with a Candy Machine. Making the mint authority a signer prevents anyone to use someone else Candy Guard as this could create side effects on the original Candy Machine.</p></li>
</ul>
<p>&lt;Accordion&gt;
&lt;AccordionItem title=”JavaScript — Umi library (recommended)” open={true}&gt;
&lt;div className=”accordion-item-padding”&gt;</p>
<p>Here’s how you can update the authority of a Candy Machine using the Umi library. Note that, in most cases, you’ll want to update the authority of the associated Candy Guard account as well.</p>
<p><a href="#id59"><span class="problematic" id="id60">``</span></a><a href="#id61"><span class="problematic" id="id62">`</span></a>ts
import { generateSigner } from “&#64;metaplex-foundation/umi”;
import {</p>
<blockquote>
<div><p>setCandyMachineAuthority,
setCandyGuardAuthority,</p>
</div></blockquote>
<p>} from “&#64;metaplex-foundation/mpl-candy-machine”;</p>
<p>const newAuthority = generateSigner(umi);
await setCandyMachineAuthority(umi, {</p>
<blockquote>
<div><p>candyMachine: candyMachine.publicKey,
authority: currentAuthority,
newAuthority: newAuthority.publicKey,</p>
</div></blockquote>
<dl>
<dt>})</dt><dd><dl>
<dt>.add(</dt><dd><dl class="simple">
<dt>setCandyGuardAuthority(umi, {</dt><dd><p>candyGuard: candyMachine.mintAuthority,
authority: currentAuthority,
newAuthority: newAuthority.publicKey,</p>
</dd>
</dl>
<p>})</p>
</dd>
</dl>
<p>)
.sendAndConfirm(umi);</p>
</dd>
</dl>
<p><a href="#id63"><span class="problematic" id="id64">``</span></a><a href="#id65"><span class="problematic" id="id66">`</span></a></p>
<p>Whilst you’d probably never want to update the <cite>mintAuthority</cite> directly since it would override the associated Candy Guard account, this is how you’d do it.</p>
<p><a href="#id67"><span class="problematic" id="id68">``</span></a><a href="#id69"><span class="problematic" id="id70">`</span></a>ts
import { generateSigner } from “&#64;metaplex-foundation/umi”;
import { setMintAuthority } from “&#64;metaplex-foundation/mpl-candy-machine”;</p>
<p>const newMintAuthority = generateSigner(umi);
await setMintAuthority(umi, {</p>
<blockquote>
<div><p>candyMachine: candyMachine.publicKey,
authority: currentAuthority,
mintAuthority: newMintAuthority,</p>
</div></blockquote>
<p>}).sendAndConfirm(umi);
<a href="#id71"><span class="problematic" id="id72">``</span></a><a href="#id73"><span class="problematic" id="id74">`</span></a></p>
<p>API References: [setCandyMachineAuthority](<a class="reference external" href="https://mpl-candy-machine-js-docs.vercel.app/functions/setCandyMachineAuthority.html">https://mpl-candy-machine-js-docs.vercel.app/functions/setCandyMachineAuthority.html</a>), [setCandyGuardAuthority](<a class="reference external" href="https://mpl-candy-machine-js-docs.vercel.app/functions/setCandyGuardAuthority.html">https://mpl-candy-machine-js-docs.vercel.app/functions/setCandyGuardAuthority.html</a>), [setMintAuthority](<a class="reference external" href="https://mpl-candy-machine-js-docs.vercel.app/functions/setMintAuthority.html">https://mpl-candy-machine-js-docs.vercel.app/functions/setMintAuthority.html</a>).</p>
<p>&lt;/div&gt;
&lt;/AccordionItem&gt;
&lt;AccordionItem title=”JavaScript — SDK”&gt;
&lt;div className=”accordion-item-padding”&gt;</p>
<p>Here’s how you can update the authority of a Candy Machine using the JS SDK.</p>
<p><a href="#id75"><span class="problematic" id="id76">``</span></a><a href="#id77"><span class="problematic" id="id78">`</span></a>tsx
import { Keypair } from <a class="reference external" href="mailto:'&#37;&#52;&#48;solana/web3&#46;js">‘<span>&#64;</span>solana/web3<span>&#46;</span>js</a>’;</p>
<p>const currentAuthority = Keypair.generate();
const newAuthority = Keypair.generate();
const candyMachine = await metaplex</p>
<blockquote>
<div><p>.candyMachines()
.findByAddress({…});</p>
</div></blockquote>
<dl class="simple">
<dt>await metaplex.candyMachines().update({</dt><dd><p>candyMachine,
authority: currentAuthority,
newAuthority: newAuthority.address,</p>
</dd>
</dl>
<p>});</p>
<dl class="simple">
<dt>const updatedCandyMachine = await metaplex</dt><dd><p>.candyMachines()
.refresh(candyMachine);</p>
</dd>
</dl>
<p><a href="#id79"><span class="problematic" id="id80">``</span></a><a href="#id81"><span class="problematic" id="id82">`</span></a></p>
<p>Note that, contrary to the <cite>create</cite> operation, the <cite>update</cite> operation does not return the updated Candy Machine model as you might not need it. If you do, you may use the <cite>refresh</cite> operation as demonstrated in the example above.</p>
<p>Whilst you’d probably never want to update the <cite>mintAuthority</cite> directly since it would override the associated Candy Guard account, this is how you’d do it.</p>
<p><a href="#id83"><span class="problematic" id="id84">``</span></a><a href="#id85"><span class="problematic" id="id86">`</span></a>tsx
import { Keypair } from “&#64;solana/web3.js”;</p>
<p>const currentAuthority = Keypair.generate();
const newMintAuthority = Keypair.generate();</p>
<dl class="simple">
<dt>await metaplex.candyMachines().update({</dt><dd><p>candyMachine,
authority: currentAuthority,
newMintAuthority: newMintAuthority, // Notice this must be a Signer.</p>
</dd>
</dl>
</section>
<section id="id87">
<h2>});<a class="headerlink" href="#id87" title="Permalink to this heading">¶</a></h2>
<p>Finally, note that the <cite>update</cite> method can be used to update for a variety of settings and you may also update them all at once. Check out the following API References to see everything available to you.</p>
<p>API References: [Operation](<a class="reference external" href="https://metaplex-foundation.github.io/js/classes/js.CandyMachineClient.html#update">https://metaplex-foundation.github.io/js/classes/js.CandyMachineClient.html#update</a>), [Input](<a class="reference external" href="https://metaplex-foundation.github.io/js/types/js.UpdateCandyMachineInput.html">https://metaplex-foundation.github.io/js/types/js.UpdateCandyMachineInput.html</a>), [Output](<a class="reference external" href="https://metaplex-foundation.github.io/js/types/js.UpdateCandyMachineOutput.html">https://metaplex-foundation.github.io/js/types/js.UpdateCandyMachineOutput.html</a>), [Transaction Builder](<a class="reference external" href="https://metaplex-foundation.github.io/js/classes/js.CandyMachineBuildersClient.html#update">https://metaplex-foundation.github.io/js/classes/js.CandyMachineBuildersClient.html#update</a>).</p>
<p>&lt;/div&gt;
&lt;/AccordionItem&gt;
&lt;/Accordion&gt;</p>
<p>## Update Shared NFT Data</p>
<p>You may also update the attributes shared between all minted NFTs of a Candy Machine. As mentioned in [the previous page](/programs/candy-machine/candy-machine-settings#settings-shared-by-all-nfts), these are: Seller Fee Basis Points, Symbol, Max Edition Supply, Is Mutable and Creators.</p>
<p>Note that once the first NFT has been minted, these attributes can no longer be updated.</p>
<p>&lt;Accordion&gt;
&lt;AccordionItem title=”JavaScript — Umi library (recommended)” open={true}&gt;
&lt;div className=”accordion-item-padding”&gt;</p>
<p>Here’s an example of updating some of the shared NFT data on a Candy Machine.</p>
<p><a href="#id88"><span class="problematic" id="id89">``</span></a><a href="#id90"><span class="problematic" id="id91">`</span></a>tsx
import { percentAmount } from “&#64;metaplex-foundation/umi”;
import {</p>
<blockquote>
<div><p>updateCandyMachine,
fetchCandyMachine,</p>
</div></blockquote>
<p>} from “&#64;metaplex-foundation/mpl-candy-machine”;</p>
<p>const candyMachine = await fetchCandyMachine(umi, candyMachineAddress);
await updateCandyMachine(umi, {</p>
<blockquote>
<div><p>candyMachine: candyMachine.publicKey,
data: {</p>
<blockquote>
<div><p>…candyMachine.data,
symbol: “NEW”,
sellerFeeBasisPoints: percentAmount(5.5, 2),
creators: [{ address: newCreator, verified: false, percentageShare: 100 }],</p>
</div></blockquote>
<p>},</p>
</div></blockquote>
<p>}).sendAndConfirm(umi);
<a href="#id92"><span class="problematic" id="id93">``</span></a><a href="#id94"><span class="problematic" id="id95">`</span></a></p>
<p>API References: [updateCandyMachine](<a class="reference external" href="https://mpl-candy-machine-js-docs.vercel.app/functions/updateCandyMachine.html">https://mpl-candy-machine-js-docs.vercel.app/functions/updateCandyMachine.html</a>).</p>
<p>&lt;/div&gt;
&lt;/AccordionItem&gt;
&lt;AccordionItem title=”JavaScript — SDK”&gt;
&lt;div className=”accordion-item-padding”&gt;</p>
<p>Here’s an example of updating some of the shared NFT data on a Candy Machine. Any attributes that are not explicitly provided will stay the same.</p>
<p><a href="#id96"><span class="problematic" id="id97">``</span></a><a href="#id98"><span class="problematic" id="id99">`</span></a>tsx
await metaplex.candyMachines().update({</p>
<blockquote>
<div><p>candyMachine,
symbol: “NEW”,
sellerFeeBasisPoints: 100,
creators: [{ address: newCreator, share: 100 }],</p>
</div></blockquote>
</section>
<section id="id100">
<h2>});<a class="headerlink" href="#id100" title="Permalink to this heading">¶</a></h2>
<p>API References: [Operation](<a class="reference external" href="https://metaplex-foundation.github.io/js/classes/js.CandyMachineClient.html#update">https://metaplex-foundation.github.io/js/classes/js.CandyMachineClient.html#update</a>), [Input](<a class="reference external" href="https://metaplex-foundation.github.io/js/types/js.UpdateCandyMachineInput.html">https://metaplex-foundation.github.io/js/types/js.UpdateCandyMachineInput.html</a>), [Output](<a class="reference external" href="https://metaplex-foundation.github.io/js/types/js.UpdateCandyMachineOutput.html">https://metaplex-foundation.github.io/js/types/js.UpdateCandyMachineOutput.html</a>), [Transaction Builder](<a class="reference external" href="https://metaplex-foundation.github.io/js/classes/js.CandyMachineBuildersClient.html#update">https://metaplex-foundation.github.io/js/classes/js.CandyMachineBuildersClient.html#update</a>).</p>
<p>&lt;/div&gt;
&lt;/AccordionItem&gt;
&lt;/Accordion&gt;</p>
<p>## Update Token Standard</p>
<p>The Token Standard and Rule Set attributes can also be updated on a Candy Machine using the “Set Token Standard” instruction. This allows us to switch from regular NFTs to programmable NFTs and vice versa. When switching to programmable NFTs, we can optionally specify or update the Rule Set that minted NFTs should adhere to.</p>
<p>Note that, if you candy machine is using an old account version, this instruction will also automatically upgrade it to the latest account version that supports programmable NFTs as well as regular NFTs. Once upgraded, you will need to use the latest instructions for minting from the candy machine or candy guard.</p>
<p>&lt;Accordion&gt;
&lt;AccordionItem title=”JavaScript — Umi library (recommended)” open={true}&gt;
&lt;div className=”accordion-item-padding”&gt;</p>
<p>Here’s an example of updating the token standard and rule set on a Candy Machine using Umi.</p>
<p><a href="#id101"><span class="problematic" id="id102">``</span></a><a href="#id103"><span class="problematic" id="id104">`</span></a>ts
import { TokenStandard } from “&#64;metaplex-foundation/mpl-token-metadata”;
import { setTokenStandard } from “&#64;metaplex-foundation/mpl-candy-machine”;</p>
<dl class="simple">
<dt>await setTokenStandard(umi, {</dt><dd><p>candyMachine: candyMachine.publicKey,
collectionMint: candyMachine.collectionMint,
collectionUpdateAuthority,
tokenStandard: TokenStandard.ProgrammableNonFungible,
ruleSet: newRuleSetAccount,</p>
</dd>
</dl>
<p>}).sendAndConfirm(umi);
<a href="#id105"><span class="problematic" id="id106">``</span></a><a href="#id107"><span class="problematic" id="id108">`</span></a></p>
<p>Note that if your candy machine is using account version <cite>V1</cite>, you will need to explicitly set the <cite>collectionAuthorityRecord</cite> account as it uses the legacy collection delegate authority record account.</p>
<p><a href="#id109"><span class="problematic" id="id110">``</span></a><a href="#id111"><span class="problematic" id="id112">`</span></a>ts
import { findCollectionAuthorityRecordPda } from “&#64;metaplex-foundation/mpl-token-metadata”;
import { findCandyMachineAuthorityPda } from “&#64;metaplex-foundation/mpl-candy-machine”;</p>
<dl>
<dt>await setTokenStandard(umi, {</dt><dd><p>// …
collectionAuthorityRecord: findCollectionAuthorityRecordPda(umi, {</p>
<blockquote>
<div><p>mint: candyMachine.collectionMint,
collectionAuthority: findCandyMachineAuthorityPda(umi, {</p>
<blockquote>
<div><p>candyMachine: candyMachine.publicKey,</p>
</div></blockquote>
<p>}),</p>
</div></blockquote>
<p>}),</p>
</dd>
</dl>
<p>}).sendAndConfirm(umi);
<a href="#id113"><span class="problematic" id="id114">``</span></a><a href="#id115"><span class="problematic" id="id116">`</span></a></p>
<p>API References: [setTokenStandard](<a class="reference external" href="https://mpl-candy-machine-js-docs.vercel.app/functions/setTokenStandard.html">https://mpl-candy-machine-js-docs.vercel.app/functions/setTokenStandard.html</a>).</p>
<p>&lt;/div&gt;
&lt;/AccordionItem&gt;
&lt;AccordionItem title=”JavaScript — SDK”&gt;
&lt;div className=”accordion-item-padding”&gt;</p>
<p>:::info
The JS SDK is only compatible with Candy Machine V3 accounts whose account version is 1. That means, it does not support minting programmable NFTs and it is not compatible with Candy Machines created with the latest version of [Sugar](/developer-tools/sugar/overview/introduction).</p>
<p>You may consider [using the Umi library](/programs/candy-machine/getting-started#umi-library-recommended) instead which supports all account versions of Candy Machine V3. Alternatively, you may downgrade you Sugar version to <cite>2.0.0</cite> or use the Solita-generated library.</p>
<p>See [Programmable NFTs](/programs/candy-machine/programmable-nfts) for more details.
::</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_This</span> <span class="n">operation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">supported</span> <span class="n">by</span> <span class="n">the</span> <span class="n">JS</span> <span class="n">SDK</span> <span class="n">but</span> <span class="n">you</span> <span class="n">may</span> <span class="n">use</span> <span class="n">the</span> <span class="n">Solita</span><span class="o">-</span><span class="n">generated</span> <span class="n">library</span> <span class="k">as</span> <span class="n">explained</span> <span class="ow">in</span> <span class="n">the</span> <span class="p">[</span><span class="n">Programmable</span> <span class="n">NFTs</span><span class="p">](</span><span class="o">/</span><span class="n">programs</span><span class="o">/</span><span class="n">candy</span><span class="o">-</span><span class="n">machine</span><span class="o">/</span><span class="n">programmable</span><span class="o">-</span><span class="n">nfts</span><span class="c1">#for-existing-candy-machines) page._</span>
</pre></div>
</div>
<p>&lt;/div&gt;
&lt;/AccordionItem&gt;
&lt;/Accordion&gt;</p>
<p>## Update Collection</p>
<p>Changing the Collection NFT associated with a Candy Machine is also possible. You’ll need to provide the address of the Collection NFT’s mint account as well as its update authority as a signer to approve this change.</p>
<p>Note that, here also, once the first NFT has been minted, the collection cannot be changed.</p>
<p>&lt;Accordion&gt;
&lt;AccordionItem title=”JavaScript — Umi library (recommended)” open={true}&gt;
&lt;div className=”accordion-item-padding”&gt;</p>
<p>To update the Collection NFT of a Candy Machine using the Umi library you may use the <cite>setCollectionV2</cite> method like so.</p>
<p><a href="#id117"><span class="problematic" id="id118">``</span></a><a href="#id119"><span class="problematic" id="id120">`</span></a>ts
await setCollectionV2(umi, {</p>
<blockquote>
<div><p>candyMachine: candyMachine.publicKey,
collectionMint: candyMachine.collectionMint,
collectionUpdateAuthority: collectionUpdateAuthority.publicKey,
newCollectionMint: newCollectionMint.publicKey,
newCollectionUpdateAuthority,</p>
</div></blockquote>
<p>}).sendAndConfirm(umi);
<a href="#id121"><span class="problematic" id="id122">``</span></a><a href="#id123"><span class="problematic" id="id124">`</span></a></p>
<p>Note that if your candy machine is using account version <cite>V1</cite>, you will need to explicitly set the <cite>collectionDelegateRecord</cite> account as it uses the legacy collection delegate authority record account.</p>
<p><a href="#id125"><span class="problematic" id="id126">``</span></a><a href="#id127"><span class="problematic" id="id128">`</span></a>ts
import { findCollectionAuthorityRecordPda } from “&#64;metaplex-foundation/mpl-token-metadata”;
import { findCandyMachineAuthorityPda } from “&#64;metaplex-foundation/mpl-candy-machine”;</p>
<dl>
<dt>await setCollectionV2(umi, {</dt><dd><p>// …
collectionDelegateRecord: findCollectionAuthorityRecordPda(umi, {</p>
<blockquote>
<div><p>mint: candyMachine.collectionMint,
collectionAuthority: findCandyMachineAuthorityPda(umi, {</p>
<blockquote>
<div><p>candyMachine: candyMachine.publicKey,</p>
</div></blockquote>
<p>}),</p>
</div></blockquote>
<p>}),</p>
</dd>
</dl>
<p>}).sendAndConfirm(umi);
<a href="#id129"><span class="problematic" id="id130">``</span></a><a href="#id131"><span class="problematic" id="id132">`</span></a></p>
<p>API References: [setCollectionV2](<a class="reference external" href="https://mpl-candy-machine-js-docs.vercel.app/functions/setCollectionV2.html">https://mpl-candy-machine-js-docs.vercel.app/functions/setCollectionV2.html</a>).</p>
<p>&lt;/div&gt;
&lt;/AccordionItem&gt;
&lt;AccordionItem title=”JavaScript — SDK”&gt;
&lt;div className=”accordion-item-padding”&gt;</p>
<p>:::info
The JS SDK is only compatible with Candy Machine V3 accounts whose account version is 1. That means, it does not support minting programmable NFTs and it is not compatible with Candy Machines created with the latest version of [Sugar](/developer-tools/sugar/overview/introduction).</p>
<p>You may consider [using the Umi library](/programs/candy-machine/getting-started#umi-library-recommended) instead which supports all account versions of Candy Machine V3. Alternatively, you may downgrade you Sugar version to <cite>2.0.0</cite> or use the Solita-generated library.</p>
<p>See [Programmable NFTs](/programs/candy-machine/programmable-nfts) for more details.
::</p>
<p>To update the Collection NFT of a Candy Machine using the JS SDK you must provide a <cite>collection</cite> object containing the <cite>address</cite> of the Collection NFT’s mint account and the <cite>updateAuthority</cite> of the Collection NFT as a signer.</p>
<p><a href="#id133"><span class="problematic" id="id134">``</span></a><a href="#id135"><span class="problematic" id="id136">`</span></a>tsx
await metaplex.candyMachines().update({</p>
<blockquote>
<div><p>candyMachine,
collection: {</p>
<blockquote>
<div><p>address: newCollection.address,
updateAuthority: newCollectionAuthority,</p>
</div></blockquote>
<p>},</p>
</div></blockquote>
</section>
<section id="id137">
<h2>});<a class="headerlink" href="#id137" title="Permalink to this heading">¶</a></h2>
<p>API References: [Operation](<a class="reference external" href="https://metaplex-foundation.github.io/js/classes/js.CandyMachineClient.html#update">https://metaplex-foundation.github.io/js/classes/js.CandyMachineClient.html#update</a>), [Input](<a class="reference external" href="https://metaplex-foundation.github.io/js/types/js.UpdateCandyMachineInput.html">https://metaplex-foundation.github.io/js/types/js.UpdateCandyMachineInput.html</a>), [Output](<a class="reference external" href="https://metaplex-foundation.github.io/js/types/js.UpdateCandyMachineOutput.html">https://metaplex-foundation.github.io/js/types/js.UpdateCandyMachineOutput.html</a>), [Transaction Builder](<a class="reference external" href="https://metaplex-foundation.github.io/js/classes/js.CandyMachineBuildersClient.html#update">https://metaplex-foundation.github.io/js/classes/js.CandyMachineBuildersClient.html#update</a>).</p>
<p>&lt;/div&gt;
&lt;/AccordionItem&gt;
&lt;/Accordion&gt;</p>
<p>## Update Item Settings</p>
<p>The item settings of a Candy Machine can also be updated but there are some limitations.</p>
<ul class="simple">
<li><p>The item settings cannot be updated such that we are swapping between <strong>Config Line Settings</strong> and <strong>Hidden Settings</strong>. However, if we’re not swapping the modes, the properties inside these settings can be updated.</p></li>
<li><p>When using <strong>Config Line Settings</strong>:
- The <strong>Items Available</strong> attribute cannot be updated.
- The <strong>Name Length</strong> and <strong>URI Length</strong> properties can only be updated to smaller values as the program will not resize the Candy Machine account during updates.</p></li>
<li><p>Once the first NFT has been minted, these settings can no longer be updated.</p></li>
</ul>
<p>&lt;Accordion&gt;
&lt;AccordionItem title=”JavaScript — Umi library (recommended)” open={true}&gt;
&lt;div className=”accordion-item-padding”&gt;</p>
<p>The following example shows how to update the Config Line Settings of a Candy Machine using the Umi library. The same can be done with Hidden Settings and the Items Available attribute (when using Hidden Settings).</p>
<p><a href="#id138"><span class="problematic" id="id139">``</span></a><a href="#id140"><span class="problematic" id="id141">`</span></a>ts
import {</p>
<blockquote>
<div><p>updateCandyMachine,
fetchCandyMachine,</p>
</div></blockquote>
<p>} from “&#64;metaplex-foundation/mpl-candy-machine”;</p>
<p>const candyMachine = await fetchCandyMachine(umi, candyMachineAddress);
await updateCandyMachine(umi, {</p>
<blockquote>
<div><p>candyMachine: candyMachine.publicKey,
data: {</p>
<blockquote>
<div><p>…candyMachine.data,
hiddenSettings: none(),
configLineSettings: some({</p>
<blockquote>
<div><p>type: “configLines”,
prefixName: “My New NFT #$ID+1$”,
nameLength: 0,
prefixUri: “<a class="reference external" href="https://arweave.net/">https://arweave.net/</a>”,
uriLength: 43,
isSequential: true,</p>
</div></blockquote>
<p>}),</p>
</div></blockquote>
<p>},</p>
</div></blockquote>
<p>}).sendAndConfirm(umi);
<a href="#id142"><span class="problematic" id="id143">``</span></a><a href="#id144"><span class="problematic" id="id145">`</span></a></p>
<p>API References: [updateCandyMachine](<a class="reference external" href="https://mpl-candy-machine-js-docs.vercel.app/functions/updateCandyMachine.html">https://mpl-candy-machine-js-docs.vercel.app/functions/updateCandyMachine.html</a>).</p>
<p>&lt;/div&gt;
&lt;/AccordionItem&gt;
&lt;AccordionItem title=”JavaScript — SDK”&gt;
&lt;div className=”accordion-item-padding”&gt;</p>
<p>The following example shows how to update the Config Line Settings of a Candy Machine using the JS SDK. The same can be done with Hidden Settings and the Items Available attribute (when using Hidden Settings).</p>
<p><a href="#id146"><span class="problematic" id="id147">``</span></a><a href="#id148"><span class="problematic" id="id149">`</span></a>tsx
await metaplex.candyMachines().update({</p>
<blockquote>
<div><p>candyMachine,
itemSettings: {</p>
<blockquote>
<div><p>type: “configLines”,
prefixName: “My New NFT #$ID+1$”,
nameLength: 0,
prefixUri: “<a class="reference external" href="https://arweave.net/">https://arweave.net/</a>”,
uriLength: 43,
isSequential: true,</p>
</div></blockquote>
<p>},</p>
</div></blockquote>
</section>
<section id="id150">
<h2>});<a class="headerlink" href="#id150" title="Permalink to this heading">¶</a></h2>
<p>API References: [Operation](<a class="reference external" href="https://metaplex-foundation.github.io/js/classes/js.CandyMachineClient.html#update">https://metaplex-foundation.github.io/js/classes/js.CandyMachineClient.html#update</a>), [Input](<a class="reference external" href="https://metaplex-foundation.github.io/js/types/js.UpdateCandyMachineInput.html">https://metaplex-foundation.github.io/js/types/js.UpdateCandyMachineInput.html</a>), [Output](<a class="reference external" href="https://metaplex-foundation.github.io/js/types/js.UpdateCandyMachineOutput.html">https://metaplex-foundation.github.io/js/types/js.UpdateCandyMachineOutput.html</a>), [Transaction Builder](<a class="reference external" href="https://metaplex-foundation.github.io/js/classes/js.CandyMachineBuildersClient.html#update">https://metaplex-foundation.github.io/js/classes/js.CandyMachineBuildersClient.html#update</a>).</p>
<p>&lt;/div&gt;
&lt;/AccordionItem&gt;
&lt;/Accordion&gt;</p>
<p>## Delete Candy Machines</p>
<p>Once a Candy Machine has been fully minted, it has served its purpose and can safely be disposed of. This allows its creator to gain back the storage cost of the Candy Machine account and, optionally, the Candy Guard account too.</p>
<p>&lt;Accordion&gt;
&lt;AccordionItem title=”JavaScript — Umi library (recommended)” open={true}&gt;
&lt;div className=”accordion-item-padding”&gt;</p>
<p>You may delete a Candy Machine account and/or its associated Candy Guard account using the Umi library like so.</p>
<p><a href="#id151"><span class="problematic" id="id152">``</span></a><a href="#id153"><span class="problematic" id="id154">`</span></a>ts
import {</p>
<blockquote>
<div><p>deleteCandyMachine,
deleteCandyGuard,</p>
</div></blockquote>
<p>} from “&#64;metaplex-foundation/mpl-candy-machine”;</p>
<dl class="simple">
<dt>await deleteCandyMachine(umi, {</dt><dd><p>candyMachine: candyMachine.publicKey,</p>
</dd>
</dl>
<p>}).sendAndConfirm(umi);</p>
<dl class="simple">
<dt>await deleteCandyGuard(umi, {</dt><dd><p>candyGuard: candyMachine.mintAuthority,</p>
</dd>
</dl>
<p>}).sendAndConfirm(umi);
<a href="#id155"><span class="problematic" id="id156">``</span></a><a href="#id157"><span class="problematic" id="id158">`</span></a></p>
<p>API References: [deleteCandyMachine](<a class="reference external" href="https://mpl-candy-machine-js-docs.vercel.app/functions/deleteCandyMachine.html">https://mpl-candy-machine-js-docs.vercel.app/functions/deleteCandyMachine.html</a>), [deleteCandyGuard](<a class="reference external" href="https://mpl-candy-machine-js-docs.vercel.app/functions/deleteCandyGuard.html">https://mpl-candy-machine-js-docs.vercel.app/functions/deleteCandyGuard.html</a>).</p>
<p>&lt;/div&gt;
&lt;/AccordionItem&gt;
&lt;AccordionItem title=”JavaScript — SDK”&gt;
&lt;div className=”accordion-item-padding”&gt;</p>
<p>You may delete a Candy Machine account using the JS SDK like so.</p>
<p><a href="#id159"><span class="problematic" id="id160">``</span></a><a href="#id161"><span class="problematic" id="id162">`</span></a>tsx
await metaplex.candyMachines().delete({</p>
<blockquote>
<div><p>candyMachine: candyMachine.address,</p>
</div></blockquote>
</section>
<section id="id163">
<h2>});<a class="headerlink" href="#id163" title="Permalink to this heading">¶</a></h2>
<p>Note that this will only delete the Candy Machine account and not the associated Candy Guard account to avoid bad surprises. If you want to delete both of them, you must also provide the address of the Candy Guard address like so.</p>
<p><a href="#id164"><span class="problematic" id="id165">``</span></a><a href="#id166"><span class="problematic" id="id167">`</span></a>tsx
await metaplex.candyMachines().delete({</p>
<blockquote>
<div><p>candyMachine: candyMachine.address,
candyGuard: candyMachine.candyGuard.address,</p>
</div></blockquote>
</section>
<section id="id168">
<h2>});<a class="headerlink" href="#id168" title="Permalink to this heading">¶</a></h2>
<p>API References: [Operation](<a class="reference external" href="https://metaplex-foundation.github.io/js/classes/js.CandyMachineClient.html#delete">https://metaplex-foundation.github.io/js/classes/js.CandyMachineClient.html#delete</a>), [Input](<a class="reference external" href="https://metaplex-foundation.github.io/js/types/js.DeleteCandyMachineInput.html">https://metaplex-foundation.github.io/js/types/js.DeleteCandyMachineInput.html</a>), [Output](<a class="reference external" href="https://metaplex-foundation.github.io/js/types/js.DeleteCandyMachineOutput.html">https://metaplex-foundation.github.io/js/types/js.DeleteCandyMachineOutput.html</a>), [Transaction Builder](<a class="reference external" href="https://metaplex-foundation.github.io/js/classes/js.CandyMachineBuildersClient.html#delete">https://metaplex-foundation.github.io/js/classes/js.CandyMachineBuildersClient.html#delete</a>).</p>
<p>&lt;/div&gt;
&lt;/AccordionItem&gt;
&lt;/Accordion&gt;</p>
<p>## Conclusion</p>
<p>We can now create, read, update and delete Candy Machines but we still don’t know how to load them with items. Let’s tackle this on [the next page](/programs/candy-machine/inserting-items)!</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">twit</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, jare.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../_sources/01-programs/02-candy-machine/03-managing-candy-machines.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>