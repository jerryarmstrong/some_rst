<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>docs/01-programs/03-auction-house/00-overview.md &#8212; twit  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b3523f8e" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=039e1c02" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=b3ba4146"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="docs-01-programs-03-auction-house-00-overview-md">
<h1>docs/01-programs/03-auction-house/00-overview.md<a class="headerlink" href="#docs-01-programs-03-auction-house-00-overview-md" title="Permalink to this heading">¶</a></h1>
<p>Last edited: 2023-08-08 19:56:25</p>
<p>Contents:</p>
<div class="highlight-md notranslate"><div class="highlight"><pre><span></span>---
</pre></div>
</div>
<p>description: “gives an overview of the Auction House program”
—</p>
<p>import { Accordion, AccordionItem } from ‘/src/accordion.jsx’;</p>
<p># Overview</p>
<p>## Introduction
Auction House is a program that allows users to exchange assets within the Solana blockchain.</p>
<p>There are plenty of ways to exchange assets on Solana, so why another program focused on solving this problem? Let’s dive deep into that.</p>
<p>The ethos of this program is to allow anyone to create and configure their own marketplace and even provide their own custom logic on how assets should be exchanged. The motivation behind the Auction House protocol is to create a healthy ecosystem of marketplaces that focus on different use-cases, and more importantly, each bringing their own flavor into the way they allow users to trade assets.</p>
<p>The most important aspect of the Auction House program is that it provides ownership of assets to the user.</p>
<p>Traditionally, as soon as the user lists an asset on a marketplace, the asset is moved from the user’s wallet into a wallet known as the [Escrow](<a class="reference external" href="https://www.investopedia.com/terms/e/escrow.asp">https://www.investopedia.com/terms/e/escrow.asp</a>) wallet owned by the marketplace and is kept or <strong>escrowed</strong> there until the asset is delisted or sold. This poses some concerns:
* The user can not list the same asset on multiple marketplaces
* The user has to rely on the marketplaces’ escrow contracts to safely hold their asset.</p>
<p>This is where Auction House shows its power. Its a transaction protocol that allows marketplaces to implement an <strong>escrow-less</strong> sales contract, thus providing ownership of assets to the users.</p>
<p>## Creating an Auction House
The Auction House program can be used to create a new marketplace by instantiating a new <strong>Auction House</strong> account. The Auction House account is a [Program Derived Address (PDA)](/programs/understanding-programs#program-derived-addresses-pda) which is derived from a given public key and, optionally, an SPL Token to use a currency (more on that below).</p>
<p>&lt;p&gt;
&lt;img src=”<a class="reference external" href="https://i.imgur.com/2HPpM9g.png#radius">https://i.imgur.com/2HPpM9g.png#radius</a>” style={{maxWidth: ‘400px’}} /&gt;
&lt;/p&gt;</p>
<p>The account can be configured in whichever way the user wants. We’ll talk [more about these configurations in a dedicated page](/programs/auction-house/auction-house-settings) but here are some interesting configurable parameters:</p>
<ul class="simple">
<li><p><cite>requireSignOff</cite>: this allows marketplaces to gate which assets can be listed and which bids can be placed. On every relevant instruction, the Auction House [authority](<a class="reference external" href="https://docs.solana.com/staking/stake-accounts#understanding-account-authorities">https://docs.solana.com/staking/stake-accounts#understanding-account-authorities</a>) needs to sign the transaction.</p></li>
<li><p><cite>canChangeSalePrice</cite>: this parameter is only intended to be used on Auction Houses with <cite>requireSignOff</cite> set to <cite>true</cite>. This allows the Auction House to perform custom order matching to find the best price for the seller.</p></li>
<li><p><cite>sellerFeeBasisPoints</cite>: this represents the share the marketplace takes on all trades. For instance, if this is set to <cite>200</cite>, i.e. 2%, then the marketplace takes 2% of every single trade that happens on their platform.</p></li>
</ul>
<p>## Listing and Bidding
Once we have an active Auction House, users can start listing assets and bidding on assets on the marketplace.</p>
<p>### Listing
When a user lists an asset, the Auction House does two things:
1. Auction House creates a <strong>Sell Order</strong>: in other words, creates a PDA known as the <cite>SellerTradeState</cite> which represents the listing of the asset. Trade States are special PDAs that are very cheap in comparison to other PDAs / Accounts. This is because these PDAs only store 1 byte of data, which is the [bump](<a class="reference external" href="https://solanacookbook.com/core-concepts/pdas.html#generating-pdas">https://solanacookbook.com/core-concepts/pdas.html#generating-pdas</a>) of the PDA. All other information related to listings such as list price, amount of tokens, mint account etc, are hashed into the seeds of the PDA, instead of storing them inside the PDA itself, and therefore the PDA acts as a “proof of existence” for that listing, while being extremely cost efficient.</p>
<p>![](<a class="reference external" href="https://i.imgur.com/ki27Ds8.png#radius">https://i.imgur.com/ki27Ds8.png#radius</a>)</p>
<ol class="arabic simple" start="2">
<li><p>Auction House also assigns another PDA: <cite>programAsSigner</cite> PDA as the <strong>Delegate</strong>. Delegates are a feature of the Solana SPL-token program and are discussed in detail [here](<a class="reference external" href="https://spl.solana.com/token#authority-delegation">https://spl.solana.com/token#authority-delegation</a>). Delegation allows the Auction House to pull assets out of a token account when a sale goes through at a later point. This way, the asset need not be escrowed and can stay in the user’s wallet up until the sale goes through.</p></li>
</ol>
<p>![](<a class="reference external" href="https://i.imgur.com/aIRl7Hb.png#radius">https://i.imgur.com/aIRl7Hb.png#radius</a>)</p>
<p>### Bidding
Similar to the case of listing, when a user places a bid, the Auction House creates a <strong>Buy Order</strong>. In other words, it creates the <cite>BuyerTradeState</cite> PDA representing the bid. The bid amount (native or SPL tokens) needs to be transferred manually by the marketplace to the <cite>BuyerEscrowAccount</cite> PDA, which holds this amount till the sale goes through.</p>
<p>&gt; Example:
&gt; * Alice lists an asset A for 5 SOL. In doing so, the Auction House creates the <cite>SellerTradeState</cite> PDA representing the bid. The Auction House also assigns the <cite>programAsSigner</cite> PDA as the <strong>Delegate</strong>, hence giving it the <strong>Authority</strong> to pull the asset from Alice’s wallet when the sale goes through.
&gt; * Bob places a bid of 5 SOL on asset A. In doing so, the marketplace pulls 5 SOL from Bob’s wallet to the <cite>BuyerEscrowAccount</cite> PDA. This amount will stay here up until the sale goes through.</p>
<p>## Executing a Sale
Once we have a listing and at least one bid placed for a given asset, a trade can be completed by calling the <cite>executeSale</cite> instruction.</p>
<p>The <cite>executeSale</cite> instruction is a permission-less crank: in other words, can be executed by anyone without any fee or reward. On the execution of the <cite>executeSale</cite> instruction, two things happen:
* The Auction House pulls the bid amount stored in the <cite>BuyerEscrowAccount</cite> and transfers this amount to the lister (minus Auction House fees).
* The <cite>programAsSigner</cite> PDA, which the Auction House assigned as the <strong>Delegate</strong>, pulls the asset from the lister’s wallet (more specifically, from the Token Account in the lister’s wallet), and transfers the asset into the bidder’s wallet, thus completing the trade.
![](<a class="reference external" href="https://i.imgur.com/gpAX63m.png#radius">https://i.imgur.com/gpAX63m.png#radius</a>)</p>
<p>Now that we know how the <cite>executeSale</cite> instruction works, let’s discuss the three trade scenarios in which the <cite>executeSale</cite> instruction is executed in different ways:</p>
<ol class="arabic simple">
<li><p><em>“Buying” at list price</em>: This is the case when a user places a bid for a listed asset, at the listed amount itself. In such cases, the <cite>bid</cite> and the <cite>executeSale</cite> instructions are executed in the same transaction, and thus the bidder effectively “buys” the asset.</p></li>
</ol>
<p>&gt; Example:
&gt; * Alice lists an asset A for 5 SOL. This creates a <strong>Sell Order</strong> for asset A.
&gt; * Bob notices the listing and places a bid of 5 SOL for the asset A. This creates a <strong>Buy Order</strong> for asset A.
&gt; * This enables the marketplace to place a bid on the asset and execute the sale in the same transaction, in practice allowing Bob to “buy” asset A.</p>
<ol class="arabic simple" start="2">
<li><p><em>“Selling” at bid price</em>: This is the case when a user, interested in an unlisted asset, places a bid on it. If the asset owner now lists the asset for the bid amount, the <cite>list</cite> and the <cite>executeSale</cite> instructions are executed in the same instruction, and thus the lister effectively “sells” the asset at the requested price.</p></li>
</ol>
<p>&gt; Example:
&gt; * Bob places a bid of 5 SOL for an unlisted asset A. This creates a <strong>Buy Order</strong> for asset A.
&gt; * Alice notices the bid and lists the asset A for 5 SOL. This creates a <strong>Sell Order</strong> for asset A.
&gt; * This enables the marketplace to list the asset and execute the sale in the same transaction, in practice allowing Alice to “sell” asset A.</p>
<ol class="arabic simple" start="3">
<li><p><em>Lister agreeing to a bid</em>: This is the case when the <cite>executeSale</cite> instruction is executed independently, after a <strong>Buy Order</strong> and a <strong>Sell Order</strong> exist for a given asset.</p></li>
</ol>
<p>&gt; Example:
&gt; * Alice lists an asset A for 5 SOL. This creates a <strong>Sell Order</strong> for asset A.
&gt; * Bob places a bid of 5 SOL for asset A, unaware of Alice’s listing. This creates a <strong>Buy Order</strong> for asset A.
&gt; * Alice notices the matching bid and executes the sale.</p>
<p>## Auctioning Fungible Assets
So far, we’ve talked about exchanging assets using an Auction House account, but we’ve not dug into what type of assets can be exchanged that way. The most popular assets that can be listed in an Auction House are [Non-Fungible Tokens (NFTs)](/resources/definitions#non-fungible-tokens).</p>
<p>However, these are not the only assets that can benefit from the Auction House program. In fact, an asset can be any SPL Token so long as it has a Metadata account attached to its Mint account. If you’d like to know more about SPL Token and Metadata accounts, you can [read more about this in the overview of our Token Metadata program](/programs/token-metadata/overview).</p>
<p>## Buying asset using a custom SPL Token
In the examples showcased above, we’ve used SOL as the exchange currency to discuss how the Auction House program works. But SOL is not the only currency that can be configured for exchanging assets. The Auction House program allows marketplaces to configure any SPL-token to act as their currency.</p>
<p>This can be achieved by setting the <cite>treasuryMint</cite> parameter in the Auction House account to the mint account of the SPL-token of your liking.</p>
<p>## Custom Order Matching
When we were discussing Trade States, there was a third Trade State which was shown in the Trade State diagram: the <cite>FreeSellerTradeState</cite>. What’s the utility of this Trade State?</p>
<p>During the introduction to the Auction House program, we briefly discussed how Auction House can be used by marketplaces to provide their own custom logic on how assets should be exchanged. This is where the <cite>FreeSellerTradeState</cite> comes in.</p>
<p>When a buyer intentionally lists their asset for a price of 0 SOL / SPL-tokens, the <cite>FreeSellerTradeState</cite> is generated. The Auction House can then change the sale price to match a matching bid that is greater than 0. This allows the Auction House to do complicated order matching to find the best price for the seller and the marketplaces can write their own custom logic to do this order matching.</p>
<p>## Auctioneer
All of the auctions we’ve seen so far have one thing in common. They are, what we call, [<strong>Double Auctions</strong>](<a class="reference external" href="https://blogs.cornell.edu/info2040/2021/11/29/four-common-types-of-auctions/#:~:text=sealed%2Dbid%20auction.-,DOUBLE%20AUCTION,-Both%20buyers%20and">https://blogs.cornell.edu/info2040/2021/11/29/four-common-types-of-auctions/#:~:text=sealed%2Dbid%20auction.-,DOUBLE%20AUCTION,-Both%20buyers%20and</a>). That is, they are un-timed auctions where buyers and sellers, bid and list until they find a common ground.
However, there are several other forms of auctions such as English auctions and Dutch auctions which have become popular in the Solana ecosystem.
The Auction House implementation is purposefully designed with instant sales in mind and does not offer other auction types out-of-the-box.</p>
<p><strong>Auctioneer</strong> is a customized contract type, written by the user, that uses the composability pattern of Auction House to control an individual Auction House account.</p>
<p>To enable an Auctioneer instance on an Auction House, it must first be explicitly delegated. This Auctioneer instance will then be able to intercept most of the Auction House instructions in order to inject its own custom logic. Metaplex also provides some Auctioneer implementations like Timed Auctions. We will talk about this in greater detail in later pages of this documentation.</p>
<p>![](<a class="reference external" href="https://i.imgur.com/RyZUfR9.png#radius">https://i.imgur.com/RyZUfR9.png#radius</a>)</p>
<p>## Next steps
On this page, we have gone through the very basics of the Auction House protocol and the power it possesses. There is a lot more that the Auction House is capable of.</p>
<p>We’ll start by listing various libraries that can be used to get started with this program:
* [Getting Started](/programs/auction-house/getting-started)</p>
<p>We will proceed to dive deeper into the Auction House settings and how to manage Auction House instances:
* [Auction House Settings](/programs/auction-house/auction-house-settings)
* [Managing Auction Houses](/programs/auction-house/managing-auction-house)</p>
<p>Once we understand the basics of Auction House, we can begin to learn how to trade assets on Auction House powered marketplaces:
* [Trading assets on Auction House](/programs/auction-house/trading-assets-on-auction-house)
* [Managing Buyer Account](/programs/auction-house/managing-buyer-account)</p>
<p>We will also explore how to track listings, bids and sales on Auction Houses and how to fetch them:
* [Printing Receipts](/programs/auction-house/auction-house-receipts)
* [Finding bids, listings and purchases](/programs/auction-house/finding-bids-listings-and-sales)</p>
<p>## Additional Reading Material
* Prof Lupin’s Auction House guide: <a class="reference external" href="https://proflupin.xyz/metaplex-auction-house">https://proflupin.xyz/metaplex-auction-house</a>
* Jordan’s twitter thread: <a class="reference external" href="https://twitter.com/redacted_j/status/1453926144248623104">https://twitter.com/redacted_j/status/1453926144248623104</a>
* Armani’s twitter thread: <a class="reference external" href="https://twitter.com/armaniferrante/status/1460760940454965248">https://twitter.com/armaniferrante/status/1460760940454965248</a></p>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">twit</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, jare.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../_sources/01-programs/03-auction-house/00-overview.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>