<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>docs/01-programs/03-auction-house/03-managing-auction-house.md &#8212; twit  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b3523f8e" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=039e1c02" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=b3ba4146"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="docs-01-programs-03-auction-house-03-managing-auction-house-md">
<h1>docs/01-programs/03-auction-house/03-managing-auction-house.md<a class="headerlink" href="#docs-01-programs-03-auction-house-03-managing-auction-house-md" title="Permalink to this heading">¶</a></h1>
<p>Last edited: 2023-08-08 19:56:25</p>
<p>Contents:</p>
<div class="highlight-md notranslate"><div class="highlight"><pre><span></span>---
</pre></div>
</div>
<p>description: “Explains how to manage Auction Houses.”
—</p>
<p>import { Accordion, AccordionItem } from ‘/src/accordion.jsx’;</p>
<p># Managing Auction Houses</p>
<p>## Introduction</p>
<p>[On the previous page](/programs/auction-house/auction-house-settings), we went through the various settings of an Auction House. So now, let’s see how we can use these settings to create and update Auction Houses.</p>
<p>We’ll also talk about different ways of fetching Auction House. Lastly, we’ll go see how to withdraw funds from the Auction House fee and treasury accounts.</p>
<p>## Create Auction Houses</p>
<p>An Auction House can be created with all the settings discussed in the previous page. The created Auction House account is referred to as an Auction House <strong>Instance</strong>.</p>
<p>&lt;Accordion&gt;
&lt;AccordionItem title=”JS SDK” open={true}&gt;
&lt;div className=”accordion-item-padding”&gt;</p>
<p>Let’s go through an example of using the Metaplex JS SDK to create an Auction House. Note that by default the current identity is used as the authority of the Auction House. Moreover, by default <cite>SOL</cite> will be set as the <cite>treasuryMint</cite>. Lastly, helper accounts discussed in the last page will be automatically generated by the Auction House, but they can also be set manually while Auction House creation.</p>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a>tsx
const auctionHouseSettings = await metaplex</p>
<blockquote>
<div><p>.auctionHouse()
.create({</p>
<blockquote>
<div><p>sellerFeeBasisPoints: 500 // 5% fee
authority: metaplex.identity(),
requireSignOff: true,
canChangeSalePrice: true,
hasAuctioneer: true, // to enable auctioneer
auctioneerAuthority: metaplex.identity(),</p>
</div></blockquote>
<p>});</p>
</div></blockquote>
<p><a href="#id5"><span class="problematic" id="id6">``</span></a><a href="#id7"><span class="problematic" id="id8">`</span></a></p>
<p>&lt;/div&gt;
&lt;/AccordionItem&gt;
&lt;/Accordion&gt;</p>
<p>## Auction House Account</p>
<p>Now that we’ve created an Auction House instance, let’s see what data is stored inside it.</p>
<p>Firstly, it stores all the settings that we have already discussed. In addition to these settings, the Auction House account stores a <cite>creator</cite> field, which points to the address of the wallet used to create the Auction House instance.</p>
<p>Lastly, the Auction House instance also stores some PDA bumps, which are used to derive the addresses of the PDA accounts.</p>
<p>&gt; When building with PDAs, it is common to store the bump seed in the account data itself. This allows developers to easily validate a PDA without having to pass in the bump as an instruction argument.</p>
<p>&lt;Accordion&gt;
&lt;AccordionItem title=”JS SDK” open={true}&gt;
&lt;div className=”accordion-item-padding”&gt;</p>
<p>The Auction House account model can be explored in the [API References of the <cite>AuctionHouse</cite> model](<a class="reference external" href="https://metaplex-foundation.github.io/js/types/js.AuctionHouse.html">https://metaplex-foundation.github.io/js/types/js.AuctionHouse.html</a>).</p>
<p>Here’s a small code example showcasing some of the Auction House attributes.</p>
<p><a href="#id9"><span class="problematic" id="id10">``</span></a><a href="#id11"><span class="problematic" id="id12">`</span></a>tsx
const { auctionHouse } = await metaplex.auctionHouse().create({…});</p>
<p>auctionHouse.address;                   // The public key of the Auction House account
auctionHouse.auctionHouseFeeAccount;    // The public key of the Auction House Fee account
auctionHouse.feeWithdrawalDestination;  // The public key of the account to withdraw funds from Auction House fee account
auctionHouse.treasuryMint;              // The mint address of the token to be used as the Auction House currency
auctionHouse.authority;                 // The public key of the Auction House authority
auctionHouse.creator;                   // The public key of the account used to create the Auction House instance
auctionHouse.bump;                      // The <cite>Bump</cite> of the Auction House instance
auctionHouse.feePayerBump;              // The <cite>Bump</cite> of the fee account
auctionHouse.treasuryBump;              // The <cite>Bump</cite> of the treasury account
auctionHouse.auctioneerAddress;         // he public key of the <cite>Auctioneer</cite> account
<a href="#id13"><span class="problematic" id="id14">``</span></a><a href="#id15"><span class="problematic" id="id16">`</span></a></p>
<p>&lt;/div&gt;
&lt;/AccordionItem&gt;
&lt;/Accordion&gt;</p>
<p>## Fetch Auction Houses</p>
<p>Once created, the Auction House instance can be fetched. An Auction House can be uniquely identified by its PDA account address or a combination of its creator address and the treasury mint address.</p>
<p>&lt;Accordion&gt;
&lt;AccordionItem title=”JS SDK” open={true}&gt;
&lt;div className=”accordion-item-padding”&gt;</p>
<p>An Auction House can be fetched using two ways:</p>
<ol class="arabic simple">
<li><p><strong>By address</strong>: using the Auction House address</p></li>
<li><p><strong>By creator and mint</strong>: using the combination of the <cite>creator</cite> address and the treasury mint. Note that when the Auction House has Auctioneer enabled, the <cite>auctioneerAuthority</cite> is also required in addition to the creator and the mint.</p></li>
</ol>
<p><a href="#id17"><span class="problematic" id="id18">``</span></a><a href="#id19"><span class="problematic" id="id20">`</span></a>tsx
// by address
const auctionHouse = await metaplex</p>
<blockquote>
<div><p>.auctionHouse()
.findByAddress({ address: new PublicKey(“Gjwc…thJS”) });</p>
</div></blockquote>
<p>// by creator and mint
// in this example, we assume that the Auction House
// does not have Auctioneer enabled
const auctionHouse = await metaplex</p>
<blockquote>
<div><p>.auctionHouse()
.findByCreatorAndMint({</p>
<blockquote>
<div><p>creator: new PublicKey(“Gjwc…thJS”),
treasuryMint: new PublicKey(“DUST…23df”)</p>
</div></blockquote>
<p>});</p>
</div></blockquote>
<p><a href="#id21"><span class="problematic" id="id22">``</span></a><a href="#id23"><span class="problematic" id="id24">`</span></a></p>
<p>&lt;/div&gt;
&lt;/AccordionItem&gt;
&lt;/Accordion&gt;</p>
<p>## Update Settings</p>
<p>As in the case of Candy Machine, once an Auction House instance is created, you can update most of its settings later on as long as you are the authority of the Auction House instance. The following settings can be updated: <cite>authority</cite>, <cite>sellerFeeBasisPoints</cite>, <cite>requiresSignOff</cite>, <cite>canChangeSalePrice</cite>, <cite>feeWithdrawalDestination</cite>, <cite>treasuryWithdrawalDestination</cite>, <cite>auctioneerScopes</cite>.</p>
<p>As we’ve already discussed, the authority of the Auction House is one of the settings that can be updated, as long as the current authority is the signer and the address of the new authority is mentioned.</p>
<p>&lt;Accordion&gt;
&lt;AccordionItem title=”JS SDK” open={true}&gt;
&lt;div className=”accordion-item-padding”&gt;</p>
<p>To update the settings, we need the full model in order to compare the current data with the provided data. For instance, if you only want to update the <cite>feeWithdrawalDestination</cite>, you need to send an instruction that updates the data whilst keeping all other properties the same.</p>
<p>Also, by default, <cite>feeWithdrawalDestination</cite> and the <cite>treasuryWithdrawalDestination</cite> are set to <cite>metaplex.identity()</cite>, ie., the same wallet which is set as the authority and the creator by default.</p>
<p><a href="#id25"><span class="problematic" id="id26">``</span></a><a href="#id27"><span class="problematic" id="id28">`</span></a>tsx
import { Keypair } from “&#64;solana/web3.js”;</p>
<p>const currentAuthority = Keypair.generate();
const newAuthority = Keypair.generate();
const newFeeWithdrawalDestination = Keypair.generate();
const newTreasuryWithdrawalDestination = Keypair.generate();
const auctionHouse = await metaplex</p>
<blockquote>
<div><p>.auctionHouse()
.findByAddress({…});</p>
</div></blockquote>
<dl>
<dt>const updatedAuctionHouse = await metaplex</dt><dd><p>.auctionHouse()
.update({</p>
<blockquote>
<div><p>auctionHouse,
authority: currentAuthority,
newAuthority: newAuthority.address,
sellerFeeBasisPoints: 100,
requiresSignOff: true,
canChangeSalePrice: true,
feeWithdrawalDestination: newFeeWithdrawalDestination,
treasuryWithdrawalDestination: newTreasuryWithdrawalDestination</p>
</div></blockquote>
<p>});</p>
</dd>
</dl>
<p><a href="#id29"><span class="problematic" id="id30">``</span></a><a href="#id31"><span class="problematic" id="id32">`</span></a></p>
<p>&lt;/div&gt;
&lt;/AccordionItem&gt;
&lt;/Accordion&gt;</p>
<p>## Withdraw Funds</p>
<p>We have discussed in the previous page about the different helper accounts of Auction House. These are the <strong>Fee Account</strong> and the <strong>Treasury Account</strong>.</p>
<p>Funds from both these accounts can be transferred back to “destination” wallets. These withdrawal destination accounts can be set by the Auction House authority.</p>
<p>&lt;Accordion&gt;
&lt;AccordionItem title=”JS SDK” open={true}&gt;
&lt;div className=”accordion-item-padding”&gt;</p>
<p>Here’s a code snippet which transfers funds.</p>
<ol class="arabic simple">
<li><p>Auction House Fee Wallet to the Fee Withdrawal Destination Wallet.</p></li>
<li><p>Transfers funds from Auction House Treasury Wallet to the Treasury Withdrawal Destination Wallet.</p></li>
</ol>
<p>In both the cases, The Auction House from which the funds are being transferred and the amount of funds to withdrawn need to be specified. This amount can either be in SOL or in the SPL token used by the Auction House as a currency.</p>
<p><a href="#id33"><span class="problematic" id="id34">``</span></a><a href="#id35"><span class="problematic" id="id36">`</span></a>tsx
// withdraw funds from fee account
await metaplex</p>
<blockquote>
<div><p>.auctionHouse()
.withdrawFromFeeAccount({</p>
<blockquote>
<div><p>auctionHouse,
amount: 5</p>
</div></blockquote>
<p>});</p>
</div></blockquote>
<p>// withdraw funds from treasury account
await metaplex</p>
<blockquote>
<div><p>.auctionHouse()
.withdrawFromTreasuryAccount({</p>
<blockquote>
<div><p>auctionHouse,
amount: 10</p>
</div></blockquote>
<p>});</p>
</div></blockquote>
<p><a href="#id37"><span class="problematic" id="id38">``</span></a><a href="#id39"><span class="problematic" id="id40">`</span></a></p>
<p>&lt;/div&gt;
&lt;/AccordionItem&gt;
&lt;/Accordion&gt;</p>
<p>## Conclusion</p>
<p>At this point we’ve gone over the Auction House settings, the data an Auction House instance stores and how to create and update this data. However, we still don’t know how assets are traded on Auction Houses. We’ll talk about this in the [next page](/programs/auction-house/trading-assets-on-auction-house).</p>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">twit</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, jare.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../_sources/01-programs/03-auction-house/03-managing-auction-house.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>