<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>docs/static/katex/contrib/mhchem.min.js &#8212; twit  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b3523f8e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css?v=039e1c02" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js?v=b3ba4146"></script>
    <script src="../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="docs-static-katex-contrib-mhchem-min-js">
<h1>docs/static/katex/contrib/mhchem.min.js<a class="headerlink" href="#docs-static-katex-contrib-mhchem-min-js" title="Permalink to this heading">Â¶</a></h1>
<p>Last edited: 2023-08-11 21:38:33</p>
<p>Contents:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="o">!</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="s2">&quot;object&quot;</span><span class="o">==</span><span class="ow">typeof</span><span class="w"> </span><span class="nx">exports</span><span class="o">&amp;&amp;</span><span class="s2">&quot;object&quot;</span><span class="o">==</span><span class="ow">typeof</span><span class="w"> </span><span class="nx">module</span><span class="p">)</span><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="o">=</span><span class="nx">e</span><span class="p">(</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;katex&quot;</span><span class="p">));</span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="s2">&quot;function&quot;</span><span class="o">==</span><span class="ow">typeof</span><span class="w"> </span><span class="nx">define</span><span class="o">&amp;&amp;</span><span class="nx">define</span><span class="p">.</span><span class="nx">amd</span><span class="p">)</span><span class="nx">define</span><span class="p">([</span><span class="s2">&quot;katex&quot;</span><span class="p">],</span><span class="nx">e</span><span class="p">);</span><span class="k">else</span><span class="p">{</span><span class="kd">var</span><span class="w"> </span><span class="nx">n</span><span class="o">=</span><span class="s2">&quot;object&quot;</span><span class="o">==</span><span class="ow">typeof</span><span class="w"> </span><span class="nx">exports</span><span class="o">?</span><span class="nx">e</span><span class="p">(</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;katex&quot;</span><span class="p">))</span><span class="o">:</span><span class="nx">e</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">katex</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span><span class="w"> </span><span class="nx">o</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">n</span><span class="p">)(</span><span class="s2">&quot;object&quot;</span><span class="o">==</span><span class="ow">typeof</span><span class="w"> </span><span class="nx">exports</span><span class="o">?</span><span class="nx">exports</span><span class="o">:</span><span class="nx">t</span><span class="p">)[</span><span class="nx">o</span><span class="p">]</span><span class="o">=</span><span class="nx">n</span><span class="p">[</span><span class="nx">o</span><span class="p">]}}(</span><span class="s2">&quot;undefined&quot;</span><span class="o">!=</span><span class="ow">typeof</span><span class="w"> </span><span class="nx">self</span><span class="o">?</span><span class="nx">self</span><span class="o">:</span><span class="k">this</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="kd">var</span><span class="w"> </span><span class="nx">e</span><span class="o">=</span><span class="p">{};</span><span class="kd">function</span><span class="w"> </span><span class="nx">n</span><span class="p">(</span><span class="nx">o</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="nx">o</span><span class="p">])</span><span class="k">return</span><span class="w"> </span><span class="nx">e</span><span class="p">[</span><span class="nx">o</span><span class="p">].</span><span class="nx">exports</span><span class="p">;</span><span class="kd">var</span><span class="w"> </span><span class="nx">a</span><span class="o">=</span><span class="nx">e</span><span class="p">[</span><span class="nx">o</span><span class="p">]</span><span class="o">=</span><span class="p">{</span><span class="nx">i</span><span class="o">:</span><span class="nx">o</span><span class="p">,</span><span class="nx">l</span><span class="o">:!</span><span class="mf">1</span><span class="p">,</span><span class="nx">exports</span><span class="o">:</span><span class="p">{}};</span><span class="k">return</span><span class="w"> </span><span class="nx">t</span><span class="p">[</span><span class="nx">o</span><span class="p">].</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">exports</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">exports</span><span class="p">,</span><span class="nx">n</span><span class="p">),</span><span class="nx">a</span><span class="p">.</span><span class="nx">l</span><span class="o">=!</span><span class="mf">0</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">exports</span><span class="p">}</span><span class="k">return</span><span class="w"> </span><span class="nx">n</span><span class="p">.</span><span class="nx">m</span><span class="o">=</span><span class="nx">t</span><span class="p">,</span><span class="nx">n</span><span class="p">.</span><span class="nx">c</span><span class="o">=</span><span class="nx">e</span><span class="p">,</span><span class="nx">n</span><span class="p">.</span><span class="nx">d</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">o</span><span class="p">){</span><span class="nx">n</span><span class="p">.</span><span class="nx">o</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">)</span><span class="o">||</span><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">,{</span><span class="nx">enumerable</span><span class="o">:!</span><span class="mf">0</span><span class="p">,</span><span class="nx">get</span><span class="o">:</span><span class="nx">o</span><span class="p">})},</span><span class="nx">n</span><span class="p">.</span><span class="nx">r</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="s2">&quot;undefined&quot;</span><span class="o">!=</span><span class="ow">typeof</span><span class="w"> </span><span class="nb">Symbol</span><span class="o">&amp;&amp;</span><span class="nb">Symbol</span><span class="p">.</span><span class="nx">toStringTag</span><span class="o">&amp;&amp;</span><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nb">Symbol</span><span class="p">.</span><span class="nx">toStringTag</span><span class="p">,{</span><span class="nx">value</span><span class="o">:</span><span class="s2">&quot;Module&quot;</span><span class="p">}),</span><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="s2">&quot;__esModule&quot;</span><span class="p">,{</span><span class="nx">value</span><span class="o">:!</span><span class="mf">0</span><span class="p">})},</span><span class="nx">n</span><span class="p">.</span><span class="nx">t</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="mf">1</span><span class="o">&amp;</span><span class="nx">e</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">t</span><span class="o">=</span><span class="nx">n</span><span class="p">(</span><span class="nx">t</span><span class="p">)),</span><span class="mf">8</span><span class="o">&amp;</span><span class="nx">e</span><span class="p">)</span><span class="k">return</span><span class="w"> </span><span class="nx">t</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="mf">4</span><span class="o">&amp;</span><span class="nx">e</span><span class="o">&amp;&amp;</span><span class="s2">&quot;object&quot;</span><span class="o">==</span><span class="ow">typeof</span><span class="w"> </span><span class="nx">t</span><span class="o">&amp;&amp;</span><span class="nx">t</span><span class="o">&amp;&amp;</span><span class="nx">t</span><span class="p">.</span><span class="nx">__esModule</span><span class="p">)</span><span class="k">return</span><span class="w"> </span><span class="nx">t</span><span class="p">;</span><span class="kd">var</span><span class="w"> </span><span class="nx">o</span><span class="o">=</span><span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">n</span><span class="p">.</span><span class="nx">r</span><span class="p">(</span><span class="nx">o</span><span class="p">),</span><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="s2">&quot;default&quot;</span><span class="p">,{</span><span class="nx">enumerable</span><span class="o">:!</span><span class="mf">0</span><span class="p">,</span><span class="nx">value</span><span class="o">:</span><span class="nx">t</span><span class="p">}),</span><span class="mf">2</span><span class="o">&amp;</span><span class="nx">e</span><span class="o">&amp;&amp;</span><span class="s2">&quot;string&quot;</span><span class="o">!=</span><span class="ow">typeof</span><span class="w"> </span><span class="nx">t</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">t</span><span class="p">)</span><span class="nx">n</span><span class="p">.</span><span class="nx">d</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="nx">t</span><span class="p">[</span><span class="nx">e</span><span class="p">]}.</span><span class="nx">bind</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="nx">a</span><span class="p">));</span><span class="k">return</span><span class="w"> </span><span class="nx">o</span><span class="p">},</span><span class="nx">n</span><span class="p">.</span><span class="nx">n</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="kd">var</span><span class="w"> </span><span class="nx">e</span><span class="o">=</span><span class="nx">t</span><span class="o">&amp;&amp;</span><span class="nx">t</span><span class="p">.</span><span class="nx">__esModule</span><span class="o">?</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span><span class="w"> </span><span class="nx">t</span><span class="p">.</span><span class="k">default</span><span class="p">}</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span><span class="w"> </span><span class="nx">t</span><span class="p">};</span><span class="k">return</span><span class="w"> </span><span class="nx">n</span><span class="p">.</span><span class="nx">d</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="nx">e</span><span class="p">),</span><span class="nx">e</span><span class="p">},</span><span class="nx">n</span><span class="p">.</span><span class="nx">o</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">)},</span><span class="nx">n</span><span class="p">.</span><span class="nx">p</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">n</span><span class="p">(</span><span class="nx">n</span><span class="p">.</span><span class="nx">s</span><span class="o">=</span><span class="mf">1</span><span class="p">)}([</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">n</span><span class="p">){</span><span class="nx">e</span><span class="p">.</span><span class="nx">exports</span><span class="o">=</span><span class="nx">t</span><span class="p">},</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">n</span><span class="p">){</span><span class="s2">&quot;use strict&quot;</span><span class="p">;</span><span class="nx">n</span><span class="p">.</span><span class="nx">r</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span><span class="kd">var</span><span class="w"> </span><span class="nx">o</span><span class="o">=</span><span class="nx">n</span><span class="p">(</span><span class="mf">0</span><span class="p">),</span><span class="nx">a</span><span class="o">=</span><span class="nx">n</span><span class="p">.</span><span class="nx">n</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span><span class="nx">a</span><span class="p">.</span><span class="nx">a</span><span class="p">.</span><span class="nx">__defineMacro</span><span class="p">(</span><span class="s2">&quot;\\ce&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="nx">r</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">consumeArgs</span><span class="p">(</span><span class="mf">1</span><span class="p">)[</span><span class="mf">0</span><span class="p">],</span><span class="s2">&quot;ce&quot;</span><span class="p">)}),</span><span class="nx">a</span><span class="p">.</span><span class="nx">a</span><span class="p">.</span><span class="nx">__defineMacro</span><span class="p">(</span><span class="s2">&quot;\\pu&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="nx">r</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">consumeArgs</span><span class="p">(</span><span class="mf">1</span><span class="p">)[</span><span class="mf">0</span><span class="p">],</span><span class="s2">&quot;pu&quot;</span><span class="p">)}),</span><span class="nx">a</span><span class="p">.</span><span class="nx">a</span><span class="p">.</span><span class="nx">__defineMacro</span><span class="p">(</span><span class="s2">&quot;\\tripledash&quot;</span><span class="p">,</span><span class="s2">&quot;{\\vphantom{-}\\raisebox{2.56mu}{$\\mkern2mu\\tiny\\text{-}\\mkern1mu\\text{-}\\mkern1mu\\text{-}\\mkern2mu$}}&quot;</span><span class="p">);</span><span class="kd">var</span><span class="w"> </span><span class="nx">r</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span><span class="w"> </span><span class="nx">n</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">o</span><span class="o">=</span><span class="nx">t</span><span class="p">[</span><span class="nx">t</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mf">1</span><span class="p">].</span><span class="nx">loc</span><span class="p">.</span><span class="nx">start</span><span class="p">,</span><span class="nx">a</span><span class="o">=</span><span class="nx">t</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mf">1</span><span class="p">;</span><span class="nx">a</span><span class="o">&gt;=</span><span class="mf">0</span><span class="p">;</span><span class="nx">a</span><span class="o">--</span><span class="p">)</span><span class="nx">t</span><span class="p">[</span><span class="nx">a</span><span class="p">].</span><span class="nx">loc</span><span class="p">.</span><span class="nx">start</span><span class="o">&gt;</span><span class="nx">o</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">n</span><span class="o">+=</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="nx">o</span><span class="o">=</span><span class="nx">t</span><span class="p">[</span><span class="nx">a</span><span class="p">].</span><span class="nx">loc</span><span class="p">.</span><span class="nx">start</span><span class="p">),</span><span class="nx">n</span><span class="o">+=</span><span class="nx">t</span><span class="p">[</span><span class="nx">a</span><span class="p">].</span><span class="nx">text</span><span class="p">,</span><span class="nx">o</span><span class="o">+=</span><span class="nx">t</span><span class="p">[</span><span class="nx">a</span><span class="p">].</span><span class="nx">text</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="k">return</span><span class="w"> </span><span class="nx">c</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span><span class="nx">e</span><span class="p">))},</span><span class="nx">i</span><span class="o">=</span><span class="p">{</span><span class="nx">go</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">t</span><span class="p">)</span><span class="k">return</span><span class="p">[];</span><span class="ow">void</span><span class="w"> </span><span class="mf">0</span><span class="o">===</span><span class="nx">e</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;ce&quot;</span><span class="p">);</span><span class="kd">var</span><span class="w"> </span><span class="nx">n</span><span class="p">,</span><span class="nx">o</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="nx">a</span><span class="o">=</span><span class="p">{};</span><span class="nx">a</span><span class="p">.</span><span class="nx">parenthesisLevel</span><span class="o">=</span><span class="mf">0</span><span class="p">,</span><span class="nx">t</span><span class="o">=</span><span class="p">(</span><span class="nx">t</span><span class="o">=</span><span class="p">(</span><span class="nx">t</span><span class="o">=</span><span class="nx">t</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\n/g</span><span class="p">,</span><span class="s2">&quot; &quot;</span><span class="p">)).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/[\u2212\u2013\u2014\u2010]/g</span><span class="p">,</span><span class="s2">&quot;-&quot;</span><span class="p">)).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/[\u2026]/g</span><span class="p">,</span><span class="s2">&quot;...&quot;</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span><span class="w"> </span><span class="nx">r</span><span class="o">=</span><span class="mf">10</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="p">[];;){</span><span class="nx">n</span><span class="o">!==</span><span class="nx">t</span><span class="o">?</span><span class="p">(</span><span class="nx">r</span><span class="o">=</span><span class="mf">10</span><span class="p">,</span><span class="nx">n</span><span class="o">=</span><span class="nx">t</span><span class="p">)</span><span class="o">:</span><span class="nx">r</span><span class="o">--</span><span class="p">;</span><span class="kd">var</span><span class="w"> </span><span class="nx">u</span><span class="o">=</span><span class="nx">i</span><span class="p">.</span><span class="nx">stateMachines</span><span class="p">[</span><span class="nx">e</span><span class="p">],</span><span class="nx">p</span><span class="o">=</span><span class="nx">u</span><span class="p">.</span><span class="nx">transitions</span><span class="p">[</span><span class="nx">o</span><span class="p">]</span><span class="o">||</span><span class="nx">u</span><span class="p">.</span><span class="nx">transitions</span><span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">];</span><span class="nx">t</span><span class="o">:</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span><span class="w"> </span><span class="nx">s</span><span class="o">=</span><span class="mf">0</span><span class="p">;</span><span class="nx">s</span><span class="o">&lt;</span><span class="nx">p</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">s</span><span class="o">++</span><span class="p">){</span><span class="kd">var</span><span class="w"> </span><span class="nx">_</span><span class="o">=</span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">match_</span><span class="p">(</span><span class="nx">p</span><span class="p">[</span><span class="nx">s</span><span class="p">].</span><span class="nx">pattern</span><span class="p">,</span><span class="nx">t</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">_</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span><span class="w"> </span><span class="nx">d</span><span class="o">=</span><span class="nx">p</span><span class="p">[</span><span class="nx">s</span><span class="p">].</span><span class="nx">task</span><span class="p">,</span><span class="nx">m</span><span class="o">=</span><span class="mf">0</span><span class="p">;</span><span class="nx">m</span><span class="o">&lt;</span><span class="nx">d</span><span class="p">.</span><span class="nx">action_</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">m</span><span class="o">++</span><span class="p">){</span><span class="kd">var</span><span class="w"> </span><span class="nx">l</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">u</span><span class="p">.</span><span class="nx">actions</span><span class="p">[</span><span class="nx">d</span><span class="p">.</span><span class="nx">action_</span><span class="p">[</span><span class="nx">m</span><span class="p">].</span><span class="nx">type_</span><span class="p">])</span><span class="nx">l</span><span class="o">=</span><span class="nx">u</span><span class="p">.</span><span class="nx">actions</span><span class="p">[</span><span class="nx">d</span><span class="p">.</span><span class="nx">action_</span><span class="p">[</span><span class="nx">m</span><span class="p">].</span><span class="nx">type_</span><span class="p">](</span><span class="nx">a</span><span class="p">,</span><span class="nx">_</span><span class="p">.</span><span class="nx">match_</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">action_</span><span class="p">[</span><span class="nx">m</span><span class="p">].</span><span class="nx">option</span><span class="p">);</span><span class="k">else</span><span class="p">{</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">i</span><span class="p">.</span><span class="nx">actions</span><span class="p">[</span><span class="nx">d</span><span class="p">.</span><span class="nx">action_</span><span class="p">[</span><span class="nx">m</span><span class="p">].</span><span class="nx">type_</span><span class="p">])</span><span class="k">throw</span><span class="p">[</span><span class="s2">&quot;MhchemBugA&quot;</span><span class="p">,</span><span class="s2">&quot;mhchem bug A. Please report. (&quot;</span><span class="o">+</span><span class="nx">d</span><span class="p">.</span><span class="nx">action_</span><span class="p">[</span><span class="nx">m</span><span class="p">].</span><span class="nx">type_</span><span class="o">+</span><span class="s2">&quot;)&quot;</span><span class="p">];</span><span class="nx">l</span><span class="o">=</span><span class="nx">i</span><span class="p">.</span><span class="nx">actions</span><span class="p">[</span><span class="nx">d</span><span class="p">.</span><span class="nx">action_</span><span class="p">[</span><span class="nx">m</span><span class="p">].</span><span class="nx">type_</span><span class="p">](</span><span class="nx">a</span><span class="p">,</span><span class="nx">_</span><span class="p">.</span><span class="nx">match_</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">action_</span><span class="p">[</span><span class="nx">m</span><span class="p">].</span><span class="nx">option</span><span class="p">)}</span><span class="nx">i</span><span class="p">.</span><span class="nx">concatArray</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">l</span><span class="p">)}</span><span class="k">if</span><span class="p">(</span><span class="nx">o</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">nextState</span><span class="o">||</span><span class="nx">o</span><span class="p">,</span><span class="o">!</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">length</span><span class="o">&gt;</span><span class="mf">0</span><span class="p">))</span><span class="k">return</span><span class="w"> </span><span class="nx">c</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">revisit</span><span class="o">||</span><span class="p">(</span><span class="nx">t</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">remainder</span><span class="p">),</span><span class="o">!</span><span class="nx">d</span><span class="p">.</span><span class="nx">toContinue</span><span class="p">)</span><span class="k">break</span><span class="w"> </span><span class="nx">t</span><span class="p">}}</span><span class="k">if</span><span class="p">(</span><span class="nx">r</span><span class="o">&lt;=</span><span class="mf">0</span><span class="p">)</span><span class="k">throw</span><span class="p">[</span><span class="s2">&quot;MhchemBugU&quot;</span><span class="p">,</span><span class="s2">&quot;mhchem bug U. Please report.&quot;</span><span class="p">]}},</span><span class="nx">concatArray</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">e</span><span class="p">))</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span><span class="w"> </span><span class="nx">n</span><span class="o">=</span><span class="mf">0</span><span class="p">;</span><span class="nx">n</span><span class="o">&lt;</span><span class="nx">e</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">n</span><span class="o">++</span><span class="p">)</span><span class="nx">t</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="nx">n</span><span class="p">]);</span><span class="k">else</span><span class="w"> </span><span class="nx">t</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">e</span><span class="p">)},</span><span class="nx">patterns</span><span class="o">:</span><span class="p">{</span><span class="nx">patterns</span><span class="o">:</span><span class="p">{</span><span class="nx">empty</span><span class="o">:</span><span class="sr">/^$/</span><span class="p">,</span><span class="k">else</span><span class="o">:</span><span class="sr">/^./</span><span class="p">,</span><span class="nx">else2</span><span class="o">:</span><span class="sr">/^./</span><span class="p">,</span><span class="nx">space</span><span class="o">:</span><span class="sr">/^\s/</span><span class="p">,</span><span class="s2">&quot;space A&quot;</span><span class="o">:</span><span class="sr">/^\s(?=[A-Z\\$])/</span><span class="p">,</span><span class="nx">space$</span><span class="o">:</span><span class="sr">/^\s$/</span><span class="p">,</span><span class="s2">&quot;a-z&quot;</span><span class="o">:</span><span class="sr">/^[a-z]/</span><span class="p">,</span><span class="nx">x</span><span class="o">:</span><span class="sr">/^x/</span><span class="p">,</span><span class="nx">x$</span><span class="o">:</span><span class="sr">/^x$/</span><span class="p">,</span><span class="nx">i$</span><span class="o">:</span><span class="sr">/^i$/</span><span class="p">,</span><span class="nx">letters</span><span class="o">:</span><span class="sr">/^(?:[a-zA-Z\u03B1-\u03C9\u0391-\u03A9?@]|(?:\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))))+/</span><span class="p">,</span><span class="s2">&quot;\\greek&quot;</span><span class="o">:</span><span class="sr">/^\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))/</span><span class="p">,</span><span class="s2">&quot;one lowercase latin letter $&quot;</span><span class="o">:</span><span class="sr">/^(?:([a-z])(?:$|[^a-zA-Z]))$/</span><span class="p">,</span><span class="s2">&quot;$one lowercase latin letter$ $&quot;</span><span class="o">:</span><span class="sr">/^\$(?:([a-z])(?:$|[^a-zA-Z]))\$$/</span><span class="p">,</span><span class="s2">&quot;one lowercase greek letter $&quot;</span><span class="o">:</span><span class="sr">/^(?:\$?[\u03B1-\u03C9]\$?|\$?\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega)\s*\$?)(?:\s+|\{\}|(?![a-zA-Z]))$/</span><span class="p">,</span><span class="nx">digits</span><span class="o">:</span><span class="sr">/^[0-9]+/</span><span class="p">,</span><span class="s2">&quot;-9.,9&quot;</span><span class="o">:</span><span class="sr">/^[+\-]?(?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))/</span><span class="p">,</span><span class="s2">&quot;-9.,9 no missing 0&quot;</span><span class="o">:</span><span class="sr">/^[+\-]?[0-9]+(?:[.,][0-9]+)?/</span><span class="p">,</span><span class="s2">&quot;(-)(9.,9)(e)(99)&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="kd">var</span><span class="w"> </span><span class="nx">e</span><span class="o">=</span><span class="nx">t</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))?(\((?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))\))?(?:([eE]|\s*(\*|x|\\times|\u00D7)\s*10\^)([+\-]?[0-9]+|\{[+\-]?[0-9]+\}))?/</span><span class="p">);</span><span class="k">return</span><span class="w"> </span><span class="nx">e</span><span class="o">&amp;&amp;</span><span class="nx">e</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">?</span><span class="p">{</span><span class="nx">match_</span><span class="o">:</span><span class="nx">e</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="mf">1</span><span class="p">),</span><span class="nx">remainder</span><span class="o">:</span><span class="nx">t</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="mf">0</span><span class="p">].</span><span class="nx">length</span><span class="p">)}</span><span class="o">:</span><span class="kc">null</span><span class="p">},</span><span class="s2">&quot;(-)(9)^(-9)&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="kd">var</span><span class="w"> </span><span class="nx">e</span><span class="o">=</span><span class="nx">t</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+)?)\^([+\-]?[0-9]+|\{[+\-]?[0-9]+\})/</span><span class="p">);</span><span class="k">return</span><span class="w"> </span><span class="nx">e</span><span class="o">&amp;&amp;</span><span class="nx">e</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">?</span><span class="p">{</span><span class="nx">match_</span><span class="o">:</span><span class="nx">e</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="mf">1</span><span class="p">),</span><span class="nx">remainder</span><span class="o">:</span><span class="nx">t</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="mf">0</span><span class="p">].</span><span class="nx">length</span><span class="p">)}</span><span class="o">:</span><span class="kc">null</span><span class="p">},</span><span class="s2">&quot;state of aggregation $&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="kd">var</span><span class="w"> </span><span class="nx">e</span><span class="o">=</span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">findObserveGroups</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="sr">/^\([a-z]{1,3}(?=[\),])/</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="o">&amp;&amp;</span><span class="nx">e</span><span class="p">.</span><span class="nx">remainder</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^($|[\s,;\)\]\}])/</span><span class="p">))</span><span class="k">return</span><span class="w"> </span><span class="nx">e</span><span class="p">;</span><span class="kd">var</span><span class="w"> </span><span class="nx">n</span><span class="o">=</span><span class="nx">t</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^(?:\((?:\\ca\s?)?\$[amothc]\$\))/</span><span class="p">);</span><span class="k">return</span><span class="w"> </span><span class="nx">n</span><span class="o">?</span><span class="p">{</span><span class="nx">match_</span><span class="o">:</span><span class="nx">n</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span><span class="nx">remainder</span><span class="o">:</span><span class="nx">t</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">n</span><span class="p">[</span><span class="mf">0</span><span class="p">].</span><span class="nx">length</span><span class="p">)}</span><span class="o">:</span><span class="kc">null</span><span class="p">},</span><span class="s2">&quot;_{(state of aggregation)}$&quot;</span><span class="o">:</span><span class="sr">/^_\{(\([a-z]{1,3}\))\}/</span><span class="p">,</span><span class="s2">&quot;{[(&quot;</span><span class="o">:</span><span class="sr">/^(?:\\\{|\[|\()/</span><span class="p">,</span><span class="s2">&quot;)]}&quot;</span><span class="o">:</span><span class="sr">/^(?:\)|\]|\\\})/</span><span class="p">,</span><span class="s2">&quot;, &quot;</span><span class="o">:</span><span class="sr">/^[,;]\s*/</span><span class="p">,</span><span class="s2">&quot;,&quot;</span><span class="o">:</span><span class="sr">/^[,;]/</span><span class="p">,</span><span class="s2">&quot;.&quot;</span><span class="o">:</span><span class="sr">/^[.]/</span><span class="p">,</span><span class="s2">&quot;. &quot;</span><span class="o">:</span><span class="sr">/^([.\u22C5\u00B7\u2022])\s*/</span><span class="p">,</span><span class="s2">&quot;...&quot;</span><span class="o">:</span><span class="sr">/^\.\.\.(?=$|[^.])/</span><span class="p">,</span><span class="s2">&quot;* &quot;</span><span class="o">:</span><span class="sr">/^([*])\s*/</span><span class="p">,</span><span class="s2">&quot;^{(...)}&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">findObserveGroups</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="s2">&quot;^{&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;}&quot;</span><span class="p">)},</span><span class="s2">&quot;^($...$)&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">findObserveGroups</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="s2">&quot;^&quot;</span><span class="p">,</span><span class="s2">&quot;$&quot;</span><span class="p">,</span><span class="s2">&quot;$&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)},</span><span class="s2">&quot;^a&quot;</span><span class="o">:</span><span class="sr">/^\^([0-9]+|[^\\_])/</span><span class="p">,</span><span class="s2">&quot;^\\x{}{}&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">findObserveGroups</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="s2">&quot;^&quot;</span><span class="p">,</span><span class="sr">/^\\[a-zA-Z]+\{/</span><span class="p">,</span><span class="s2">&quot;}&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;{&quot;</span><span class="p">,</span><span class="s2">&quot;}&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="o">!</span><span class="mf">0</span><span class="p">)},</span><span class="s2">&quot;^\\x{}&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">findObserveGroups</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="s2">&quot;^&quot;</span><span class="p">,</span><span class="sr">/^\\[a-zA-Z]+\{/</span><span class="p">,</span><span class="s2">&quot;}&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)},</span><span class="s2">&quot;^\\x&quot;</span><span class="o">:</span><span class="sr">/^\^(\\[a-zA-Z]+)\s*/</span><span class="p">,</span><span class="s2">&quot;^(-1)&quot;</span><span class="o">:</span><span class="sr">/^\^(-?\d+)/</span><span class="p">,</span><span class="s2">&quot;&#39;&quot;</span><span class="o">:</span><span class="sr">/^&#39;/</span><span class="p">,</span><span class="s2">&quot;_{(...)}&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">findObserveGroups</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="s2">&quot;_{&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;}&quot;</span><span class="p">)},</span><span class="s2">&quot;_($...$)&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">findObserveGroups</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="s2">&quot;_&quot;</span><span class="p">,</span><span class="s2">&quot;$&quot;</span><span class="p">,</span><span class="s2">&quot;$&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)},</span><span class="nx">_9</span><span class="o">:</span><span class="sr">/^_([+\-]?[0-9]+|[^\\])/</span><span class="p">,</span><span class="s2">&quot;_\\x{}{}&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">findObserveGroups</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="s2">&quot;_&quot;</span><span class="p">,</span><span class="sr">/^\\[a-zA-Z]+\{/</span><span class="p">,</span><span class="s2">&quot;}&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;{&quot;</span><span class="p">,</span><span class="s2">&quot;}&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="o">!</span><span class="mf">0</span><span class="p">)},</span><span class="s2">&quot;_\\x{}&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">findObserveGroups</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="s2">&quot;_&quot;</span><span class="p">,</span><span class="sr">/^\\[a-zA-Z]+\{/</span><span class="p">,</span><span class="s2">&quot;}&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)},</span><span class="s2">&quot;_\\x&quot;</span><span class="o">:</span><span class="sr">/^_(\\[a-zA-Z]+)\s*/</span><span class="p">,</span><span class="s2">&quot;^_&quot;</span><span class="o">:</span><span class="sr">/^(?:\^(?=_)|\_(?=\^)|[\^_]$)/</span><span class="p">,</span><span class="s2">&quot;{}&quot;</span><span class="o">:</span><span class="sr">/^\{\}/</span><span class="p">,</span><span class="s2">&quot;{...}&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">findObserveGroups</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;{&quot;</span><span class="p">,</span><span class="s2">&quot;}&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)},</span><span class="s2">&quot;{(...)}&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">findObserveGroups</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="s2">&quot;{&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;}&quot;</span><span class="p">)},</span><span class="s2">&quot;$...$&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">findObserveGroups</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;$&quot;</span><span class="p">,</span><span class="s2">&quot;$&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)},</span><span class="s2">&quot;${(...)}$&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">findObserveGroups</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="s2">&quot;${&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;}$&quot;</span><span class="p">)},</span><span class="s2">&quot;$(...)$&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">findObserveGroups</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="s2">&quot;$&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;$&quot;</span><span class="p">)},</span><span class="s2">&quot;=&lt;&gt;&quot;</span><span class="o">:</span><span class="sr">/^[=&lt;&gt;]/</span><span class="p">,</span><span class="s2">&quot;#&quot;</span><span class="o">:</span><span class="sr">/^[#\u2261]/</span><span class="p">,</span><span class="s2">&quot;+&quot;</span><span class="o">:</span><span class="sr">/^\+/</span><span class="p">,</span><span class="s2">&quot;-$&quot;</span><span class="o">:</span><span class="sr">/^-(?=[\s_},;\]/]|$|\([a-z]+\))/</span><span class="p">,</span><span class="s2">&quot;-9&quot;</span><span class="o">:</span><span class="sr">/^-(?=[0-9])/</span><span class="p">,</span><span class="s2">&quot;- orbital overlap&quot;</span><span class="o">:</span><span class="sr">/^-(?=(?:[spd]|sp)(?:$|[\s,;\)\]\}]))/</span><span class="p">,</span><span class="s2">&quot;-&quot;</span><span class="o">:</span><span class="sr">/^-/</span><span class="p">,</span><span class="s2">&quot;pm-operator&quot;</span><span class="o">:</span><span class="sr">/^(?:\\pm|\$\\pm\$|\+-|\+\/-)/</span><span class="p">,</span><span class="nx">operator</span><span class="o">:</span><span class="sr">/^(?:\+|(?:[\-=&lt;&gt;]|&lt;&lt;|&gt;&gt;|\\approx|\$\\approx\$)(?=\s|$|-?[0-9]))/</span><span class="p">,</span><span class="nx">arrowUpDown</span><span class="o">:</span><span class="sr">/^(?:v|\(v\)|\^|\(\^\))(?=$|[\s,;\)\]\}])/</span><span class="p">,</span><span class="s2">&quot;\\bond{(...)}&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">findObserveGroups</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="s2">&quot;\\bond{&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;}&quot;</span><span class="p">)},</span><span class="s2">&quot;-&gt;&quot;</span><span class="o">:</span><span class="sr">/^(?:&lt;-&gt;|&lt;--&gt;|-&gt;|&lt;-|&lt;=&gt;&gt;|&lt;&lt;=&gt;|&lt;=&gt;|[\u2192\u27F6\u21CC])/</span><span class="p">,</span><span class="nx">CMT</span><span class="o">:</span><span class="sr">/^[CMT](?=\[)/</span><span class="p">,</span><span class="s2">&quot;[(...)]&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">findObserveGroups</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="s2">&quot;[&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;]&quot;</span><span class="p">)},</span><span class="s2">&quot;1st-level escape&quot;</span><span class="o">:</span><span class="sr">/^(&amp;|\\\\|\\hline)\s*/</span><span class="p">,</span><span class="s2">&quot;\\,&quot;</span><span class="o">:</span><span class="sr">/^(?:\\[,\ ;:])/</span><span class="p">,</span><span class="s2">&quot;\\x{}{}&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">findObserveGroups</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="sr">/^\\[a-zA-Z]+\{/</span><span class="p">,</span><span class="s2">&quot;}&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;{&quot;</span><span class="p">,</span><span class="s2">&quot;}&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="o">!</span><span class="mf">0</span><span class="p">)},</span><span class="s2">&quot;\\x{}&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">findObserveGroups</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="sr">/^\\[a-zA-Z]+\{/</span><span class="p">,</span><span class="s2">&quot;}&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)},</span><span class="s2">&quot;\\ca&quot;</span><span class="o">:</span><span class="sr">/^\\ca(?:\s+|(?![a-zA-Z]))/</span><span class="p">,</span><span class="s2">&quot;\\x&quot;</span><span class="o">:</span><span class="sr">/^(?:\\[a-zA-Z]+\s*|\\[_&amp;{}%])/</span><span class="p">,</span><span class="nx">orbital</span><span class="o">:</span><span class="sr">/^(?:[0-9]{1,2}[spdfgh]|[0-9]{0,2}sp)(?=$|[^a-zA-Z])/</span><span class="p">,</span><span class="nx">others</span><span class="o">:</span><span class="sr">/^[\/~|]/</span><span class="p">,</span><span class="s2">&quot;\\frac{(...)}&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">findObserveGroups</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="s2">&quot;\\frac{&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;}&quot;</span><span class="p">,</span><span class="s2">&quot;{&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;}&quot;</span><span class="p">)},</span><span class="s2">&quot;\\overset{(...)}&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">findObserveGroups</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="s2">&quot;\\overset{&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;}&quot;</span><span class="p">,</span><span class="s2">&quot;{&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;}&quot;</span><span class="p">)},</span><span class="s2">&quot;\\underset{(...)}&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">findObserveGroups</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="s2">&quot;\\underset{&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;}&quot;</span><span class="p">,</span><span class="s2">&quot;{&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;}&quot;</span><span class="p">)},</span><span class="s2">&quot;\\underbrace{(...)}&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">findObserveGroups</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="s2">&quot;\\underbrace{&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;}_&quot;</span><span class="p">,</span><span class="s2">&quot;{&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;}&quot;</span><span class="p">)},</span><span class="s2">&quot;\\color{(...)}0&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">findObserveGroups</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="s2">&quot;\\color{&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;}&quot;</span><span class="p">)},</span><span class="s2">&quot;\\color{(...)}{(...)}1&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">findObserveGroups</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="s2">&quot;\\color{&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;}&quot;</span><span class="p">,</span><span class="s2">&quot;{&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;}&quot;</span><span class="p">)},</span><span class="s2">&quot;\\color(...){(...)}2&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">findObserveGroups</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="s2">&quot;\\color&quot;</span><span class="p">,</span><span class="s2">&quot;\\&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="sr">/^(?=\{)/</span><span class="p">,</span><span class="s2">&quot;{&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;}&quot;</span><span class="p">)},</span><span class="s2">&quot;\\ce{(...)}&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">findObserveGroups</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="s2">&quot;\\ce{&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;}&quot;</span><span class="p">)},</span><span class="nx">oxidation$</span><span class="o">:</span><span class="sr">/^(?:[+-][IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/</span><span class="p">,</span><span class="s2">&quot;d-oxidation$&quot;</span><span class="o">:</span><span class="sr">/^(?:[+-]?\s?[IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/</span><span class="p">,</span><span class="s2">&quot;roman numeral&quot;</span><span class="o">:</span><span class="sr">/^[IVX]+/</span><span class="p">,</span><span class="s2">&quot;1/2$&quot;</span><span class="o">:</span><span class="sr">/^[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+(?:\$[a-z]\$|[a-z])?$/</span><span class="p">,</span><span class="nx">amount</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="kd">var</span><span class="w"> </span><span class="nx">e</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="o">=</span><span class="nx">t</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^(?:(?:(?:\([+\-]?[0-9]+\/[0-9]+\)|[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+|[+\-]?[0-9]+[.,][0-9]+|[+\-]?\.[0-9]+|[+\-]?[0-9]+)(?:[a-z](?=\s*[A-Z]))?)|[+\-]?[a-z](?=\s*[A-Z])|\+(?!\s))/</span><span class="p">))</span><span class="k">return</span><span class="p">{</span><span class="nx">match_</span><span class="o">:</span><span class="nx">e</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span><span class="nx">remainder</span><span class="o">:</span><span class="nx">t</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="mf">0</span><span class="p">].</span><span class="nx">length</span><span class="p">)};</span><span class="kd">var</span><span class="w"> </span><span class="nx">n</span><span class="o">=</span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">findObserveGroups</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;$&quot;</span><span class="p">,</span><span class="s2">&quot;$&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">);</span><span class="k">return</span><span class="w"> </span><span class="nx">n</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="o">=</span><span class="nx">n</span><span class="p">.</span><span class="nx">match_</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^\$(?:\(?[+\-]?(?:[0-9]*[a-z]?[+\-])?[0-9]*[a-z](?:[+\-][0-9]*[a-z]?)?\)?|\+|-)\$$/</span><span class="p">))</span><span class="o">?</span><span class="p">{</span><span class="nx">match_</span><span class="o">:</span><span class="nx">e</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span><span class="nx">remainder</span><span class="o">:</span><span class="nx">t</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="mf">0</span><span class="p">].</span><span class="nx">length</span><span class="p">)}</span><span class="o">:</span><span class="kc">null</span><span class="p">},</span><span class="nx">amount2</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">amount</span><span class="p">(</span><span class="nx">t</span><span class="p">)},</span><span class="s2">&quot;(KV letters),&quot;</span><span class="o">:</span><span class="sr">/^(?:[A-Z][a-z]{0,2}|i)(?=,)/</span><span class="p">,</span><span class="nx">formula$</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^\([a-z]+\)$/</span><span class="p">))</span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span><span class="kd">var</span><span class="w"> </span><span class="nx">e</span><span class="o">=</span><span class="nx">t</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^(?:[a-z]|(?:[0-9\ \+\-\,\.\(\)]+[a-z])+[0-9\ \+\-\,\.\(\)]*|(?:[a-z][0-9\ \+\-\,\.\(\)]+)+[a-z]?)$/</span><span class="p">);</span><span class="k">return</span><span class="w"> </span><span class="nx">e</span><span class="o">?</span><span class="p">{</span><span class="nx">match_</span><span class="o">:</span><span class="nx">e</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span><span class="nx">remainder</span><span class="o">:</span><span class="nx">t</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="mf">0</span><span class="p">].</span><span class="nx">length</span><span class="p">)}</span><span class="o">:</span><span class="kc">null</span><span class="p">},</span><span class="nx">uprightEntities</span><span class="o">:</span><span class="sr">/^(?:pH|pOH|pC|pK|iPr|iBu)(?=$|[^a-zA-Z])/</span><span class="p">,</span><span class="s2">&quot;/&quot;</span><span class="o">:</span><span class="sr">/^\s*(\/)\s*/</span><span class="p">,</span><span class="s2">&quot;//&quot;</span><span class="o">:</span><span class="sr">/^\s*(\/\/)\s*/</span><span class="p">,</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="sr">/^\s*[*.]\s*/</span><span class="p">},</span><span class="nx">findObserveGroups</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">n</span><span class="p">,</span><span class="nx">o</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">r</span><span class="p">,</span><span class="nx">i</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">u</span><span class="p">,</span><span class="nx">p</span><span class="p">){</span><span class="kd">var</span><span class="w"> </span><span class="nx">s</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="s2">&quot;string&quot;</span><span class="o">==</span><span class="ow">typeof</span><span class="w"> </span><span class="nx">e</span><span class="p">)</span><span class="k">return</span><span class="w"> </span><span class="mf">0</span><span class="o">!==</span><span class="nx">t</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="o">?</span><span class="kc">null</span><span class="o">:</span><span class="nx">e</span><span class="p">;</span><span class="kd">var</span><span class="w"> </span><span class="nx">n</span><span class="o">=</span><span class="nx">t</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span><span class="k">return</span><span class="w"> </span><span class="nx">n</span><span class="o">?</span><span class="nx">n</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">:</span><span class="kc">null</span><span class="p">},</span><span class="nx">_</span><span class="o">=</span><span class="nx">s</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="kc">null</span><span class="o">===</span><span class="nx">_</span><span class="p">)</span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">t</span><span class="o">=</span><span class="nx">t</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">length</span><span class="p">),</span><span class="kc">null</span><span class="o">===</span><span class="p">(</span><span class="nx">_</span><span class="o">=</span><span class="nx">s</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">n</span><span class="p">)))</span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span><span class="kd">var</span><span class="w"> </span><span class="nx">d</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">n</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span><span class="w"> </span><span class="nx">o</span><span class="o">=</span><span class="mf">0</span><span class="p">;</span><span class="nx">e</span><span class="o">&lt;</span><span class="nx">t</span><span class="p">.</span><span class="nx">length</span><span class="p">;){</span><span class="kd">var</span><span class="w"> </span><span class="nx">a</span><span class="o">=</span><span class="nx">t</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">e</span><span class="p">),</span><span class="nx">r</span><span class="o">=</span><span class="nx">s</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">e</span><span class="p">),</span><span class="nx">n</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="kc">null</span><span class="o">!==</span><span class="nx">r</span><span class="o">&amp;&amp;</span><span class="mf">0</span><span class="o">===</span><span class="nx">o</span><span class="p">)</span><span class="k">return</span><span class="p">{</span><span class="nx">endMatchBegin</span><span class="o">:</span><span class="nx">e</span><span class="p">,</span><span class="nx">endMatchEnd</span><span class="o">:</span><span class="nx">e</span><span class="o">+</span><span class="nx">r</span><span class="p">.</span><span class="nx">length</span><span class="p">};</span><span class="k">if</span><span class="p">(</span><span class="s2">&quot;{&quot;</span><span class="o">===</span><span class="nx">a</span><span class="p">)</span><span class="nx">o</span><span class="o">++</span><span class="p">;</span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="s2">&quot;}&quot;</span><span class="o">===</span><span class="nx">a</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="mf">0</span><span class="o">===</span><span class="nx">o</span><span class="p">)</span><span class="k">throw</span><span class="p">[</span><span class="s2">&quot;ExtraCloseMissingOpen&quot;</span><span class="p">,</span><span class="s2">&quot;Extra close brace or missing open brace&quot;</span><span class="p">];</span><span class="nx">o</span><span class="o">--</span><span class="p">}</span><span class="nx">e</span><span class="o">++</span><span class="p">}</span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">}(</span><span class="nx">t</span><span class="p">,</span><span class="nx">_</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span><span class="nx">o</span><span class="o">||</span><span class="nx">a</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="kc">null</span><span class="o">===</span><span class="nx">d</span><span class="p">)</span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span><span class="kd">var</span><span class="w"> </span><span class="nx">m</span><span class="o">=</span><span class="nx">t</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="nx">o</span><span class="o">?</span><span class="nx">d</span><span class="p">.</span><span class="nx">endMatchEnd</span><span class="o">:</span><span class="nx">d</span><span class="p">.</span><span class="nx">endMatchBegin</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">r</span><span class="o">||</span><span class="nx">i</span><span class="p">){</span><span class="kd">var</span><span class="w"> </span><span class="nx">l</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">findObserveGroups</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">endMatchEnd</span><span class="p">),</span><span class="nx">r</span><span class="p">,</span><span class="nx">i</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">u</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="kc">null</span><span class="o">===</span><span class="nx">l</span><span class="p">)</span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span><span class="kd">var</span><span class="w"> </span><span class="nx">f</span><span class="o">=</span><span class="p">[</span><span class="nx">m</span><span class="p">,</span><span class="nx">l</span><span class="p">.</span><span class="nx">match_</span><span class="p">];</span><span class="k">return</span><span class="p">{</span><span class="nx">match_</span><span class="o">:</span><span class="nx">p</span><span class="o">?</span><span class="nx">f</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">:</span><span class="nx">f</span><span class="p">,</span><span class="nx">remainder</span><span class="o">:</span><span class="nx">l</span><span class="p">.</span><span class="nx">remainder</span><span class="p">}}</span><span class="k">return</span><span class="p">{</span><span class="nx">match_</span><span class="o">:</span><span class="nx">m</span><span class="p">,</span><span class="nx">remainder</span><span class="o">:</span><span class="nx">t</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">endMatchEnd</span><span class="p">)}},</span><span class="nx">match_</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="kd">var</span><span class="w"> </span><span class="nx">n</span><span class="o">=</span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">patterns</span><span class="p">[</span><span class="nx">t</span><span class="p">];</span><span class="k">if</span><span class="p">(</span><span class="ow">void</span><span class="w"> </span><span class="mf">0</span><span class="o">===</span><span class="nx">n</span><span class="p">)</span><span class="k">throw</span><span class="p">[</span><span class="s2">&quot;MhchemBugP&quot;</span><span class="p">,</span><span class="s2">&quot;mhchem bug P. Please report. (&quot;</span><span class="o">+</span><span class="nx">t</span><span class="o">+</span><span class="s2">&quot;)&quot;</span><span class="p">];</span><span class="k">if</span><span class="p">(</span><span class="s2">&quot;function&quot;</span><span class="o">==</span><span class="ow">typeof</span><span class="w"> </span><span class="nx">n</span><span class="p">)</span><span class="k">return</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">patterns</span><span class="p">[</span><span class="nx">t</span><span class="p">](</span><span class="nx">e</span><span class="p">);</span><span class="kd">var</span><span class="w"> </span><span class="nx">o</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">n</span><span class="p">);</span><span class="k">return</span><span class="w"> </span><span class="nx">o</span><span class="o">?</span><span class="p">{</span><span class="nx">match_</span><span class="o">:</span><span class="nx">o</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span><span class="o">?</span><span class="p">[</span><span class="nx">o</span><span class="p">[</span><span class="mf">1</span><span class="p">],</span><span class="nx">o</span><span class="p">[</span><span class="mf">2</span><span class="p">]]</span><span class="o">:</span><span class="nx">o</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="o">?</span><span class="nx">o</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="o">:</span><span class="nx">o</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span><span class="nx">remainder</span><span class="o">:</span><span class="nx">e</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">o</span><span class="p">[</span><span class="mf">0</span><span class="p">].</span><span class="nx">length</span><span class="p">)}</span><span class="o">:</span><span class="kc">null</span><span class="p">}},</span><span class="nx">actions</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;a=&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="nx">t</span><span class="p">.</span><span class="nx">a</span><span class="o">=</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">a</span><span class="o">||</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">+</span><span class="nx">e</span><span class="p">},</span><span class="s2">&quot;b=&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="nx">t</span><span class="p">.</span><span class="nx">b</span><span class="o">=</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">b</span><span class="o">||</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">+</span><span class="nx">e</span><span class="p">},</span><span class="s2">&quot;p=&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="nx">t</span><span class="p">.</span><span class="nx">p</span><span class="o">=</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">p</span><span class="o">||</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">+</span><span class="nx">e</span><span class="p">},</span><span class="s2">&quot;o=&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="nx">t</span><span class="p">.</span><span class="nx">o</span><span class="o">=</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">o</span><span class="o">||</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">+</span><span class="nx">e</span><span class="p">},</span><span class="s2">&quot;q=&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="nx">t</span><span class="p">.</span><span class="nx">q</span><span class="o">=</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">q</span><span class="o">||</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">+</span><span class="nx">e</span><span class="p">},</span><span class="s2">&quot;d=&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="nx">t</span><span class="p">.</span><span class="nx">d</span><span class="o">=</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">d</span><span class="o">||</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">+</span><span class="nx">e</span><span class="p">},</span><span class="s2">&quot;rm=&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="nx">t</span><span class="p">.</span><span class="nx">rm</span><span class="o">=</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">rm</span><span class="o">||</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">+</span><span class="nx">e</span><span class="p">},</span><span class="s2">&quot;text=&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="nx">t</span><span class="p">.</span><span class="nx">text_</span><span class="o">=</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">text_</span><span class="o">||</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">+</span><span class="nx">e</span><span class="p">},</span><span class="nx">insert</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">n</span><span class="p">){</span><span class="k">return</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="nx">n</span><span class="p">}},</span><span class="s2">&quot;insert+p1&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">n</span><span class="p">){</span><span class="k">return</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="nx">n</span><span class="p">,</span><span class="nx">p1</span><span class="o">:</span><span class="nx">e</span><span class="p">}},</span><span class="s2">&quot;insert+p1+p2&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">n</span><span class="p">){</span><span class="k">return</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="nx">n</span><span class="p">,</span><span class="nx">p1</span><span class="o">:</span><span class="nx">e</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span><span class="nx">p2</span><span class="o">:</span><span class="nx">e</span><span class="p">[</span><span class="mf">1</span><span class="p">]}},</span><span class="nx">copy</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="nx">e</span><span class="p">},</span><span class="nx">rm</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="k">return</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;rm&quot;</span><span class="p">,</span><span class="nx">p1</span><span class="o">:</span><span class="nx">e</span><span class="o">||</span><span class="s2">&quot;&quot;</span><span class="p">}},</span><span class="nx">text</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="s2">&quot;text&quot;</span><span class="p">)},</span><span class="s2">&quot;{text}&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="kd">var</span><span class="w"> </span><span class="nx">n</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;{&quot;</span><span class="p">];</span><span class="k">return</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">concatArray</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="s2">&quot;text&quot;</span><span class="p">)),</span><span class="nx">n</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;}&quot;</span><span class="p">),</span><span class="nx">n</span><span class="p">},</span><span class="s2">&quot;tex-math&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="s2">&quot;tex-math&quot;</span><span class="p">)},</span><span class="s2">&quot;tex-math tight&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="s2">&quot;tex-math tight&quot;</span><span class="p">)},</span><span class="nx">bond</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">n</span><span class="p">){</span><span class="k">return</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;bond&quot;</span><span class="p">,</span><span class="nx">kind_</span><span class="o">:</span><span class="nx">n</span><span class="o">||</span><span class="nx">e</span><span class="p">}},</span><span class="s2">&quot;color0-output&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="k">return</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;color0&quot;</span><span class="p">,</span><span class="nx">color</span><span class="o">:</span><span class="nx">e</span><span class="p">[</span><span class="mf">0</span><span class="p">]}},</span><span class="nx">ce</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">e</span><span class="p">)},</span><span class="s2">&quot;1/2&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="kd">var</span><span class="w"> </span><span class="nx">n</span><span class="o">=</span><span class="p">[];</span><span class="nx">e</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^[+\-]/</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">n</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="mf">1</span><span class="p">)),</span><span class="nx">e</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="mf">1</span><span class="p">));</span><span class="kd">var</span><span class="w"> </span><span class="nx">o</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^([0-9]+|\$[a-z]\$|[a-z])\/([0-9]+)(\$[a-z]\$|[a-z])?$/</span><span class="p">);</span><span class="k">return</span><span class="w"> </span><span class="nx">o</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="o">=</span><span class="nx">o</span><span class="p">[</span><span class="mf">1</span><span class="p">].</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\$/g</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">),</span><span class="nx">n</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;frac&quot;</span><span class="p">,</span><span class="nx">p1</span><span class="o">:</span><span class="nx">o</span><span class="p">[</span><span class="mf">1</span><span class="p">],</span><span class="nx">p2</span><span class="o">:</span><span class="nx">o</span><span class="p">[</span><span class="mf">2</span><span class="p">]}),</span><span class="nx">o</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">o</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span><span class="o">=</span><span class="nx">o</span><span class="p">[</span><span class="mf">3</span><span class="p">].</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\$/g</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">),</span><span class="nx">n</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;tex-math&quot;</span><span class="p">,</span><span class="nx">p1</span><span class="o">:</span><span class="nx">o</span><span class="p">[</span><span class="mf">3</span><span class="p">]})),</span><span class="nx">n</span><span class="p">},</span><span class="s2">&quot;9,9&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="s2">&quot;9,9&quot;</span><span class="p">)}},</span><span class="nx">createTransitions</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="kd">var</span><span class="w"> </span><span class="nx">e</span><span class="p">,</span><span class="nx">n</span><span class="p">,</span><span class="nx">o</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">r</span><span class="o">=</span><span class="p">{};</span><span class="k">for</span><span class="p">(</span><span class="nx">e</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">t</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="nx">n</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">t</span><span class="p">[</span><span class="nx">e</span><span class="p">])</span><span class="k">for</span><span class="p">(</span><span class="nx">o</span><span class="o">=</span><span class="nx">n</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;|&quot;</span><span class="p">),</span><span class="nx">t</span><span class="p">[</span><span class="nx">e</span><span class="p">][</span><span class="nx">n</span><span class="p">].</span><span class="nx">stateArray</span><span class="o">=</span><span class="nx">o</span><span class="p">,</span><span class="nx">a</span><span class="o">=</span><span class="mf">0</span><span class="p">;</span><span class="nx">a</span><span class="o">&lt;</span><span class="nx">o</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">a</span><span class="o">++</span><span class="p">)</span><span class="nx">r</span><span class="p">[</span><span class="nx">o</span><span class="p">[</span><span class="nx">a</span><span class="p">]]</span><span class="o">=</span><span class="p">[];</span><span class="k">for</span><span class="p">(</span><span class="nx">e</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">t</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="nx">n</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">t</span><span class="p">[</span><span class="nx">e</span><span class="p">])</span><span class="k">for</span><span class="p">(</span><span class="nx">o</span><span class="o">=</span><span class="nx">t</span><span class="p">[</span><span class="nx">e</span><span class="p">][</span><span class="nx">n</span><span class="p">].</span><span class="nx">stateArray</span><span class="o">||</span><span class="p">[],</span><span class="nx">a</span><span class="o">=</span><span class="mf">0</span><span class="p">;</span><span class="nx">a</span><span class="o">&lt;</span><span class="nx">o</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">a</span><span class="o">++</span><span class="p">){</span><span class="kd">var</span><span class="w"> </span><span class="nx">i</span><span class="o">=</span><span class="nx">t</span><span class="p">[</span><span class="nx">e</span><span class="p">][</span><span class="nx">n</span><span class="p">];</span><span class="k">if</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">action_</span><span class="p">){</span><span class="nx">i</span><span class="p">.</span><span class="nx">action_</span><span class="o">=</span><span class="p">[].</span><span class="nx">concat</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">action_</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span><span class="w"> </span><span class="nx">c</span><span class="o">=</span><span class="mf">0</span><span class="p">;</span><span class="nx">c</span><span class="o">&lt;</span><span class="nx">i</span><span class="p">.</span><span class="nx">action_</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">c</span><span class="o">++</span><span class="p">)</span><span class="s2">&quot;string&quot;</span><span class="o">==</span><span class="ow">typeof</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">action_</span><span class="p">[</span><span class="nx">c</span><span class="p">]</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">action_</span><span class="p">[</span><span class="nx">c</span><span class="p">]</span><span class="o">=</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">action_</span><span class="p">[</span><span class="nx">c</span><span class="p">]})}</span><span class="k">else</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">action_</span><span class="o">=</span><span class="p">[];</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span><span class="w"> </span><span class="nx">u</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;|&quot;</span><span class="p">),</span><span class="nx">p</span><span class="o">=</span><span class="mf">0</span><span class="p">;</span><span class="nx">p</span><span class="o">&lt;</span><span class="nx">u</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">p</span><span class="o">++</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="o">===</span><span class="nx">o</span><span class="p">[</span><span class="nx">a</span><span class="p">])</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span><span class="w"> </span><span class="nx">s</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">r</span><span class="p">)</span><span class="nx">r</span><span class="p">[</span><span class="nx">s</span><span class="p">].</span><span class="nx">push</span><span class="p">({</span><span class="nx">pattern</span><span class="o">:</span><span class="nx">u</span><span class="p">[</span><span class="nx">p</span><span class="p">],</span><span class="nx">task</span><span class="o">:</span><span class="nx">i</span><span class="p">});</span><span class="k">else</span><span class="w"> </span><span class="nx">r</span><span class="p">[</span><span class="nx">o</span><span class="p">[</span><span class="nx">a</span><span class="p">]].</span><span class="nx">push</span><span class="p">({</span><span class="nx">pattern</span><span class="o">:</span><span class="nx">u</span><span class="p">[</span><span class="nx">p</span><span class="p">],</span><span class="nx">task</span><span class="o">:</span><span class="nx">i</span><span class="p">})}</span><span class="k">return</span><span class="w"> </span><span class="nx">r</span><span class="p">},</span><span class="nx">stateMachines</span><span class="o">:</span><span class="p">{}};</span><span class="nx">i</span><span class="p">.</span><span class="nx">stateMachines</span><span class="o">=</span><span class="p">{</span><span class="nx">ce</span><span class="o">:</span><span class="p">{</span><span class="nx">transitions</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">createTransitions</span><span class="p">({</span><span class="nx">empty</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;output&quot;</span><span class="p">}},</span><span class="k">else</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;0|1|2&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;beginsWithBond=false&quot;</span><span class="p">,</span><span class="nx">revisit</span><span class="o">:!</span><span class="mf">0</span><span class="p">,</span><span class="nx">toContinue</span><span class="o">:!</span><span class="mf">0</span><span class="p">}},</span><span class="nx">oxidation$</span><span class="o">:</span><span class="p">{</span><span class="mf">0</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;oxidation-output&quot;</span><span class="p">}},</span><span class="nx">CMT</span><span class="o">:</span><span class="p">{</span><span class="nx">r</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;rdt=&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;rt&quot;</span><span class="p">},</span><span class="nx">rd</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;rqt=&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;rdt&quot;</span><span class="p">}},</span><span class="nx">arrowUpDown</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;0|1|2|as&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;sb=false&quot;</span><span class="p">,</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="s2">&quot;operator&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;1&quot;</span><span class="p">}},</span><span class="nx">uprightEntities</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;0|1|2&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;o=&quot;</span><span class="p">,</span><span class="s2">&quot;output&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;1&quot;</span><span class="p">}},</span><span class="nx">orbital</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;0|1|2|3&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;o=&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;o&quot;</span><span class="p">}},</span><span class="s2">&quot;-&gt;&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;0|1|2|3&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;r=&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;r&quot;</span><span class="p">},</span><span class="s2">&quot;a|as&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="s2">&quot;r=&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;r&quot;</span><span class="p">},</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="s2">&quot;r=&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;r&quot;</span><span class="p">}},</span><span class="s2">&quot;+&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">o</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;d= kv&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;d&quot;</span><span class="p">},</span><span class="s2">&quot;d|D&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;d=&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;d&quot;</span><span class="p">},</span><span class="nx">q</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;d=&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;qd&quot;</span><span class="p">},</span><span class="s2">&quot;qd|qD&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;d=&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;qd&quot;</span><span class="p">},</span><span class="nx">dq</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="s2">&quot;d=&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;d&quot;</span><span class="p">},</span><span class="mf">3</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;sb=false&quot;</span><span class="p">,</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="s2">&quot;operator&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;0&quot;</span><span class="p">}},</span><span class="nx">amount</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;0|2&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;a=&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;a&quot;</span><span class="p">}},</span><span class="s2">&quot;pm-operator&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;0|1|2|a|as&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;sb=false&quot;</span><span class="p">,</span><span class="s2">&quot;output&quot;</span><span class="p">,{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;operator&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="s2">&quot;\\pm&quot;</span><span class="p">}],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;0&quot;</span><span class="p">}},</span><span class="nx">operator</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;0|1|2|a|as&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;sb=false&quot;</span><span class="p">,</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="s2">&quot;operator&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;0&quot;</span><span class="p">}},</span><span class="s2">&quot;-$&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;o|q&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;charge or bond&quot;</span><span class="p">,</span><span class="s2">&quot;output&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;qd&quot;</span><span class="p">},</span><span class="nx">d</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;d=&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;d&quot;</span><span class="p">},</span><span class="nx">D</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">,{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;bond&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="s2">&quot;-&quot;</span><span class="p">}],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;3&quot;</span><span class="p">},</span><span class="nx">q</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;d=&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;qd&quot;</span><span class="p">},</span><span class="nx">qd</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;d=&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;qd&quot;</span><span class="p">},</span><span class="s2">&quot;qD|dq&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">,{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;bond&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="s2">&quot;-&quot;</span><span class="p">}],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;3&quot;</span><span class="p">}},</span><span class="s2">&quot;-9&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;3|o&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">,{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;insert&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="s2">&quot;hyphen&quot;</span><span class="p">}],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;3&quot;</span><span class="p">}},</span><span class="s2">&quot;- orbital overlap&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">o</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">,{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;insert&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="s2">&quot;hyphen&quot;</span><span class="p">}],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;2&quot;</span><span class="p">},</span><span class="nx">d</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">,{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;insert&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="s2">&quot;hyphen&quot;</span><span class="p">}],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;2&quot;</span><span class="p">}},</span><span class="s2">&quot;-&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;0|1|2&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="mf">1</span><span class="p">},</span><span class="s2">&quot;beginsWithBond=true&quot;</span><span class="p">,{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;bond&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="s2">&quot;-&quot;</span><span class="p">}],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;3&quot;</span><span class="p">},</span><span class="mf">3</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;bond&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="s2">&quot;-&quot;</span><span class="p">}},</span><span class="nx">a</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">,{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;insert&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="s2">&quot;hyphen&quot;</span><span class="p">}],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;2&quot;</span><span class="p">},</span><span class="kr">as</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="mf">2</span><span class="p">},{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;bond&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="s2">&quot;-&quot;</span><span class="p">}],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;3&quot;</span><span class="p">},</span><span class="nx">b</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;b=&quot;</span><span class="p">},</span><span class="nx">o</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;- after o/d&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:!</span><span class="mf">1</span><span class="p">},</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;2&quot;</span><span class="p">},</span><span class="nx">q</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;- after o/d&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:!</span><span class="mf">1</span><span class="p">},</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;2&quot;</span><span class="p">},</span><span class="s2">&quot;d|qd|dq&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;- after o/d&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:!</span><span class="mf">0</span><span class="p">},</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;2&quot;</span><span class="p">},</span><span class="s2">&quot;D|qD|p&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">,{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;bond&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="s2">&quot;-&quot;</span><span class="p">}],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;3&quot;</span><span class="p">}},</span><span class="nx">amount2</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;1|3&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;a=&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;a&quot;</span><span class="p">}},</span><span class="nx">letters</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;0|1|2|3|a|as|b|p|bp|o&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;o=&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;o&quot;</span><span class="p">},</span><span class="s2">&quot;q|dq&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="s2">&quot;o=&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;o&quot;</span><span class="p">},</span><span class="s2">&quot;d|D|qd|qD&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;o after d&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;o&quot;</span><span class="p">}},</span><span class="nx">digits</span><span class="o">:</span><span class="p">{</span><span class="nx">o</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;q=&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;q&quot;</span><span class="p">},</span><span class="s2">&quot;d|D&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;q=&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;dq&quot;</span><span class="p">},</span><span class="nx">q</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="s2">&quot;o=&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;o&quot;</span><span class="p">},</span><span class="nx">a</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;o=&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;o&quot;</span><span class="p">}},</span><span class="s2">&quot;space A&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;b|p|bp&quot;</span><span class="o">:</span><span class="p">{}},</span><span class="nx">space</span><span class="o">:</span><span class="p">{</span><span class="nx">a</span><span class="o">:</span><span class="p">{</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;as&quot;</span><span class="p">},</span><span class="mf">0</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;sb=false&quot;</span><span class="p">},</span><span class="s2">&quot;1|2&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;sb=true&quot;</span><span class="p">},</span><span class="s2">&quot;r|rt|rd|rdt|rdq&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;0&quot;</span><span class="p">},</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="s2">&quot;sb=true&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;1&quot;</span><span class="p">}},</span><span class="s2">&quot;1st-level escape&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;1|2&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">,{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;insert+p1&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="s2">&quot;1st-level escape&quot;</span><span class="p">}]},</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">,{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;insert+p1&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="s2">&quot;1st-level escape&quot;</span><span class="p">}],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;0&quot;</span><span class="p">}},</span><span class="s2">&quot;[(...)]&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;r|rt&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;rd=&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;rd&quot;</span><span class="p">},</span><span class="s2">&quot;rd|rdt&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;rq=&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;rdq&quot;</span><span class="p">}},</span><span class="s2">&quot;...&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;o|d|D|dq|qd|qD&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">,{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;bond&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="s2">&quot;...&quot;</span><span class="p">}],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;3&quot;</span><span class="p">},</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="mf">1</span><span class="p">},{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;insert&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="s2">&quot;ellipsis&quot;</span><span class="p">}],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;1&quot;</span><span class="p">}},</span><span class="s2">&quot;. |* &quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">,{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;insert&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="s2">&quot;addition compound&quot;</span><span class="p">}],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;1&quot;</span><span class="p">}},</span><span class="s2">&quot;state of aggregation $&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="s2">&quot;state of aggregation&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;1&quot;</span><span class="p">}},</span><span class="s2">&quot;{[(&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;a|as|o&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;o=&quot;</span><span class="p">,</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="s2">&quot;parenthesisLevel++&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;2&quot;</span><span class="p">},</span><span class="s2">&quot;0|1|2|3&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;o=&quot;</span><span class="p">,</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="s2">&quot;parenthesisLevel++&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;2&quot;</span><span class="p">},</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="s2">&quot;o=&quot;</span><span class="p">,</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="s2">&quot;parenthesisLevel++&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;2&quot;</span><span class="p">}},</span><span class="s2">&quot;)]}&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;0|1|2|3|b|p|bp|o&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;o=&quot;</span><span class="p">,</span><span class="s2">&quot;parenthesisLevel--&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;o&quot;</span><span class="p">},</span><span class="s2">&quot;a|as|d|D|q|qd|qD|dq&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="s2">&quot;o=&quot;</span><span class="p">,</span><span class="s2">&quot;parenthesisLevel--&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;o&quot;</span><span class="p">}},</span><span class="s2">&quot;, &quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="s2">&quot;comma&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;0&quot;</span><span class="p">}},</span><span class="s2">&quot;^_&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{}},</span><span class="s2">&quot;^{(...)}|^($...$)&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;0|1|2|as&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;b=&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;b&quot;</span><span class="p">},</span><span class="nx">p</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;b=&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;bp&quot;</span><span class="p">},</span><span class="s2">&quot;3|o&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;d= kv&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;D&quot;</span><span class="p">},</span><span class="nx">q</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;d=&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;qD&quot;</span><span class="p">},</span><span class="s2">&quot;d|D|qd|qD|dq&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="s2">&quot;d=&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;D&quot;</span><span class="p">}},</span><span class="s2">&quot;^a|^\\x{}{}|^\\x{}|^\\x|&#39;&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;0|1|2|as&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;b=&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;b&quot;</span><span class="p">},</span><span class="nx">p</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;b=&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;bp&quot;</span><span class="p">},</span><span class="s2">&quot;3|o&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;d= kv&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;d&quot;</span><span class="p">},</span><span class="nx">q</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;d=&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;qd&quot;</span><span class="p">},</span><span class="s2">&quot;d|qd|D|qD&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;d=&quot;</span><span class="p">},</span><span class="nx">dq</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="s2">&quot;d=&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;d&quot;</span><span class="p">}},</span><span class="s2">&quot;_{(state of aggregation)}$&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;d|D|q|qd|qD|dq&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="s2">&quot;q=&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;q&quot;</span><span class="p">}},</span><span class="s2">&quot;_{(...)}|_($...$)|_9|_\\x{}{}|_\\x{}|_\\x&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;0|1|2|as&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;p=&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;p&quot;</span><span class="p">},</span><span class="nx">b</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;p=&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;bp&quot;</span><span class="p">},</span><span class="s2">&quot;3|o&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;q=&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;q&quot;</span><span class="p">},</span><span class="s2">&quot;d|D&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;q=&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;dq&quot;</span><span class="p">},</span><span class="s2">&quot;q|qd|qD|dq&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="s2">&quot;q=&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;q&quot;</span><span class="p">}},</span><span class="s2">&quot;=&lt;&gt;&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;0|1|2|3|a|as|o|q|d|D|qd|qD|dq&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="mf">2</span><span class="p">},</span><span class="s2">&quot;bond&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;3&quot;</span><span class="p">}},</span><span class="s2">&quot;#&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;0|1|2|3|a|as|o&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="mf">2</span><span class="p">},{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;bond&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="s2">&quot;#&quot;</span><span class="p">}],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;3&quot;</span><span class="p">}},</span><span class="s2">&quot;{}&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="mf">1</span><span class="p">},</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;1&quot;</span><span class="p">}},</span><span class="s2">&quot;{...}&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;0|1|2|3|a|as|b|p|bp&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;o=&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;o&quot;</span><span class="p">},</span><span class="s2">&quot;o|d|D|q|qd|qD|dq&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="s2">&quot;o=&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;o&quot;</span><span class="p">}},</span><span class="s2">&quot;$...$&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">a</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;a=&quot;</span><span class="p">},</span><span class="s2">&quot;0|1|2|3|as|b|p|bp|o&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;o=&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;o&quot;</span><span class="p">},</span><span class="s2">&quot;as|o&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;o=&quot;</span><span class="p">},</span><span class="s2">&quot;q|d|D|qd|qD|dq&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="s2">&quot;o=&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;o&quot;</span><span class="p">}},</span><span class="s2">&quot;\\bond{(...)}&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="mf">2</span><span class="p">},</span><span class="s2">&quot;bond&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;3&quot;</span><span class="p">}},</span><span class="s2">&quot;\\frac{(...)}&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="mf">1</span><span class="p">},</span><span class="s2">&quot;frac-output&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;3&quot;</span><span class="p">}},</span><span class="s2">&quot;\\overset{(...)}&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="mf">2</span><span class="p">},</span><span class="s2">&quot;overset-output&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;3&quot;</span><span class="p">}},</span><span class="s2">&quot;\\underset{(...)}&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="mf">2</span><span class="p">},</span><span class="s2">&quot;underset-output&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;3&quot;</span><span class="p">}},</span><span class="s2">&quot;\\underbrace{(...)}&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="mf">2</span><span class="p">},</span><span class="s2">&quot;underbrace-output&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;3&quot;</span><span class="p">}},</span><span class="s2">&quot;\\color{(...)}{(...)}1|\\color(...){(...)}2&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="mf">2</span><span class="p">},</span><span class="s2">&quot;color-output&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;3&quot;</span><span class="p">}},</span><span class="s2">&quot;\\color{(...)}0&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="mf">2</span><span class="p">},</span><span class="s2">&quot;color0-output&quot;</span><span class="p">]}},</span><span class="s2">&quot;\\ce{(...)}&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="mf">2</span><span class="p">},</span><span class="s2">&quot;ce&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;3&quot;</span><span class="p">}},</span><span class="s2">&quot;\\,&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="mf">1</span><span class="p">},</span><span class="s2">&quot;copy&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;1&quot;</span><span class="p">}},</span><span class="s2">&quot;\\x{}{}|\\x{}|\\x&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;0|1|2|3|a|as|b|p|bp|o|c0&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;o=&quot;</span><span class="p">,</span><span class="s2">&quot;output&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;3&quot;</span><span class="p">},</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="s2">&quot;o=&quot;</span><span class="p">,</span><span class="s2">&quot;output&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;3&quot;</span><span class="p">}},</span><span class="nx">others</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="mf">1</span><span class="p">},</span><span class="s2">&quot;copy&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;3&quot;</span><span class="p">}},</span><span class="nx">else2</span><span class="o">:</span><span class="p">{</span><span class="nx">a</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;a to o&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;o&quot;</span><span class="p">,</span><span class="nx">revisit</span><span class="o">:!</span><span class="mf">0</span><span class="p">},</span><span class="kr">as</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="s2">&quot;sb=true&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;1&quot;</span><span class="p">,</span><span class="nx">revisit</span><span class="o">:!</span><span class="mf">0</span><span class="p">},</span><span class="s2">&quot;r|rt|rd|rdt|rdq&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="nx">revisit</span><span class="o">:!</span><span class="mf">0</span><span class="p">},</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="s2">&quot;copy&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;3&quot;</span><span class="p">}}}),</span><span class="nx">actions</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;o after d&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="kd">var</span><span class="w"> </span><span class="nx">n</span><span class="p">;</span><span class="k">if</span><span class="p">((</span><span class="nx">t</span><span class="p">.</span><span class="nx">d</span><span class="o">||</span><span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^[0-9]+$/</span><span class="p">)){</span><span class="kd">var</span><span class="w"> </span><span class="nx">o</span><span class="o">=</span><span class="nx">t</span><span class="p">.</span><span class="nx">d</span><span class="p">;</span><span class="nx">t</span><span class="p">.</span><span class="nx">d</span><span class="o">=</span><span class="ow">void</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="nx">n</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">output</span><span class="p">(</span><span class="nx">t</span><span class="p">),</span><span class="nx">t</span><span class="p">.</span><span class="nx">b</span><span class="o">=</span><span class="nx">o</span><span class="p">}</span><span class="k">else</span><span class="w"> </span><span class="nx">n</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">output</span><span class="p">(</span><span class="nx">t</span><span class="p">);</span><span class="k">return</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">actions</span><span class="p">[</span><span class="s2">&quot;o=&quot;</span><span class="p">](</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">),</span><span class="nx">n</span><span class="p">},</span><span class="s2">&quot;d= kv&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="nx">t</span><span class="p">.</span><span class="nx">d</span><span class="o">=</span><span class="nx">e</span><span class="p">,</span><span class="nx">t</span><span class="p">.</span><span class="nx">dType</span><span class="o">=</span><span class="s2">&quot;kv&quot;</span><span class="p">},</span><span class="s2">&quot;charge or bond&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">beginsWithBond</span><span class="p">){</span><span class="kd">var</span><span class="w"> </span><span class="nx">n</span><span class="o">=</span><span class="p">[];</span><span class="k">return</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">concatArray</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">output</span><span class="p">(</span><span class="nx">t</span><span class="p">)),</span><span class="nx">i</span><span class="p">.</span><span class="nx">concatArray</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span><span class="nx">i</span><span class="p">.</span><span class="nx">actions</span><span class="p">.</span><span class="nx">bond</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="s2">&quot;-&quot;</span><span class="p">)),</span><span class="nx">n</span><span class="p">}</span><span class="nx">t</span><span class="p">.</span><span class="nx">d</span><span class="o">=</span><span class="nx">e</span><span class="p">},</span><span class="s2">&quot;- after o/d&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">n</span><span class="p">){</span><span class="kd">var</span><span class="w"> </span><span class="nx">o</span><span class="o">=</span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">match_</span><span class="p">(</span><span class="s2">&quot;orbital&quot;</span><span class="p">,</span><span class="nx">t</span><span class="p">.</span><span class="nx">o</span><span class="o">||</span><span class="s2">&quot;&quot;</span><span class="p">),</span><span class="nx">a</span><span class="o">=</span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">match_</span><span class="p">(</span><span class="s2">&quot;one lowercase greek letter $&quot;</span><span class="p">,</span><span class="nx">t</span><span class="p">.</span><span class="nx">o</span><span class="o">||</span><span class="s2">&quot;&quot;</span><span class="p">),</span><span class="nx">r</span><span class="o">=</span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">match_</span><span class="p">(</span><span class="s2">&quot;one lowercase latin letter $&quot;</span><span class="p">,</span><span class="nx">t</span><span class="p">.</span><span class="nx">o</span><span class="o">||</span><span class="s2">&quot;&quot;</span><span class="p">),</span><span class="nx">c</span><span class="o">=</span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">match_</span><span class="p">(</span><span class="s2">&quot;$one lowercase latin letter$ $&quot;</span><span class="p">,</span><span class="nx">t</span><span class="p">.</span><span class="nx">o</span><span class="o">||</span><span class="s2">&quot;&quot;</span><span class="p">),</span><span class="nx">u</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="o">===</span><span class="nx">e</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">o</span><span class="o">&amp;&amp;</span><span class="s2">&quot;&quot;</span><span class="o">===</span><span class="nx">o</span><span class="p">.</span><span class="nx">remainder</span><span class="o">||</span><span class="nx">a</span><span class="o">||</span><span class="nx">r</span><span class="o">||</span><span class="nx">c</span><span class="p">);</span><span class="o">!</span><span class="nx">u</span><span class="o">||</span><span class="nx">t</span><span class="p">.</span><span class="nx">a</span><span class="o">||</span><span class="nx">t</span><span class="p">.</span><span class="nx">b</span><span class="o">||</span><span class="nx">t</span><span class="p">.</span><span class="nx">p</span><span class="o">||</span><span class="nx">t</span><span class="p">.</span><span class="nx">d</span><span class="o">||</span><span class="nx">t</span><span class="p">.</span><span class="nx">q</span><span class="o">||</span><span class="nx">o</span><span class="o">||!</span><span class="nx">r</span><span class="o">||</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">o</span><span class="o">=</span><span class="s2">&quot;$&quot;</span><span class="o">+</span><span class="nx">t</span><span class="p">.</span><span class="nx">o</span><span class="o">+</span><span class="s2">&quot;$&quot;</span><span class="p">);</span><span class="kd">var</span><span class="w"> </span><span class="nx">p</span><span class="o">=</span><span class="p">[];</span><span class="k">return</span><span class="w"> </span><span class="nx">u</span><span class="o">?</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">concatArray</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">output</span><span class="p">(</span><span class="nx">t</span><span class="p">)),</span><span class="nx">p</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;hyphen&quot;</span><span class="p">}))</span><span class="o">:</span><span class="p">(</span><span class="nx">o</span><span class="o">=</span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">match_</span><span class="p">(</span><span class="s2">&quot;digits&quot;</span><span class="p">,</span><span class="nx">t</span><span class="p">.</span><span class="nx">d</span><span class="o">||</span><span class="s2">&quot;&quot;</span><span class="p">),</span><span class="nx">n</span><span class="o">&amp;&amp;</span><span class="nx">o</span><span class="o">&amp;&amp;</span><span class="s2">&quot;&quot;</span><span class="o">===</span><span class="nx">o</span><span class="p">.</span><span class="nx">remainder</span><span class="o">?</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">concatArray</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span><span class="nx">i</span><span class="p">.</span><span class="nx">actions</span><span class="p">[</span><span class="s2">&quot;d=&quot;</span><span class="p">](</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">)),</span><span class="nx">i</span><span class="p">.</span><span class="nx">concatArray</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">output</span><span class="p">(</span><span class="nx">t</span><span class="p">)))</span><span class="o">:</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">concatArray</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">output</span><span class="p">(</span><span class="nx">t</span><span class="p">)),</span><span class="nx">i</span><span class="p">.</span><span class="nx">concatArray</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span><span class="nx">i</span><span class="p">.</span><span class="nx">actions</span><span class="p">.</span><span class="nx">bond</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="s2">&quot;-&quot;</span><span class="p">)))),</span><span class="nx">p</span><span class="p">},</span><span class="s2">&quot;a to o&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="nx">t</span><span class="p">.</span><span class="nx">o</span><span class="o">=</span><span class="nx">t</span><span class="p">.</span><span class="nx">a</span><span class="p">,</span><span class="nx">t</span><span class="p">.</span><span class="nx">a</span><span class="o">=</span><span class="ow">void</span><span class="w"> </span><span class="mf">0</span><span class="p">},</span><span class="s2">&quot;sb=true&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="nx">t</span><span class="p">.</span><span class="nx">sb</span><span class="o">=!</span><span class="mf">0</span><span class="p">},</span><span class="s2">&quot;sb=false&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="nx">t</span><span class="p">.</span><span class="nx">sb</span><span class="o">=!</span><span class="mf">1</span><span class="p">},</span><span class="s2">&quot;beginsWithBond=true&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="nx">t</span><span class="p">.</span><span class="nx">beginsWithBond</span><span class="o">=!</span><span class="mf">0</span><span class="p">},</span><span class="s2">&quot;beginsWithBond=false&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="nx">t</span><span class="p">.</span><span class="nx">beginsWithBond</span><span class="o">=!</span><span class="mf">1</span><span class="p">},</span><span class="s2">&quot;parenthesisLevel++&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="nx">t</span><span class="p">.</span><span class="nx">parenthesisLevel</span><span class="o">++</span><span class="p">},</span><span class="s2">&quot;parenthesisLevel--&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="nx">t</span><span class="p">.</span><span class="nx">parenthesisLevel</span><span class="o">--</span><span class="p">},</span><span class="s2">&quot;state of aggregation&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="k">return</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;state of aggregation&quot;</span><span class="p">,</span><span class="nx">p1</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="s2">&quot;o&quot;</span><span class="p">)}},</span><span class="nx">comma</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="kd">var</span><span class="w"> </span><span class="nx">n</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\s*$/</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">);</span><span class="k">return</span><span class="w"> </span><span class="nx">n</span><span class="o">!==</span><span class="nx">e</span><span class="o">&amp;&amp;</span><span class="mf">0</span><span class="o">===</span><span class="nx">t</span><span class="p">.</span><span class="nx">parenthesisLevel</span><span class="o">?</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;comma enumeration L&quot;</span><span class="p">,</span><span class="nx">p1</span><span class="o">:</span><span class="nx">n</span><span class="p">}</span><span class="o">:</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;comma enumeration M&quot;</span><span class="p">,</span><span class="nx">p1</span><span class="o">:</span><span class="nx">n</span><span class="p">}},</span><span class="nx">output</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">n</span><span class="p">){</span><span class="kd">var</span><span class="w"> </span><span class="nx">o</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">r</span><span class="p">;</span><span class="nx">t</span><span class="p">.</span><span class="nx">r</span><span class="o">?</span><span class="p">(</span><span class="nx">a</span><span class="o">=</span><span class="s2">&quot;M&quot;</span><span class="o">===</span><span class="nx">t</span><span class="p">.</span><span class="nx">rdt</span><span class="o">?</span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">rd</span><span class="p">,</span><span class="s2">&quot;tex-math&quot;</span><span class="p">)</span><span class="o">:</span><span class="s2">&quot;T&quot;</span><span class="o">===</span><span class="nx">t</span><span class="p">.</span><span class="nx">rdt</span><span class="o">?</span><span class="p">[{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;text&quot;</span><span class="p">,</span><span class="nx">p1</span><span class="o">:</span><span class="nx">t</span><span class="p">.</span><span class="nx">rd</span><span class="o">||</span><span class="s2">&quot;&quot;</span><span class="p">}]</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">rd</span><span class="p">),</span><span class="nx">r</span><span class="o">=</span><span class="s2">&quot;M&quot;</span><span class="o">===</span><span class="nx">t</span><span class="p">.</span><span class="nx">rqt</span><span class="o">?</span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">rq</span><span class="p">,</span><span class="s2">&quot;tex-math&quot;</span><span class="p">)</span><span class="o">:</span><span class="s2">&quot;T&quot;</span><span class="o">===</span><span class="nx">t</span><span class="p">.</span><span class="nx">rqt</span><span class="o">?</span><span class="p">[{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;text&quot;</span><span class="p">,</span><span class="nx">p1</span><span class="o">:</span><span class="nx">t</span><span class="p">.</span><span class="nx">rq</span><span class="o">||</span><span class="s2">&quot;&quot;</span><span class="p">}]</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">rq</span><span class="p">),</span><span class="nx">o</span><span class="o">=</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;arrow&quot;</span><span class="p">,</span><span class="nx">r</span><span class="o">:</span><span class="nx">t</span><span class="p">.</span><span class="nx">r</span><span class="p">,</span><span class="nx">rd</span><span class="o">:</span><span class="nx">a</span><span class="p">,</span><span class="nx">rq</span><span class="o">:</span><span class="nx">r</span><span class="p">})</span><span class="o">:</span><span class="p">(</span><span class="nx">o</span><span class="o">=</span><span class="p">[],(</span><span class="nx">t</span><span class="p">.</span><span class="nx">a</span><span class="o">||</span><span class="nx">t</span><span class="p">.</span><span class="nx">b</span><span class="o">||</span><span class="nx">t</span><span class="p">.</span><span class="nx">p</span><span class="o">||</span><span class="nx">t</span><span class="p">.</span><span class="nx">o</span><span class="o">||</span><span class="nx">t</span><span class="p">.</span><span class="nx">q</span><span class="o">||</span><span class="nx">t</span><span class="p">.</span><span class="nx">d</span><span class="o">||</span><span class="nx">n</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">sb</span><span class="o">&amp;&amp;</span><span class="nx">o</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;entitySkip&quot;</span><span class="p">}),</span><span class="nx">t</span><span class="p">.</span><span class="nx">o</span><span class="o">||</span><span class="nx">t</span><span class="p">.</span><span class="nx">q</span><span class="o">||</span><span class="nx">t</span><span class="p">.</span><span class="nx">d</span><span class="o">||</span><span class="nx">t</span><span class="p">.</span><span class="nx">b</span><span class="o">||</span><span class="nx">t</span><span class="p">.</span><span class="nx">p</span><span class="o">||</span><span class="mf">2</span><span class="o">===</span><span class="nx">n</span><span class="o">?</span><span class="nx">t</span><span class="p">.</span><span class="nx">o</span><span class="o">||</span><span class="nx">t</span><span class="p">.</span><span class="nx">q</span><span class="o">||</span><span class="nx">t</span><span class="p">.</span><span class="nx">d</span><span class="o">||!</span><span class="nx">t</span><span class="p">.</span><span class="nx">b</span><span class="o">&amp;&amp;!</span><span class="nx">t</span><span class="p">.</span><span class="nx">p</span><span class="o">?</span><span class="nx">t</span><span class="p">.</span><span class="nx">o</span><span class="o">&amp;&amp;</span><span class="s2">&quot;kv&quot;</span><span class="o">===</span><span class="nx">t</span><span class="p">.</span><span class="nx">dType</span><span class="o">&amp;&amp;</span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">match_</span><span class="p">(</span><span class="s2">&quot;d-oxidation$&quot;</span><span class="p">,</span><span class="nx">t</span><span class="p">.</span><span class="nx">d</span><span class="o">||</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">?</span><span class="nx">t</span><span class="p">.</span><span class="nx">dType</span><span class="o">=</span><span class="s2">&quot;oxidation&quot;</span><span class="o">:</span><span class="nx">t</span><span class="p">.</span><span class="nx">o</span><span class="o">&amp;&amp;</span><span class="s2">&quot;kv&quot;</span><span class="o">===</span><span class="nx">t</span><span class="p">.</span><span class="nx">dType</span><span class="o">&amp;&amp;!</span><span class="nx">t</span><span class="p">.</span><span class="nx">q</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">dType</span><span class="o">=</span><span class="ow">void</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="o">:</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">o</span><span class="o">=</span><span class="nx">t</span><span class="p">.</span><span class="nx">a</span><span class="p">,</span><span class="nx">t</span><span class="p">.</span><span class="nx">d</span><span class="o">=</span><span class="nx">t</span><span class="p">.</span><span class="nx">b</span><span class="p">,</span><span class="nx">t</span><span class="p">.</span><span class="nx">q</span><span class="o">=</span><span class="nx">t</span><span class="p">.</span><span class="nx">p</span><span class="p">,</span><span class="nx">t</span><span class="p">.</span><span class="nx">a</span><span class="o">=</span><span class="nx">t</span><span class="p">.</span><span class="nx">b</span><span class="o">=</span><span class="nx">t</span><span class="p">.</span><span class="nx">p</span><span class="o">=</span><span class="ow">void</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="o">:</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">o</span><span class="o">=</span><span class="nx">t</span><span class="p">.</span><span class="nx">a</span><span class="p">,</span><span class="nx">t</span><span class="p">.</span><span class="nx">a</span><span class="o">=</span><span class="ow">void</span><span class="w"> </span><span class="mf">0</span><span class="p">),</span><span class="nx">o</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;chemfive&quot;</span><span class="p">,</span><span class="nx">a</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">a</span><span class="p">,</span><span class="s2">&quot;a&quot;</span><span class="p">),</span><span class="nx">b</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">b</span><span class="p">,</span><span class="s2">&quot;bd&quot;</span><span class="p">),</span><span class="nx">p</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">p</span><span class="p">,</span><span class="s2">&quot;pq&quot;</span><span class="p">),</span><span class="nx">o</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">o</span><span class="p">,</span><span class="s2">&quot;o&quot;</span><span class="p">),</span><span class="nx">q</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">q</span><span class="p">,</span><span class="s2">&quot;pq&quot;</span><span class="p">),</span><span class="nx">d</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">d</span><span class="p">,</span><span class="s2">&quot;oxidation&quot;</span><span class="o">===</span><span class="nx">t</span><span class="p">.</span><span class="nx">dType</span><span class="o">?</span><span class="s2">&quot;oxidation&quot;</span><span class="o">:</span><span class="s2">&quot;bd&quot;</span><span class="p">),</span><span class="nx">dType</span><span class="o">:</span><span class="nx">t</span><span class="p">.</span><span class="nx">dType</span><span class="p">})));</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span><span class="w"> </span><span class="nx">c</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">t</span><span class="p">)</span><span class="s2">&quot;parenthesisLevel&quot;</span><span class="o">!==</span><span class="nx">c</span><span class="o">&amp;&amp;</span><span class="s2">&quot;beginsWithBond&quot;</span><span class="o">!==</span><span class="nx">c</span><span class="o">&amp;&amp;</span><span class="ow">delete</span><span class="w"> </span><span class="nx">t</span><span class="p">[</span><span class="nx">c</span><span class="p">];</span><span class="k">return</span><span class="w"> </span><span class="nx">o</span><span class="p">},</span><span class="s2">&quot;oxidation-output&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="kd">var</span><span class="w"> </span><span class="nx">n</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;{&quot;</span><span class="p">];</span><span class="k">return</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">concatArray</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="s2">&quot;oxidation&quot;</span><span class="p">)),</span><span class="nx">n</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;}&quot;</span><span class="p">),</span><span class="nx">n</span><span class="p">},</span><span class="s2">&quot;frac-output&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="k">return</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;frac-ce&quot;</span><span class="p">,</span><span class="nx">p1</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="mf">0</span><span class="p">]),</span><span class="nx">p2</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="mf">1</span><span class="p">])}},</span><span class="s2">&quot;overset-output&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="k">return</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;overset&quot;</span><span class="p">,</span><span class="nx">p1</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="mf">0</span><span class="p">]),</span><span class="nx">p2</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="mf">1</span><span class="p">])}},</span><span class="s2">&quot;underset-output&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="k">return</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;underset&quot;</span><span class="p">,</span><span class="nx">p1</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="mf">0</span><span class="p">]),</span><span class="nx">p2</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="mf">1</span><span class="p">])}},</span><span class="s2">&quot;underbrace-output&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="k">return</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;underbrace&quot;</span><span class="p">,</span><span class="nx">p1</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="mf">0</span><span class="p">]),</span><span class="nx">p2</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="mf">1</span><span class="p">])}},</span><span class="s2">&quot;color-output&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="k">return</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;color&quot;</span><span class="p">,</span><span class="nx">color1</span><span class="o">:</span><span class="nx">e</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span><span class="nx">color2</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="mf">1</span><span class="p">])}},</span><span class="s2">&quot;r=&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="nx">t</span><span class="p">.</span><span class="nx">r</span><span class="o">=</span><span class="nx">e</span><span class="p">},</span><span class="s2">&quot;rdt=&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="nx">t</span><span class="p">.</span><span class="nx">rdt</span><span class="o">=</span><span class="nx">e</span><span class="p">},</span><span class="s2">&quot;rd=&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="nx">t</span><span class="p">.</span><span class="nx">rd</span><span class="o">=</span><span class="nx">e</span><span class="p">},</span><span class="s2">&quot;rqt=&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="nx">t</span><span class="p">.</span><span class="nx">rqt</span><span class="o">=</span><span class="nx">e</span><span class="p">},</span><span class="s2">&quot;rq=&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="nx">t</span><span class="p">.</span><span class="nx">rq</span><span class="o">=</span><span class="nx">e</span><span class="p">},</span><span class="nx">operator</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">n</span><span class="p">){</span><span class="k">return</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;operator&quot;</span><span class="p">,</span><span class="nx">kind_</span><span class="o">:</span><span class="nx">n</span><span class="o">||</span><span class="nx">e</span><span class="p">}}}},</span><span class="nx">a</span><span class="o">:</span><span class="p">{</span><span class="nx">transitions</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">createTransitions</span><span class="p">({</span><span class="nx">empty</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{}},</span><span class="s2">&quot;1/2$&quot;</span><span class="o">:</span><span class="p">{</span><span class="mf">0</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;1/2&quot;</span><span class="p">}},</span><span class="k">else</span><span class="o">:</span><span class="p">{</span><span class="mf">0</span><span class="o">:</span><span class="p">{</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;1&quot;</span><span class="p">,</span><span class="nx">revisit</span><span class="o">:!</span><span class="mf">0</span><span class="p">}},</span><span class="s2">&quot;$(...)$&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;tex-math tight&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;1&quot;</span><span class="p">}},</span><span class="s2">&quot;,&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;insert&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="s2">&quot;commaDecimal&quot;</span><span class="p">}}},</span><span class="nx">else2</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;copy&quot;</span><span class="p">}}}),</span><span class="nx">actions</span><span class="o">:</span><span class="p">{}},</span><span class="nx">o</span><span class="o">:</span><span class="p">{</span><span class="nx">transitions</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">createTransitions</span><span class="p">({</span><span class="nx">empty</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{}},</span><span class="s2">&quot;1/2$&quot;</span><span class="o">:</span><span class="p">{</span><span class="mf">0</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;1/2&quot;</span><span class="p">}},</span><span class="k">else</span><span class="o">:</span><span class="p">{</span><span class="mf">0</span><span class="o">:</span><span class="p">{</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;1&quot;</span><span class="p">,</span><span class="nx">revisit</span><span class="o">:!</span><span class="mf">0</span><span class="p">}},</span><span class="nx">letters</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;rm&quot;</span><span class="p">}},</span><span class="s2">&quot;\\ca&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;insert&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="s2">&quot;circa&quot;</span><span class="p">}}},</span><span class="s2">&quot;\\x{}{}|\\x{}|\\x&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;copy&quot;</span><span class="p">}},</span><span class="s2">&quot;${(...)}$|$(...)$&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;tex-math&quot;</span><span class="p">}},</span><span class="s2">&quot;{(...)}&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;{text}&quot;</span><span class="p">}},</span><span class="nx">else2</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;copy&quot;</span><span class="p">}}}),</span><span class="nx">actions</span><span class="o">:</span><span class="p">{}},</span><span class="nx">text</span><span class="o">:</span><span class="p">{</span><span class="nx">transitions</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">createTransitions</span><span class="p">({</span><span class="nx">empty</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;output&quot;</span><span class="p">}},</span><span class="s2">&quot;{...}&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;text=&quot;</span><span class="p">}},</span><span class="s2">&quot;${(...)}$|$(...)$&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;tex-math&quot;</span><span class="p">}},</span><span class="s2">&quot;\\greek&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="s2">&quot;rm&quot;</span><span class="p">]}},</span><span class="s2">&quot;\\,|\\x{}{}|\\x{}|\\x&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="s2">&quot;copy&quot;</span><span class="p">]}},</span><span class="k">else</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;text=&quot;</span><span class="p">}}}),</span><span class="nx">actions</span><span class="o">:</span><span class="p">{</span><span class="nx">output</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">text_</span><span class="p">){</span><span class="kd">var</span><span class="w"> </span><span class="nx">e</span><span class="o">=</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;text&quot;</span><span class="p">,</span><span class="nx">p1</span><span class="o">:</span><span class="nx">t</span><span class="p">.</span><span class="nx">text_</span><span class="p">};</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span><span class="w"> </span><span class="nx">n</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">t</span><span class="p">)</span><span class="ow">delete</span><span class="w"> </span><span class="nx">t</span><span class="p">[</span><span class="nx">n</span><span class="p">];</span><span class="k">return</span><span class="w"> </span><span class="nx">e</span><span class="p">}}}},</span><span class="nx">pq</span><span class="o">:</span><span class="p">{</span><span class="nx">transitions</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">createTransitions</span><span class="p">({</span><span class="nx">empty</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{}},</span><span class="s2">&quot;state of aggregation $&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;state of aggregation&quot;</span><span class="p">}},</span><span class="nx">i$</span><span class="o">:</span><span class="p">{</span><span class="mf">0</span><span class="o">:</span><span class="p">{</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;!f&quot;</span><span class="p">,</span><span class="nx">revisit</span><span class="o">:!</span><span class="mf">0</span><span class="p">}},</span><span class="s2">&quot;(KV letters),&quot;</span><span class="o">:</span><span class="p">{</span><span class="mf">0</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;rm&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;0&quot;</span><span class="p">}},</span><span class="nx">formula$</span><span class="o">:</span><span class="p">{</span><span class="mf">0</span><span class="o">:</span><span class="p">{</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;f&quot;</span><span class="p">,</span><span class="nx">revisit</span><span class="o">:!</span><span class="mf">0</span><span class="p">}},</span><span class="s2">&quot;1/2$&quot;</span><span class="o">:</span><span class="p">{</span><span class="mf">0</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;1/2&quot;</span><span class="p">}},</span><span class="k">else</span><span class="o">:</span><span class="p">{</span><span class="mf">0</span><span class="o">:</span><span class="p">{</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;!f&quot;</span><span class="p">,</span><span class="nx">revisit</span><span class="o">:!</span><span class="mf">0</span><span class="p">}},</span><span class="s2">&quot;${(...)}$|$(...)$&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;tex-math&quot;</span><span class="p">}},</span><span class="s2">&quot;{(...)}&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;text&quot;</span><span class="p">}},</span><span class="s2">&quot;a-z&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">f</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;tex-math&quot;</span><span class="p">}},</span><span class="nx">letters</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;rm&quot;</span><span class="p">}},</span><span class="s2">&quot;-9.,9&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;9,9&quot;</span><span class="p">}},</span><span class="s2">&quot;,&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;insert+p1&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="s2">&quot;comma enumeration S&quot;</span><span class="p">}}},</span><span class="s2">&quot;\\color{(...)}{(...)}1|\\color(...){(...)}2&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;color-output&quot;</span><span class="p">}},</span><span class="s2">&quot;\\color{(...)}0&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;color0-output&quot;</span><span class="p">}},</span><span class="s2">&quot;\\ce{(...)}&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;ce&quot;</span><span class="p">}},</span><span class="s2">&quot;\\,|\\x{}{}|\\x{}|\\x&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;copy&quot;</span><span class="p">}},</span><span class="nx">else2</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;copy&quot;</span><span class="p">}}}),</span><span class="nx">actions</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;state of aggregation&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="k">return</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;state of aggregation subscript&quot;</span><span class="p">,</span><span class="nx">p1</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="s2">&quot;o&quot;</span><span class="p">)}},</span><span class="s2">&quot;color-output&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="k">return</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;color&quot;</span><span class="p">,</span><span class="nx">color1</span><span class="o">:</span><span class="nx">e</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span><span class="nx">color2</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="mf">1</span><span class="p">],</span><span class="s2">&quot;pq&quot;</span><span class="p">)}}}},</span><span class="nx">bd</span><span class="o">:</span><span class="p">{</span><span class="nx">transitions</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">createTransitions</span><span class="p">({</span><span class="nx">empty</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{}},</span><span class="nx">x$</span><span class="o">:</span><span class="p">{</span><span class="mf">0</span><span class="o">:</span><span class="p">{</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;!f&quot;</span><span class="p">,</span><span class="nx">revisit</span><span class="o">:!</span><span class="mf">0</span><span class="p">}},</span><span class="nx">formula$</span><span class="o">:</span><span class="p">{</span><span class="mf">0</span><span class="o">:</span><span class="p">{</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;f&quot;</span><span class="p">,</span><span class="nx">revisit</span><span class="o">:!</span><span class="mf">0</span><span class="p">}},</span><span class="k">else</span><span class="o">:</span><span class="p">{</span><span class="mf">0</span><span class="o">:</span><span class="p">{</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;!f&quot;</span><span class="p">,</span><span class="nx">revisit</span><span class="o">:!</span><span class="mf">0</span><span class="p">}},</span><span class="s2">&quot;-9.,9 no missing 0&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;9,9&quot;</span><span class="p">}},</span><span class="s2">&quot;.&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;insert&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="s2">&quot;electron dot&quot;</span><span class="p">}}},</span><span class="s2">&quot;a-z&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">f</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;tex-math&quot;</span><span class="p">}},</span><span class="nx">x</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;insert&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="s2">&quot;KV x&quot;</span><span class="p">}}},</span><span class="nx">letters</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;rm&quot;</span><span class="p">}},</span><span class="s2">&quot;&#39;&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;insert&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="s2">&quot;prime&quot;</span><span class="p">}}},</span><span class="s2">&quot;${(...)}$|$(...)$&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;tex-math&quot;</span><span class="p">}},</span><span class="s2">&quot;{(...)}&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;text&quot;</span><span class="p">}},</span><span class="s2">&quot;\\color{(...)}{(...)}1|\\color(...){(...)}2&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;color-output&quot;</span><span class="p">}},</span><span class="s2">&quot;\\color{(...)}0&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;color0-output&quot;</span><span class="p">}},</span><span class="s2">&quot;\\ce{(...)}&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;ce&quot;</span><span class="p">}},</span><span class="s2">&quot;\\,|\\x{}{}|\\x{}|\\x&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;copy&quot;</span><span class="p">}},</span><span class="nx">else2</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;copy&quot;</span><span class="p">}}}),</span><span class="nx">actions</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;color-output&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="k">return</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;color&quot;</span><span class="p">,</span><span class="nx">color1</span><span class="o">:</span><span class="nx">e</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span><span class="nx">color2</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="mf">1</span><span class="p">],</span><span class="s2">&quot;bd&quot;</span><span class="p">)}}}},</span><span class="nx">oxidation</span><span class="o">:</span><span class="p">{</span><span class="nx">transitions</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">createTransitions</span><span class="p">({</span><span class="nx">empty</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{}},</span><span class="s2">&quot;roman numeral&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;roman-numeral&quot;</span><span class="p">}},</span><span class="s2">&quot;${(...)}$|$(...)$&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;tex-math&quot;</span><span class="p">}},</span><span class="k">else</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;copy&quot;</span><span class="p">}}}),</span><span class="nx">actions</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;roman-numeral&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="k">return</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;roman numeral&quot;</span><span class="p">,</span><span class="nx">p1</span><span class="o">:</span><span class="nx">e</span><span class="o">||</span><span class="s2">&quot;&quot;</span><span class="p">}}}},</span><span class="s2">&quot;tex-math&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">transitions</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">createTransitions</span><span class="p">({</span><span class="nx">empty</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;output&quot;</span><span class="p">}},</span><span class="s2">&quot;\\ce{(...)}&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="s2">&quot;ce&quot;</span><span class="p">]}},</span><span class="s2">&quot;{...}|\\,|\\x{}{}|\\x{}|\\x&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;o=&quot;</span><span class="p">}},</span><span class="k">else</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;o=&quot;</span><span class="p">}}}),</span><span class="nx">actions</span><span class="o">:</span><span class="p">{</span><span class="nx">output</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">o</span><span class="p">){</span><span class="kd">var</span><span class="w"> </span><span class="nx">e</span><span class="o">=</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;tex-math&quot;</span><span class="p">,</span><span class="nx">p1</span><span class="o">:</span><span class="nx">t</span><span class="p">.</span><span class="nx">o</span><span class="p">};</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span><span class="w"> </span><span class="nx">n</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">t</span><span class="p">)</span><span class="ow">delete</span><span class="w"> </span><span class="nx">t</span><span class="p">[</span><span class="nx">n</span><span class="p">];</span><span class="k">return</span><span class="w"> </span><span class="nx">e</span><span class="p">}}}},</span><span class="s2">&quot;tex-math tight&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">transitions</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">createTransitions</span><span class="p">({</span><span class="nx">empty</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;output&quot;</span><span class="p">}},</span><span class="s2">&quot;\\ce{(...)}&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="s2">&quot;ce&quot;</span><span class="p">]}},</span><span class="s2">&quot;{...}|\\,|\\x{}{}|\\x{}|\\x&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;o=&quot;</span><span class="p">}},</span><span class="s2">&quot;-|+&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;tight operator&quot;</span><span class="p">}},</span><span class="k">else</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;o=&quot;</span><span class="p">}}}),</span><span class="nx">actions</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;tight operator&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="nx">t</span><span class="p">.</span><span class="nx">o</span><span class="o">=</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">o</span><span class="o">||</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;{&quot;</span><span class="o">+</span><span class="nx">e</span><span class="o">+</span><span class="s2">&quot;}&quot;</span><span class="p">},</span><span class="nx">output</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">o</span><span class="p">){</span><span class="kd">var</span><span class="w"> </span><span class="nx">e</span><span class="o">=</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;tex-math&quot;</span><span class="p">,</span><span class="nx">p1</span><span class="o">:</span><span class="nx">t</span><span class="p">.</span><span class="nx">o</span><span class="p">};</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span><span class="w"> </span><span class="nx">n</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">t</span><span class="p">)</span><span class="ow">delete</span><span class="w"> </span><span class="nx">t</span><span class="p">[</span><span class="nx">n</span><span class="p">];</span><span class="k">return</span><span class="w"> </span><span class="nx">e</span><span class="p">}}}},</span><span class="s2">&quot;9,9&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">transitions</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">createTransitions</span><span class="p">({</span><span class="nx">empty</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{}},</span><span class="s2">&quot;,&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;comma&quot;</span><span class="p">}},</span><span class="k">else</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;copy&quot;</span><span class="p">}}}),</span><span class="nx">actions</span><span class="o">:</span><span class="p">{</span><span class="nx">comma</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;commaDecimal&quot;</span><span class="p">}}}},</span><span class="nx">pu</span><span class="o">:</span><span class="p">{</span><span class="nx">transitions</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">createTransitions</span><span class="p">({</span><span class="nx">empty</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;output&quot;</span><span class="p">}},</span><span class="nx">space$</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="s2">&quot;space&quot;</span><span class="p">]}},</span><span class="s2">&quot;{[(|)]}&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;0|a&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;copy&quot;</span><span class="p">}},</span><span class="s2">&quot;(-)(9)^(-9)&quot;</span><span class="o">:</span><span class="p">{</span><span class="mf">0</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;number^&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;a&quot;</span><span class="p">}},</span><span class="s2">&quot;(-)(9.,9)(e)(99)&quot;</span><span class="o">:</span><span class="p">{</span><span class="mf">0</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;enumber&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;a&quot;</span><span class="p">}},</span><span class="nx">space</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;0|a&quot;</span><span class="o">:</span><span class="p">{}},</span><span class="s2">&quot;pm-operator&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;0|a&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;operator&quot;</span><span class="p">,</span><span class="nx">option</span><span class="o">:</span><span class="s2">&quot;\\pm&quot;</span><span class="p">},</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;0&quot;</span><span class="p">}},</span><span class="nx">operator</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;0|a&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;copy&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;0&quot;</span><span class="p">}},</span><span class="s2">&quot;//&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">d</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;o=&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;/&quot;</span><span class="p">}},</span><span class="s2">&quot;/&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">d</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;o=&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;/&quot;</span><span class="p">}},</span><span class="s2">&quot;{...}|else&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;0|d&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;d=&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;d&quot;</span><span class="p">},</span><span class="nx">a</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;space&quot;</span><span class="p">,</span><span class="s2">&quot;d=&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;d&quot;</span><span class="p">},</span><span class="s2">&quot;/|q&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;q=&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;q&quot;</span><span class="p">}}}),</span><span class="nx">actions</span><span class="o">:</span><span class="p">{</span><span class="nx">enumber</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="kd">var</span><span class="w"> </span><span class="nx">n</span><span class="o">=</span><span class="p">[];</span><span class="k">return</span><span class="s2">&quot;+-&quot;</span><span class="o">===</span><span class="nx">e</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">||</span><span class="s2">&quot;+/-&quot;</span><span class="o">===</span><span class="nx">e</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">?</span><span class="nx">n</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;\\pm &quot;</span><span class="p">)</span><span class="o">:</span><span class="nx">e</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">&amp;&amp;</span><span class="nx">n</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="mf">0</span><span class="p">]),</span><span class="nx">e</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">concatArray</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="mf">1</span><span class="p">],</span><span class="s2">&quot;pu-9,9&quot;</span><span class="p">)),</span><span class="nx">e</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="mf">2</span><span class="p">].</span><span class="nx">match</span><span class="p">(</span><span class="sr">/[,.]/</span><span class="p">)</span><span class="o">?</span><span class="nx">i</span><span class="p">.</span><span class="nx">concatArray</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="mf">2</span><span class="p">],</span><span class="s2">&quot;pu-9,9&quot;</span><span class="p">))</span><span class="o">:</span><span class="nx">n</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="mf">2</span><span class="p">])),</span><span class="nx">e</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span><span class="o">=</span><span class="nx">e</span><span class="p">[</span><span class="mf">4</span><span class="p">]</span><span class="o">||</span><span class="nx">e</span><span class="p">[</span><span class="mf">3</span><span class="p">],</span><span class="nx">e</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span><span class="o">=</span><span class="nx">e</span><span class="p">[</span><span class="mf">3</span><span class="p">].</span><span class="nx">trim</span><span class="p">(),</span><span class="s2">&quot;e&quot;</span><span class="o">===</span><span class="nx">e</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span><span class="o">||</span><span class="s2">&quot;*&quot;</span><span class="o">===</span><span class="nx">e</span><span class="p">[</span><span class="mf">3</span><span class="p">].</span><span class="nx">substr</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="mf">1</span><span class="p">)</span><span class="o">?</span><span class="nx">n</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;cdot&quot;</span><span class="p">})</span><span class="o">:</span><span class="nx">n</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;times&quot;</span><span class="p">}))),</span><span class="nx">e</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span><span class="o">&amp;&amp;</span><span class="nx">n</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;10^{&quot;</span><span class="o">+</span><span class="nx">e</span><span class="p">[</span><span class="mf">5</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot;}&quot;</span><span class="p">),</span><span class="nx">n</span><span class="p">},</span><span class="s2">&quot;number^&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="kd">var</span><span class="w"> </span><span class="nx">n</span><span class="o">=</span><span class="p">[];</span><span class="k">return</span><span class="s2">&quot;+-&quot;</span><span class="o">===</span><span class="nx">e</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">||</span><span class="s2">&quot;+/-&quot;</span><span class="o">===</span><span class="nx">e</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">?</span><span class="nx">n</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;\\pm &quot;</span><span class="p">)</span><span class="o">:</span><span class="nx">e</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">&amp;&amp;</span><span class="nx">n</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="mf">0</span><span class="p">]),</span><span class="nx">i</span><span class="p">.</span><span class="nx">concatArray</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="mf">1</span><span class="p">],</span><span class="s2">&quot;pu-9,9&quot;</span><span class="p">)),</span><span class="nx">n</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;^{&quot;</span><span class="o">+</span><span class="nx">e</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot;}&quot;</span><span class="p">),</span><span class="nx">n</span><span class="p">},</span><span class="nx">operator</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">n</span><span class="p">){</span><span class="k">return</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;operator&quot;</span><span class="p">,</span><span class="nx">kind_</span><span class="o">:</span><span class="nx">n</span><span class="o">||</span><span class="nx">e</span><span class="p">}},</span><span class="nx">space</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;pu-space-1&quot;</span><span class="p">}},</span><span class="nx">output</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="kd">var</span><span class="w"> </span><span class="nx">e</span><span class="p">,</span><span class="nx">n</span><span class="o">=</span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">match_</span><span class="p">(</span><span class="s2">&quot;{(...)}&quot;</span><span class="p">,</span><span class="nx">t</span><span class="p">.</span><span class="nx">d</span><span class="o">||</span><span class="s2">&quot;&quot;</span><span class="p">);</span><span class="nx">n</span><span class="o">&amp;&amp;</span><span class="s2">&quot;&quot;</span><span class="o">===</span><span class="nx">n</span><span class="p">.</span><span class="nx">remainder</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">d</span><span class="o">=</span><span class="nx">n</span><span class="p">.</span><span class="nx">match_</span><span class="p">);</span><span class="kd">var</span><span class="w"> </span><span class="nx">o</span><span class="o">=</span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">match_</span><span class="p">(</span><span class="s2">&quot;{(...)}&quot;</span><span class="p">,</span><span class="nx">t</span><span class="p">.</span><span class="nx">q</span><span class="o">||</span><span class="s2">&quot;&quot;</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">o</span><span class="o">&amp;&amp;</span><span class="s2">&quot;&quot;</span><span class="o">===</span><span class="nx">o</span><span class="p">.</span><span class="nx">remainder</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">q</span><span class="o">=</span><span class="nx">o</span><span class="p">.</span><span class="nx">match_</span><span class="p">),</span><span class="nx">t</span><span class="p">.</span><span class="nx">d</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">d</span><span class="o">=</span><span class="nx">t</span><span class="p">.</span><span class="nx">d</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u00B0C|\^oC|\^{o}C/g</span><span class="p">,</span><span class="s2">&quot;{}^{\\circ}C&quot;</span><span class="p">),</span><span class="nx">t</span><span class="p">.</span><span class="nx">d</span><span class="o">=</span><span class="nx">t</span><span class="p">.</span><span class="nx">d</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u00B0F|\^oF|\^{o}F/g</span><span class="p">,</span><span class="s2">&quot;{}^{\\circ}F&quot;</span><span class="p">)),</span><span class="nx">t</span><span class="p">.</span><span class="nx">q</span><span class="p">){</span><span class="nx">t</span><span class="p">.</span><span class="nx">q</span><span class="o">=</span><span class="nx">t</span><span class="p">.</span><span class="nx">q</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u00B0C|\^oC|\^{o}C/g</span><span class="p">,</span><span class="s2">&quot;{}^{\\circ}C&quot;</span><span class="p">),</span><span class="nx">t</span><span class="p">.</span><span class="nx">q</span><span class="o">=</span><span class="nx">t</span><span class="p">.</span><span class="nx">q</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u00B0F|\^oF|\^{o}F/g</span><span class="p">,</span><span class="s2">&quot;{}^{\\circ}F&quot;</span><span class="p">);</span><span class="kd">var</span><span class="w"> </span><span class="nx">a</span><span class="o">=</span><span class="p">{</span><span class="nx">d</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">d</span><span class="p">,</span><span class="s2">&quot;pu&quot;</span><span class="p">),</span><span class="nx">q</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">q</span><span class="p">,</span><span class="s2">&quot;pu&quot;</span><span class="p">)};</span><span class="s2">&quot;//&quot;</span><span class="o">===</span><span class="nx">t</span><span class="p">.</span><span class="nx">o</span><span class="o">?</span><span class="nx">e</span><span class="o">=</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;pu-frac&quot;</span><span class="p">,</span><span class="nx">p1</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">d</span><span class="p">,</span><span class="nx">p2</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">q</span><span class="p">}</span><span class="o">:</span><span class="p">(</span><span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">d</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="o">&gt;</span><span class="mf">1</span><span class="o">||</span><span class="nx">a</span><span class="p">.</span><span class="nx">q</span><span class="p">.</span><span class="nx">length</span><span class="o">&gt;</span><span class="mf">1</span><span class="o">?</span><span class="nx">e</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot; / &quot;</span><span class="p">})</span><span class="o">:</span><span class="nx">e</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;/&quot;</span><span class="p">}),</span><span class="nx">i</span><span class="p">.</span><span class="nx">concatArray</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">q</span><span class="p">))}</span><span class="k">else</span><span class="w"> </span><span class="nx">e</span><span class="o">=</span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">d</span><span class="p">,</span><span class="s2">&quot;pu-2&quot;</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span><span class="w"> </span><span class="nx">r</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">t</span><span class="p">)</span><span class="ow">delete</span><span class="w"> </span><span class="nx">t</span><span class="p">[</span><span class="nx">r</span><span class="p">];</span><span class="k">return</span><span class="w"> </span><span class="nx">e</span><span class="p">}}},</span><span class="s2">&quot;pu-2&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">transitions</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">createTransitions</span><span class="p">({</span><span class="nx">empty</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;output&quot;</span><span class="p">}},</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="s2">&quot;cdot&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;0&quot;</span><span class="p">}},</span><span class="s2">&quot;\\x&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;rm=&quot;</span><span class="p">}},</span><span class="nx">space</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output&quot;</span><span class="p">,</span><span class="s2">&quot;space&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;0&quot;</span><span class="p">}},</span><span class="s2">&quot;^{(...)}|^(-1)&quot;</span><span class="o">:</span><span class="p">{</span><span class="mf">1</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;^(-1)&quot;</span><span class="p">}},</span><span class="s2">&quot;-9.,9&quot;</span><span class="o">:</span><span class="p">{</span><span class="mf">0</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;rm=&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;0&quot;</span><span class="p">},</span><span class="mf">1</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;^(-1)&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;0&quot;</span><span class="p">}},</span><span class="s2">&quot;{...}|else&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;rm=&quot;</span><span class="p">,</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;1&quot;</span><span class="p">}}}),</span><span class="nx">actions</span><span class="o">:</span><span class="p">{</span><span class="nx">cdot</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;tight cdot&quot;</span><span class="p">}},</span><span class="s2">&quot;^(-1)&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="nx">t</span><span class="p">.</span><span class="nx">rm</span><span class="o">+=</span><span class="s2">&quot;^{&quot;</span><span class="o">+</span><span class="nx">e</span><span class="o">+</span><span class="s2">&quot;}&quot;</span><span class="p">},</span><span class="nx">space</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;pu-space-2&quot;</span><span class="p">}},</span><span class="nx">output</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="kd">var</span><span class="w"> </span><span class="nx">e</span><span class="o">=</span><span class="p">[];</span><span class="k">if</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">rm</span><span class="p">){</span><span class="kd">var</span><span class="w"> </span><span class="nx">n</span><span class="o">=</span><span class="nx">i</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">match_</span><span class="p">(</span><span class="s2">&quot;{(...)}&quot;</span><span class="p">,</span><span class="nx">t</span><span class="p">.</span><span class="nx">rm</span><span class="o">||</span><span class="s2">&quot;&quot;</span><span class="p">);</span><span class="nx">e</span><span class="o">=</span><span class="nx">n</span><span class="o">&amp;&amp;</span><span class="s2">&quot;&quot;</span><span class="o">===</span><span class="nx">n</span><span class="p">.</span><span class="nx">remainder</span><span class="o">?</span><span class="nx">i</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">n</span><span class="p">.</span><span class="nx">match_</span><span class="p">,</span><span class="s2">&quot;pu&quot;</span><span class="p">)</span><span class="o">:</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;rm&quot;</span><span class="p">,</span><span class="nx">p1</span><span class="o">:</span><span class="nx">t</span><span class="p">.</span><span class="nx">rm</span><span class="p">}}</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span><span class="w"> </span><span class="nx">o</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">t</span><span class="p">)</span><span class="ow">delete</span><span class="w"> </span><span class="nx">t</span><span class="p">[</span><span class="nx">o</span><span class="p">];</span><span class="k">return</span><span class="w"> </span><span class="nx">e</span><span class="p">}}},</span><span class="s2">&quot;pu-9,9&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">transitions</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">createTransitions</span><span class="p">({</span><span class="nx">empty</span><span class="o">:</span><span class="p">{</span><span class="mf">0</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;output-0&quot;</span><span class="p">},</span><span class="nx">o</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;output-o&quot;</span><span class="p">}},</span><span class="s2">&quot;,&quot;</span><span class="o">:</span><span class="p">{</span><span class="mf">0</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output-0&quot;</span><span class="p">,</span><span class="s2">&quot;comma&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;o&quot;</span><span class="p">}},</span><span class="s2">&quot;.&quot;</span><span class="o">:</span><span class="p">{</span><span class="mf">0</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;output-0&quot;</span><span class="p">,</span><span class="s2">&quot;copy&quot;</span><span class="p">],</span><span class="nx">nextState</span><span class="o">:</span><span class="s2">&quot;o&quot;</span><span class="p">}},</span><span class="k">else</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;*&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">action_</span><span class="o">:</span><span class="s2">&quot;text=&quot;</span><span class="p">}}}),</span><span class="nx">actions</span><span class="o">:</span><span class="p">{</span><span class="nx">comma</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span><span class="p">{</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;commaDecimal&quot;</span><span class="p">}},</span><span class="s2">&quot;output-0&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="kd">var</span><span class="w"> </span><span class="nx">e</span><span class="o">=</span><span class="p">[];</span><span class="k">if</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">text_</span><span class="o">=</span><span class="nx">t</span><span class="p">.</span><span class="nx">text_</span><span class="o">||</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">t</span><span class="p">.</span><span class="nx">text_</span><span class="p">.</span><span class="nx">length</span><span class="o">&gt;</span><span class="mf">4</span><span class="p">){</span><span class="kd">var</span><span class="w"> </span><span class="nx">n</span><span class="o">=</span><span class="nx">t</span><span class="p">.</span><span class="nx">text_</span><span class="p">.</span><span class="nx">length</span><span class="o">%</span><span class="mf">3</span><span class="p">;</span><span class="mf">0</span><span class="o">===</span><span class="nx">n</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">n</span><span class="o">=</span><span class="mf">3</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span><span class="w"> </span><span class="nx">o</span><span class="o">=</span><span class="nx">t</span><span class="p">.</span><span class="nx">text_</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mf">3</span><span class="p">;</span><span class="nx">o</span><span class="o">&gt;</span><span class="mf">0</span><span class="p">;</span><span class="nx">o</span><span class="o">-=</span><span class="mf">3</span><span class="p">)</span><span class="nx">e</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">text_</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="mf">3</span><span class="p">)),</span><span class="nx">e</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;1000 separator&quot;</span><span class="p">});</span><span class="nx">e</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">text_</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="nx">n</span><span class="p">)),</span><span class="nx">e</span><span class="p">.</span><span class="nx">reverse</span><span class="p">()}</span><span class="k">else</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">text_</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">t</span><span class="p">)</span><span class="ow">delete</span><span class="w"> </span><span class="nx">t</span><span class="p">[</span><span class="nx">a</span><span class="p">];</span><span class="k">return</span><span class="w"> </span><span class="nx">e</span><span class="p">},</span><span class="s2">&quot;output-o&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="kd">var</span><span class="w"> </span><span class="nx">e</span><span class="o">=</span><span class="p">[];</span><span class="k">if</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">text_</span><span class="o">=</span><span class="nx">t</span><span class="p">.</span><span class="nx">text_</span><span class="o">||</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">t</span><span class="p">.</span><span class="nx">text_</span><span class="p">.</span><span class="nx">length</span><span class="o">&gt;</span><span class="mf">4</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span><span class="w"> </span><span class="nx">n</span><span class="o">=</span><span class="nx">t</span><span class="p">.</span><span class="nx">text_</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mf">3</span><span class="p">,</span><span class="nx">o</span><span class="o">=</span><span class="mf">0</span><span class="p">;</span><span class="nx">o</span><span class="o">&lt;</span><span class="nx">n</span><span class="p">;</span><span class="nx">o</span><span class="o">+=</span><span class="mf">3</span><span class="p">)</span><span class="nx">e</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">text_</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="mf">3</span><span class="p">)),</span><span class="nx">e</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">type_</span><span class="o">:</span><span class="s2">&quot;1000 separator&quot;</span><span class="p">});</span><span class="nx">e</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">text_</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">o</span><span class="p">))}</span><span class="k">else</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">text_</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">t</span><span class="p">)</span><span class="ow">delete</span><span class="w"> </span><span class="nx">t</span><span class="p">[</span><span class="nx">a</span><span class="p">];</span><span class="k">return</span><span class="w"> </span><span class="nx">e</span><span class="p">}}}};</span><span class="kd">var</span><span class="w"> </span><span class="nx">c</span><span class="o">=</span><span class="p">{</span><span class="nx">go</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">t</span><span class="p">)</span><span class="k">return</span><span class="s2">&quot;&quot;</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span><span class="w"> </span><span class="nx">n</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">o</span><span class="o">=!</span><span class="mf">1</span><span class="p">,</span><span class="nx">a</span><span class="o">=</span><span class="mf">0</span><span class="p">;</span><span class="nx">a</span><span class="o">&lt;</span><span class="nx">t</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">a</span><span class="o">++</span><span class="p">){</span><span class="kd">var</span><span class="w"> </span><span class="nx">r</span><span class="o">=</span><span class="nx">t</span><span class="p">[</span><span class="nx">a</span><span class="p">];</span><span class="s2">&quot;string&quot;</span><span class="o">==</span><span class="ow">typeof</span><span class="w"> </span><span class="nx">r</span><span class="o">?</span><span class="nx">n</span><span class="o">+=</span><span class="nx">r</span><span class="o">:</span><span class="p">(</span><span class="nx">n</span><span class="o">+=</span><span class="nx">c</span><span class="p">.</span><span class="nx">_go2</span><span class="p">(</span><span class="nx">r</span><span class="p">),</span><span class="s2">&quot;1st-level escape&quot;</span><span class="o">===</span><span class="nx">r</span><span class="p">.</span><span class="nx">type_</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">o</span><span class="o">=!</span><span class="mf">0</span><span class="p">))}</span><span class="k">return</span><span class="w"> </span><span class="nx">e</span><span class="o">||</span><span class="nx">o</span><span class="o">||!</span><span class="nx">n</span><span class="o">||</span><span class="p">(</span><span class="nx">n</span><span class="o">=</span><span class="s2">&quot;{&quot;</span><span class="o">+</span><span class="nx">n</span><span class="o">+</span><span class="s2">&quot;}&quot;</span><span class="p">),</span><span class="nx">n</span><span class="p">},</span><span class="nx">_goInner</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">return</span><span class="w"> </span><span class="nx">t</span><span class="o">?</span><span class="nx">c</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="o">!</span><span class="mf">0</span><span class="p">)</span><span class="o">:</span><span class="nx">t</span><span class="p">},</span><span class="nx">_go2</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="kd">var</span><span class="w"> </span><span class="nx">e</span><span class="p">;</span><span class="k">switch</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">type_</span><span class="p">){</span><span class="k">case</span><span class="s2">&quot;chemfive&quot;</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">;</span><span class="kd">var</span><span class="w"> </span><span class="nx">n</span><span class="o">=</span><span class="p">{</span><span class="nx">a</span><span class="o">:</span><span class="nx">c</span><span class="p">.</span><span class="nx">_goInner</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">a</span><span class="p">),</span><span class="nx">b</span><span class="o">:</span><span class="nx">c</span><span class="p">.</span><span class="nx">_goInner</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">b</span><span class="p">),</span><span class="nx">p</span><span class="o">:</span><span class="nx">c</span><span class="p">.</span><span class="nx">_goInner</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">p</span><span class="p">),</span><span class="nx">o</span><span class="o">:</span><span class="nx">c</span><span class="p">.</span><span class="nx">_goInner</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">o</span><span class="p">),</span><span class="nx">q</span><span class="o">:</span><span class="nx">c</span><span class="p">.</span><span class="nx">_goInner</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">q</span><span class="p">),</span><span class="nx">d</span><span class="o">:</span><span class="nx">c</span><span class="p">.</span><span class="nx">_goInner</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">d</span><span class="p">)};</span><span class="nx">n</span><span class="p">.</span><span class="nx">a</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">n</span><span class="p">.</span><span class="nx">a</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^[+\-]/</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">n</span><span class="p">.</span><span class="nx">a</span><span class="o">=</span><span class="s2">&quot;{&quot;</span><span class="o">+</span><span class="nx">n</span><span class="p">.</span><span class="nx">a</span><span class="o">+</span><span class="s2">&quot;}&quot;</span><span class="p">),</span><span class="nx">e</span><span class="o">+=</span><span class="nx">n</span><span class="p">.</span><span class="nx">a</span><span class="o">+</span><span class="s2">&quot;\\,&quot;</span><span class="p">),(</span><span class="nx">n</span><span class="p">.</span><span class="nx">b</span><span class="o">||</span><span class="nx">n</span><span class="p">.</span><span class="nx">p</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="o">+=</span><span class="s2">&quot;{\\vphantom{X}}&quot;</span><span class="p">,</span><span class="nx">e</span><span class="o">+=</span><span class="s2">&quot;^{\\hphantom{&quot;</span><span class="o">+</span><span class="p">(</span><span class="nx">n</span><span class="p">.</span><span class="nx">b</span><span class="o">||</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;}}_{\\hphantom{&quot;</span><span class="o">+</span><span class="p">(</span><span class="nx">n</span><span class="p">.</span><span class="nx">p</span><span class="o">||</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;}}&quot;</span><span class="p">,</span><span class="nx">e</span><span class="o">+=</span><span class="s2">&quot;{\\vphantom{X}}&quot;</span><span class="p">,</span><span class="nx">e</span><span class="o">+=</span><span class="s2">&quot;^{\\smash[t]{\\vphantom{2}}\\mathllap{&quot;</span><span class="o">+</span><span class="p">(</span><span class="nx">n</span><span class="p">.</span><span class="nx">b</span><span class="o">||</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;}}&quot;</span><span class="p">,</span><span class="nx">e</span><span class="o">+=</span><span class="s2">&quot;_{\\vphantom{2}\\mathllap{\\smash[t]{&quot;</span><span class="o">+</span><span class="p">(</span><span class="nx">n</span><span class="p">.</span><span class="nx">p</span><span class="o">||</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;}}}&quot;</span><span class="p">),</span><span class="nx">n</span><span class="p">.</span><span class="nx">o</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">n</span><span class="p">.</span><span class="nx">o</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^[+\-]/</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">n</span><span class="p">.</span><span class="nx">o</span><span class="o">=</span><span class="s2">&quot;{&quot;</span><span class="o">+</span><span class="nx">n</span><span class="p">.</span><span class="nx">o</span><span class="o">+</span><span class="s2">&quot;}&quot;</span><span class="p">),</span><span class="nx">e</span><span class="o">+=</span><span class="nx">n</span><span class="p">.</span><span class="nx">o</span><span class="p">),</span><span class="s2">&quot;kv&quot;</span><span class="o">===</span><span class="nx">t</span><span class="p">.</span><span class="nx">dType</span><span class="o">?</span><span class="p">((</span><span class="nx">n</span><span class="p">.</span><span class="nx">d</span><span class="o">||</span><span class="nx">n</span><span class="p">.</span><span class="nx">q</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="o">+=</span><span class="s2">&quot;{\\vphantom{X}}&quot;</span><span class="p">),</span><span class="nx">n</span><span class="p">.</span><span class="nx">d</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="o">+=</span><span class="s2">&quot;^{&quot;</span><span class="o">+</span><span class="nx">n</span><span class="p">.</span><span class="nx">d</span><span class="o">+</span><span class="s2">&quot;}&quot;</span><span class="p">),</span><span class="nx">n</span><span class="p">.</span><span class="nx">q</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="o">+=</span><span class="s2">&quot;_{\\smash[t]{&quot;</span><span class="o">+</span><span class="nx">n</span><span class="p">.</span><span class="nx">q</span><span class="o">+</span><span class="s2">&quot;}}&quot;</span><span class="p">))</span><span class="o">:</span><span class="s2">&quot;oxidation&quot;</span><span class="o">===</span><span class="nx">t</span><span class="p">.</span><span class="nx">dType</span><span class="o">?</span><span class="p">(</span><span class="nx">n</span><span class="p">.</span><span class="nx">d</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="o">+=</span><span class="s2">&quot;{\\vphantom{X}}&quot;</span><span class="p">,</span><span class="nx">e</span><span class="o">+=</span><span class="s2">&quot;^{&quot;</span><span class="o">+</span><span class="nx">n</span><span class="p">.</span><span class="nx">d</span><span class="o">+</span><span class="s2">&quot;}&quot;</span><span class="p">),</span><span class="nx">n</span><span class="p">.</span><span class="nx">q</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="o">+=</span><span class="s2">&quot;{\\vphantom{X}}&quot;</span><span class="p">,</span><span class="nx">e</span><span class="o">+=</span><span class="s2">&quot;_{\\smash[t]{&quot;</span><span class="o">+</span><span class="nx">n</span><span class="p">.</span><span class="nx">q</span><span class="o">+</span><span class="s2">&quot;}}&quot;</span><span class="p">))</span><span class="o">:</span><span class="p">(</span><span class="nx">n</span><span class="p">.</span><span class="nx">q</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="o">+=</span><span class="s2">&quot;{\\vphantom{X}}&quot;</span><span class="p">,</span><span class="nx">e</span><span class="o">+=</span><span class="s2">&quot;_{\\smash[t]{&quot;</span><span class="o">+</span><span class="nx">n</span><span class="p">.</span><span class="nx">q</span><span class="o">+</span><span class="s2">&quot;}}&quot;</span><span class="p">),</span><span class="nx">n</span><span class="p">.</span><span class="nx">d</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="o">+=</span><span class="s2">&quot;{\\vphantom{X}}&quot;</span><span class="p">,</span><span class="nx">e</span><span class="o">+=</span><span class="s2">&quot;^{&quot;</span><span class="o">+</span><span class="nx">n</span><span class="p">.</span><span class="nx">d</span><span class="o">+</span><span class="s2">&quot;}&quot;</span><span class="p">));</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;rm&quot;</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;\\mathrm{&quot;</span><span class="o">+</span><span class="nx">t</span><span class="p">.</span><span class="nx">p1</span><span class="o">+</span><span class="s2">&quot;}&quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;text&quot;</span><span class="o">:</span><span class="nx">t</span><span class="p">.</span><span class="nx">p1</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/[\^_]/</span><span class="p">)</span><span class="o">?</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">p1</span><span class="o">=</span><span class="nx">t</span><span class="p">.</span><span class="nx">p1</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="s2">&quot;~&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">,</span><span class="s2">&quot;\\text{-}&quot;</span><span class="p">),</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;\\mathrm{&quot;</span><span class="o">+</span><span class="nx">t</span><span class="p">.</span><span class="nx">p1</span><span class="o">+</span><span class="s2">&quot;}&quot;</span><span class="p">)</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;\\text{&quot;</span><span class="o">+</span><span class="nx">t</span><span class="p">.</span><span class="nx">p1</span><span class="o">+</span><span class="s2">&quot;}&quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;roman numeral&quot;</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;\\mathrm{&quot;</span><span class="o">+</span><span class="nx">t</span><span class="p">.</span><span class="nx">p1</span><span class="o">+</span><span class="s2">&quot;}&quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;state of aggregation&quot;</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;\\mskip2mu &quot;</span><span class="o">+</span><span class="nx">c</span><span class="p">.</span><span class="nx">_goInner</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">p1</span><span class="p">);</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;state of aggregation subscript&quot;</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;\\mskip1mu &quot;</span><span class="o">+</span><span class="nx">c</span><span class="p">.</span><span class="nx">_goInner</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">p1</span><span class="p">);</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;bond&quot;</span><span class="o">:</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">e</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">_getBond</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">kind_</span><span class="p">)))</span><span class="k">throw</span><span class="p">[</span><span class="s2">&quot;MhchemErrorBond&quot;</span><span class="p">,</span><span class="s2">&quot;mhchem Error. Unknown bond type (&quot;</span><span class="o">+</span><span class="nx">t</span><span class="p">.</span><span class="nx">kind_</span><span class="o">+</span><span class="s2">&quot;)&quot;</span><span class="p">];</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;frac&quot;</span><span class="o">:</span><span class="kd">var</span><span class="w"> </span><span class="nx">o</span><span class="o">=</span><span class="s2">&quot;\\frac{&quot;</span><span class="o">+</span><span class="nx">t</span><span class="p">.</span><span class="nx">p1</span><span class="o">+</span><span class="s2">&quot;}{&quot;</span><span class="o">+</span><span class="nx">t</span><span class="p">.</span><span class="nx">p2</span><span class="o">+</span><span class="s2">&quot;}&quot;</span><span class="p">;</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;\\mathchoice{\\textstyle&quot;</span><span class="o">+</span><span class="nx">o</span><span class="o">+</span><span class="s2">&quot;}{&quot;</span><span class="o">+</span><span class="nx">o</span><span class="o">+</span><span class="s2">&quot;}{&quot;</span><span class="o">+</span><span class="nx">o</span><span class="o">+</span><span class="s2">&quot;}{&quot;</span><span class="o">+</span><span class="nx">o</span><span class="o">+</span><span class="s2">&quot;}&quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;pu-frac&quot;</span><span class="o">:</span><span class="kd">var</span><span class="w"> </span><span class="nx">a</span><span class="o">=</span><span class="s2">&quot;\\frac{&quot;</span><span class="o">+</span><span class="nx">c</span><span class="p">.</span><span class="nx">_goInner</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">p1</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;}{&quot;</span><span class="o">+</span><span class="nx">c</span><span class="p">.</span><span class="nx">_goInner</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">p2</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;}&quot;</span><span class="p">;</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;\\mathchoice{\\textstyle&quot;</span><span class="o">+</span><span class="nx">a</span><span class="o">+</span><span class="s2">&quot;}{&quot;</span><span class="o">+</span><span class="nx">a</span><span class="o">+</span><span class="s2">&quot;}{&quot;</span><span class="o">+</span><span class="nx">a</span><span class="o">+</span><span class="s2">&quot;}{&quot;</span><span class="o">+</span><span class="nx">a</span><span class="o">+</span><span class="s2">&quot;}&quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;tex-math&quot;</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="nx">t</span><span class="p">.</span><span class="nx">p1</span><span class="o">+</span><span class="s2">&quot; &quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;frac-ce&quot;</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;\\frac{&quot;</span><span class="o">+</span><span class="nx">c</span><span class="p">.</span><span class="nx">_goInner</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">p1</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;}{&quot;</span><span class="o">+</span><span class="nx">c</span><span class="p">.</span><span class="nx">_goInner</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">p2</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;}&quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;overset&quot;</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;\\overset{&quot;</span><span class="o">+</span><span class="nx">c</span><span class="p">.</span><span class="nx">_goInner</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">p1</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;}{&quot;</span><span class="o">+</span><span class="nx">c</span><span class="p">.</span><span class="nx">_goInner</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">p2</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;}&quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;underset&quot;</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;\\underset{&quot;</span><span class="o">+</span><span class="nx">c</span><span class="p">.</span><span class="nx">_goInner</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">p1</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;}{&quot;</span><span class="o">+</span><span class="nx">c</span><span class="p">.</span><span class="nx">_goInner</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">p2</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;}&quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;underbrace&quot;</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;\\underbrace{&quot;</span><span class="o">+</span><span class="nx">c</span><span class="p">.</span><span class="nx">_goInner</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">p1</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;}_{&quot;</span><span class="o">+</span><span class="nx">c</span><span class="p">.</span><span class="nx">_goInner</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">p2</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;}&quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;color&quot;</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;{\\color{&quot;</span><span class="o">+</span><span class="nx">t</span><span class="p">.</span><span class="nx">color1</span><span class="o">+</span><span class="s2">&quot;}{&quot;</span><span class="o">+</span><span class="nx">c</span><span class="p">.</span><span class="nx">_goInner</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">color2</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;}}&quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;color0&quot;</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;\\color{&quot;</span><span class="o">+</span><span class="nx">t</span><span class="p">.</span><span class="nx">color</span><span class="o">+</span><span class="s2">&quot;}&quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;arrow&quot;</span><span class="o">:</span><span class="kd">var</span><span class="w"> </span><span class="nx">r</span><span class="o">=</span><span class="p">{</span><span class="nx">rd</span><span class="o">:</span><span class="nx">c</span><span class="p">.</span><span class="nx">_goInner</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">rd</span><span class="p">),</span><span class="nx">rq</span><span class="o">:</span><span class="nx">c</span><span class="p">.</span><span class="nx">_goInner</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">rq</span><span class="p">)},</span><span class="nx">i</span><span class="o">=</span><span class="s2">&quot;\\x&quot;</span><span class="o">+</span><span class="nx">c</span><span class="p">.</span><span class="nx">_getArrow</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">r</span><span class="p">);</span><span class="nx">r</span><span class="p">.</span><span class="nx">rq</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">i</span><span class="o">+=</span><span class="s2">&quot;[{&quot;</span><span class="o">+</span><span class="nx">r</span><span class="p">.</span><span class="nx">rq</span><span class="o">+</span><span class="s2">&quot;}]&quot;</span><span class="p">),</span><span class="nx">e</span><span class="o">=</span><span class="nx">i</span><span class="o">+=</span><span class="nx">r</span><span class="p">.</span><span class="nx">rd</span><span class="o">?</span><span class="s2">&quot;{&quot;</span><span class="o">+</span><span class="nx">r</span><span class="p">.</span><span class="nx">rd</span><span class="o">+</span><span class="s2">&quot;}&quot;</span><span class="o">:</span><span class="s2">&quot;{}&quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;operator&quot;</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">_getOperator</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">kind_</span><span class="p">);</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;1st-level escape&quot;</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="nx">t</span><span class="p">.</span><span class="nx">p1</span><span class="o">+</span><span class="s2">&quot; &quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;space&quot;</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;entitySkip&quot;</span><span class="o">:</span><span class="k">case</span><span class="s2">&quot;pu-space-1&quot;</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;~&quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;pu-space-2&quot;</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;\\mkern3mu &quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;1000 separator&quot;</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;\\mkern2mu &quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;commaDecimal&quot;</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;{,}&quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;comma enumeration L&quot;</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;{&quot;</span><span class="o">+</span><span class="nx">t</span><span class="p">.</span><span class="nx">p1</span><span class="o">+</span><span class="s2">&quot;}\\mkern6mu &quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;comma enumeration M&quot;</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;{&quot;</span><span class="o">+</span><span class="nx">t</span><span class="p">.</span><span class="nx">p1</span><span class="o">+</span><span class="s2">&quot;}\\mkern3mu &quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;comma enumeration S&quot;</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;{&quot;</span><span class="o">+</span><span class="nx">t</span><span class="p">.</span><span class="nx">p1</span><span class="o">+</span><span class="s2">&quot;}\\mkern1mu &quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;hyphen&quot;</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;\\text{-}&quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;addition compound&quot;</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;\\,{\\cdot}\\,&quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;electron dot&quot;</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;\\mkern1mu \\bullet\\mkern1mu &quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;KV x&quot;</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;{\\times}&quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;prime&quot;</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;\\prime &quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;cdot&quot;</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;\\cdot &quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;tight cdot&quot;</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;\\mkern1mu{\\cdot}\\mkern1mu &quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;times&quot;</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;\\times &quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;circa&quot;</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;{\\sim}&quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;^&quot;</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;uparrow&quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;v&quot;</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;downarrow&quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;ellipsis&quot;</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;\\ldots &quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;/&quot;</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;/&quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot; / &quot;</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;\\,/\\,&quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">default</span><span class="o">:</span><span class="k">throw</span><span class="p">[</span><span class="s2">&quot;MhchemBugT&quot;</span><span class="p">,</span><span class="s2">&quot;mhchem bug T. Please report.&quot;</span><span class="p">]}</span><span class="k">return</span><span class="w"> </span><span class="nx">e</span><span class="p">},</span><span class="nx">_getArrow</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">switch</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">case</span><span class="s2">&quot;-&gt;&quot;</span><span class="o">:</span><span class="k">case</span><span class="s2">&quot;\u2192&quot;</span><span class="o">:</span><span class="k">case</span><span class="s2">&quot;\u27f6&quot;</span><span class="o">:</span><span class="k">return</span><span class="s2">&quot;rightarrow&quot;</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;&lt;-&quot;</span><span class="o">:</span><span class="k">return</span><span class="s2">&quot;leftarrow&quot;</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;&lt;-&gt;&quot;</span><span class="o">:</span><span class="k">return</span><span class="s2">&quot;leftrightarrow&quot;</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;&lt;--\x3e&quot;</span><span class="o">:</span><span class="k">return</span><span class="s2">&quot;rightleftarrows&quot;</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;&lt;=&gt;&quot;</span><span class="o">:</span><span class="k">case</span><span class="s2">&quot;\u21cc&quot;</span><span class="o">:</span><span class="k">return</span><span class="s2">&quot;rightleftharpoons&quot;</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;&lt;=&gt;&gt;&quot;</span><span class="o">:</span><span class="k">return</span><span class="s2">&quot;rightequilibrium&quot;</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;&lt;&lt;=&gt;&quot;</span><span class="o">:</span><span class="k">return</span><span class="s2">&quot;leftequilibrium&quot;</span><span class="p">;</span><span class="k">default</span><span class="o">:</span><span class="k">throw</span><span class="p">[</span><span class="s2">&quot;MhchemBugT&quot;</span><span class="p">,</span><span class="s2">&quot;mhchem bug T. Please report.&quot;</span><span class="p">]}},</span><span class="nx">_getBond</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">switch</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">case</span><span class="s2">&quot;-&quot;</span><span class="o">:</span><span class="k">case</span><span class="s2">&quot;1&quot;</span><span class="o">:</span><span class="k">return</span><span class="s2">&quot;{-}&quot;</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;=&quot;</span><span class="o">:</span><span class="k">case</span><span class="s2">&quot;2&quot;</span><span class="o">:</span><span class="k">return</span><span class="s2">&quot;{=}&quot;</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;#&quot;</span><span class="o">:</span><span class="k">case</span><span class="s2">&quot;3&quot;</span><span class="o">:</span><span class="k">return</span><span class="s2">&quot;{\\equiv}&quot;</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;~&quot;</span><span class="o">:</span><span class="k">return</span><span class="s2">&quot;{\\tripledash}&quot;</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;~-&quot;</span><span class="o">:</span><span class="k">return</span><span class="s2">&quot;{\\mathrlap{\\raisebox{-.1em}{$-$}}\\raisebox{.1em}{$\\tripledash$}}&quot;</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;~=&quot;</span><span class="o">:</span><span class="k">case</span><span class="s2">&quot;~--&quot;</span><span class="o">:</span><span class="k">return</span><span class="s2">&quot;{\\mathrlap{\\raisebox{-.2em}{$-$}}\\mathrlap{\\raisebox{.2em}{$\\tripledash$}}-}&quot;</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;-~-&quot;</span><span class="o">:</span><span class="k">return</span><span class="s2">&quot;{\\mathrlap{\\raisebox{-.2em}{$-$}}\\mathrlap{\\raisebox{.2em}{$-$}}\\tripledash}&quot;</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;...&quot;</span><span class="o">:</span><span class="k">return</span><span class="s2">&quot;{{\\cdot}{\\cdot}{\\cdot}}&quot;</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;....&quot;</span><span class="o">:</span><span class="k">return</span><span class="s2">&quot;{{\\cdot}{\\cdot}{\\cdot}{\\cdot}}&quot;</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;-&gt;&quot;</span><span class="o">:</span><span class="k">return</span><span class="s2">&quot;{\\rightarrow}&quot;</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;&lt;-&quot;</span><span class="o">:</span><span class="k">return</span><span class="s2">&quot;{\\leftarrow}&quot;</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;&lt;&quot;</span><span class="o">:</span><span class="k">return</span><span class="s2">&quot;{&lt;}&quot;</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;&gt;&quot;</span><span class="o">:</span><span class="k">return</span><span class="s2">&quot;{&gt;}&quot;</span><span class="p">;</span><span class="k">default</span><span class="o">:</span><span class="k">throw</span><span class="p">[</span><span class="s2">&quot;MhchemBugT&quot;</span><span class="p">,</span><span class="s2">&quot;mhchem bug T. Please report.&quot;</span><span class="p">]}},</span><span class="nx">_getOperator</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">switch</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">case</span><span class="s2">&quot;+&quot;</span><span class="o">:</span><span class="k">return</span><span class="s2">&quot; {}+{} &quot;</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;-&quot;</span><span class="o">:</span><span class="k">return</span><span class="s2">&quot; {}-{} &quot;</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;=&quot;</span><span class="o">:</span><span class="k">return</span><span class="s2">&quot; {}={} &quot;</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;&lt;&quot;</span><span class="o">:</span><span class="k">return</span><span class="s2">&quot; {}&lt;{} &quot;</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;&gt;&quot;</span><span class="o">:</span><span class="k">return</span><span class="s2">&quot; {}&gt;{} &quot;</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;&lt;&lt;&quot;</span><span class="o">:</span><span class="k">return</span><span class="s2">&quot; {}\\ll{} &quot;</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;&gt;&gt;&quot;</span><span class="o">:</span><span class="k">return</span><span class="s2">&quot; {}\\gg{} &quot;</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;\\pm&quot;</span><span class="o">:</span><span class="k">return</span><span class="s2">&quot; {}\\pm{} &quot;</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;\\approx&quot;</span><span class="o">:</span><span class="k">case</span><span class="s2">&quot;$\\approx$&quot;</span><span class="o">:</span><span class="k">return</span><span class="s2">&quot; {}\\approx{} &quot;</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;v&quot;</span><span class="o">:</span><span class="k">case</span><span class="s2">&quot;(v)&quot;</span><span class="o">:</span><span class="k">return</span><span class="s2">&quot; \\downarrow{} &quot;</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;^&quot;</span><span class="o">:</span><span class="k">case</span><span class="s2">&quot;(^)&quot;</span><span class="o">:</span><span class="k">return</span><span class="s2">&quot; \\uparrow{} &quot;</span><span class="p">;</span><span class="k">default</span><span class="o">:</span><span class="k">throw</span><span class="p">[</span><span class="s2">&quot;MhchemBugT&quot;</span><span class="p">,</span><span class="s2">&quot;mhchem bug T. Please report.&quot;</span><span class="p">]}}}}]).</span><span class="k">default</span><span class="p">});</span>
</pre></div>
</div>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">twit</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, jare.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../../_sources/static/katex/contrib/mhchem.min.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>