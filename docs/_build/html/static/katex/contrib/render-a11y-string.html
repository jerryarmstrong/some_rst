<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>docs/static/katex/contrib/render-a11y-string.js &#8212; twit  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b3523f8e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css?v=039e1c02" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js?v=b3ba4146"></script>
    <script src="../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="docs-static-katex-contrib-render-a11y-string-js">
<h1>docs/static/katex/contrib/render-a11y-string.js<a class="headerlink" href="#docs-static-katex-contrib-render-a11y-string-js" title="Permalink to this heading">¶</a></h1>
<p>Last edited: 2023-08-11 21:38:33</p>
<p>Contents:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="nx">webpackUniversalModuleDefinition</span><span class="p">(</span><span class="nx">root</span><span class="p">,</span><span class="w"> </span><span class="nx">factory</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="ow">typeof</span><span class="w"> </span><span class="nx">exports</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;object&#39;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="ow">typeof</span><span class="w"> </span><span class="nx">module</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;object&#39;</span><span class="p">)</span>
<span class="w">            </span><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">factory</span><span class="p">(</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;katex&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="ow">typeof</span><span class="w"> </span><span class="nx">define</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;function&#39;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">define</span><span class="p">.</span><span class="nx">amd</span><span class="p">)</span>
<span class="w">            </span><span class="nx">define</span><span class="p">([</span><span class="s2">&quot;katex&quot;</span><span class="p">],</span><span class="w"> </span><span class="nx">factory</span><span class="p">);</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kd">var</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">typeof</span><span class="w"> </span><span class="nx">exports</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;object&#39;</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">factory</span><span class="p">(</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;katex&quot;</span><span class="p">))</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">factory</span><span class="p">(</span><span class="nx">root</span><span class="p">[</span><span class="s2">&quot;katex&quot;</span><span class="p">]);</span>
<span class="w">            </span><span class="k">for</span><span class="p">(</span><span class="kd">var</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">a</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="ow">typeof</span><span class="w"> </span><span class="nx">exports</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;object&#39;</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">exports</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">root</span><span class="p">)[</span><span class="nx">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
<span class="w">    </span><span class="p">}</span>
</pre></div>
</div>
<p>})((typeof self !== ‘undefined’ ? self : this), function(__WEBPACK_EXTERNAL_MODULE__0__) {
return /<strong>**</strong>/ (function(modules) { // webpackBootstrap
/<strong>**</strong>/        // The module cache
/<strong>**</strong>/        var installedModules = {};
/<strong>**</strong>/
/<strong>**</strong>/        // The require function
/<strong>**</strong>/        function __webpack_require__(moduleId) {
/<strong>**</strong>/
/<strong>**</strong>/                // Check if module is in cache
/<strong>**</strong>/                if(installedModules[moduleId]) {
/<strong>**</strong>/                        return installedModules[moduleId].exports;
/<strong>**</strong>/                }
/<strong>**</strong>/                // Create a new module (and put it into the cache)
/<strong>**</strong>/                var module = installedModules[moduleId] = {
/<strong>**</strong>/                        i: moduleId,
/<strong>**</strong>/                        l: false,
/<strong>**</strong>/                        exports: {}
/<strong>**</strong>/                };
/<strong>**</strong>/
/<strong>**</strong>/                // Execute the module function
/<strong>**</strong>/                modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/<strong>**</strong>/
/<strong>**</strong>/                // Flag the module as loaded
/<strong>**</strong>/                module.l = true;
/<strong>**</strong>/
/<strong>**</strong>/                // Return the exports of the module
/<strong>**</strong>/                return module.exports;
/<strong>**</strong>/        }
/<strong>**</strong>/
/<strong>**</strong>/
/<strong>**</strong>/        // expose the modules object (__webpack_modules__)
/<strong>**</strong>/        __webpack_require__.m = modules;
/<strong>**</strong>/
/<strong>**</strong>/        // expose the module cache
/<strong>**</strong>/        __webpack_require__.c = installedModules;
/<strong>**</strong>/
/<strong>**</strong>/        // define getter function for harmony exports
/<strong>**</strong>/        __webpack_require__.d = function(exports, name, getter) {
/<strong>**</strong>/                if(!__webpack_require__.o(exports, name)) {
/<strong>**</strong>/                        Object.defineProperty(exports, name, { enumerable: true, get: getter });
/<strong>**</strong>/                }
/<strong>**</strong>/        };
/<strong>**</strong>/
/<strong>**</strong>/        // define __esModule on exports
/<strong>**</strong>/        __webpack_require__.r = function(exports) {
/<strong>**</strong>/                if(typeof Symbol !== ‘undefined’ &amp;&amp; Symbol.toStringTag) {
/<strong>**</strong>/                        Object.defineProperty(exports, Symbol.toStringTag, { value: ‘Module’ });
/<strong>**</strong>/                }
/<strong>**</strong>/                Object.defineProperty(exports, ‘__esModule’, { value: true });
/<strong>**</strong>/        };
/<strong>**</strong>/
/<strong>**</strong>/        // create a fake namespace object
/<strong>**</strong>/        // mode &amp; 1: value is a module id, require it
/<strong>**</strong>/        // mode &amp; 2: merge all properties of value into the ns
/<strong>**</strong>/        // mode &amp; 4: return value when already ns object
/<strong>**</strong>/        // mode &amp; 8|1: behave like require
/<strong>**</strong>/        __webpack_require__.t = function(value, mode) {
/<strong>**</strong>/                if(mode &amp; 1) value = __webpack_require__(value);
/<strong>**</strong>/                if(mode &amp; 8) return value;
/<strong>**</strong>/                if((mode &amp; 4) &amp;&amp; typeof value === ‘object’ &amp;&amp; value &amp;&amp; value.__esModule) return value;
/<strong>**</strong>/                var ns = Object.create(null);
/<strong>**</strong>/                __webpack_require__.r(ns);
/<strong>**</strong>/                Object.defineProperty(ns, ‘default’, { enumerable: true, value: value });
/<strong>**</strong>/                if(mode &amp; 2 &amp;&amp; typeof value != ‘string’) for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/<strong>**</strong>/                return ns;
/<strong>**</strong>/        };
/<strong>**</strong>/
/<strong>**</strong>/        // getDefaultExport function for compatibility with non-harmony modules
/<strong>**</strong>/        __webpack_require__.n = function(module) {
/<strong>**</strong>/                var getter = module &amp;&amp; module.__esModule ?
/<strong>**</strong>/                        function getDefault() { return module[‘default’]; } :
/<strong>**</strong>/                        function getModuleExports() { return module; };
/<strong>**</strong>/                __webpack_require__.d(getter, ‘a’, getter);
/<strong>**</strong>/                return getter;
/<strong>**</strong>/        };
/<strong>**</strong>/
/<strong>**</strong>/        // Object.prototype.hasOwnProperty.call
/<strong>**</strong>/        __webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/<strong>**</strong>/
/<strong>**</strong>/        // __webpack_public_path__
/<strong>**</strong>/        __webpack_require__.p = “”;
/<strong>**</strong>/
/<strong>**</strong>/
/<strong>**</strong>/        // Load entry module and return exports
/<strong>**</strong>/        return __webpack_require__(__webpack_require__.s = 1);
/<strong>**</strong>/ })
/<strong>********************************************************************</strong>/
/<strong>**</strong>/ ([
/* 0 <em>/
/**</em>/ (function(module, exports) {</p>
<p>module.exports = __WEBPACK_EXTERNAL_MODULE__0__;</p>
<p>/<strong>*/ }),
/* 1 */
/*</strong>/ (function(module, __webpack_exports__, __webpack_require__) {</p>
<p>“use strict”;
__webpack_require__.r(__webpack_exports__);
/* harmony import <em>/ var katex__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(0);
/</em> harmony import <em>/ var katex__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__</em>/__webpack_require__.n(katex__WEBPACK_IMPORTED_MODULE_0__);
/**</p>
<blockquote>
<div><ul class="simple">
<li><p>renderA11yString returns a readable string.</p></li>
<li></li>
<li><p>In some cases the string will have the proper semantic math</p></li>
<li><p>meaning,:</p></li>
<li><p>renderA11yString(”\frac{1}{2}””)</p></li>
<li><p>-&gt; “start fraction, 1, divided by, 2, end fraction”</p></li>
<li></li>
<li><p>However, other cases do not:</p></li>
<li><p>renderA11yString(“f(x) = x^2”)</p></li>
<li><p>-&gt; “f, left parenthesis, x, right parenthesis, equals, x, squared”</p></li>
<li></li>
<li><p>The commas in the string aim to increase ease of understanding</p></li>
<li><p>when read by a screenreader.</p></li>
</ul>
<p><a href="#id1"><span class="problematic" id="id2">*</span></a>/</p>
</div></blockquote>
<p>// NOTE: since we’re importing types here these files won’t actually be
// included in the build.
// $FlowIgnore: we import the types directly anyways</p>
<dl class="simple">
<dt>var stringMap = {</dt><dd><p>“(”: “left parenthesis”,
“)”: “right parenthesis”,
“[”: “open bracket”,
“]”: “close bracket”,
“\{”: “left brace”,
“\}”: “right brace”,
“\lvert”: “open vertical bar”,
“\rvert”: “close vertical bar”,
“|”: “vertical bar”,
“\uparrow”: “up arrow”,
“\Uparrow”: “up arrow”,
“\downarrow”: “down arrow”,
“\Downarrow”: “down arrow”,
“\updownarrow”: “up down arrow”,
“\leftarrow”: “left arrow”,
“\Leftarrow”: “left arrow”,
“\rightarrow”: “right arrow”,
“\Rightarrow”: “right arrow”,
“\langle”: “open angle”,
“\rangle”: “close angle”,
“\lfloor”: “open floor”,
“\rfloor”: “close floor”,
“\int”: “integral”,
“\intop”: “integral”,
“\lim”: “limit”,
“\ln”: “natural log”,
“\log”: “log”,
“\sin”: “sine”,
“\cos”: “cosine”,
“\tan”: “tangent”,
“\cot”: “cotangent”,
“\sum”: “sum”,
“/”: “slash”,
“,”: “comma”,
“.”: “point”,
“-”: “negative”,
“+”: “plus”,
“~”: “tilde”,
“:”: “colon”,
“?”: “question mark”,
“’”: “apostrophe”,
“\%”: “percent”,
“ “: “space”,
“\ “: “space”,
“\$”: “dollar sign”,
“\angle”: “angle”,
“\degree”: “degree”,
“\circ”: “circle”,
“\vec”: “vector”,
“\triangle”: “triangle”,
“\pi”: “pi”,
“\prime”: “prime”,
“\infty”: “infinity”,
“\alpha”: “alpha”,
“\beta”: “beta”,
“\gamma”: “gamma”,
“\omega”: “omega”,
“\theta”: “theta”,
“\sigma”: “sigma”,
“\lambda”: “lambda”,
“\tau”: “tau”,
“\Delta”: “delta”,
“\delta”: “delta”,
“\mu”: “mu”,
“\rho”: “rho”,
“\nabla”: “del”,
“\ell”: “ell”,
“\ldots”: “dots”,
// TODO: add entries for all accents
“\hat”: “hat”,
“\acute”: “acute”</p>
</dd>
</dl>
<p>};
var powerMap = {</p>
<blockquote>
<div><p>“prime”: “prime”,
“degree”: “degrees”,
“circle”: “degrees”,
“2”: “squared”,
“3”: “cubed”</p>
</div></blockquote>
<p>};
var openMap = {</p>
<blockquote>
<div><p>“|”: “open vertical bar”,
“.”: “”</p>
</div></blockquote>
<p>};
var closeMap = {</p>
<blockquote>
<div><p>“|”: “close vertical bar”,
“.”: “”</p>
</div></blockquote>
<p>};
var binMap = {</p>
<blockquote>
<div><p>“+”: “plus”,
“-”: “minus”,
“\pm”: “plus minus”,
“\cdot”: “dot”,
“*”: “times”,
“/”: “divided by”,
“\times”: “times”,
“\div”: “divided by”,
“\circ”: “circle”,
“\bullet”: “bullet”</p>
</div></blockquote>
<p>};
var relMap = {</p>
<blockquote>
<div><p>“=”: “equals”,
“\approx”: “approximately equals”,
“≠”: “does not equal”,
“\geq”: “is greater than or equal to”,
“\ge”: “is greater than or equal to”,
“\leq”: “is less than or equal to”,
“\le”: “is less than or equal to”,
“&gt;”: “is greater than”,
“&lt;”: “is less than”,
“\leftarrow”: “left arrow”,
“\Leftarrow”: “left arrow”,
“\rightarrow”: “right arrow”,
“\Rightarrow”: “right arrow”,
“:”: “colon”</p>
</div></blockquote>
<p>};
var accentUnderMap = {</p>
<blockquote>
<div><p>“\underleftarrow”: “left arrow”,
“\underrightarrow”: “right arrow”,
“\underleftrightarrow”: “left-right arrow”,
“\undergroup”: “group”,
“\underlinesegment”: “line segment”,
“\utilde”: “tilde”</p>
</div></blockquote>
<p>};</p>
<dl>
<dt>var buildString = function buildString(str, type, a11yStrings) {</dt><dd><dl class="simple">
<dt>if (!str) {</dt><dd><p>return;</p>
</dd>
</dl>
<p>}</p>
<p>var ret;</p>
<dl class="simple">
<dt>if (type === “open”) {</dt><dd><p>ret = str in openMap ? openMap[str] : stringMap[str] || str;</p>
</dd>
<dt>} else if (type === “close”) {</dt><dd><p>ret = str in closeMap ? closeMap[str] : stringMap[str] || str;</p>
</dd>
<dt>} else if (type === “bin”) {</dt><dd><p>ret = binMap[str] || str;</p>
</dd>
<dt>} else if (type === “rel”) {</dt><dd><p>ret = relMap[str] || str;</p>
</dd>
<dt>} else {</dt><dd><p>ret = stringMap[str] || str;</p>
</dd>
</dl>
<p>} // If the text to add is a number and there is already a string
// in the list and the last string is a number then we should
// combine them into a single number</p>
<p>if (/^d+$/.test(ret) &amp;&amp; a11yStrings.length &gt; 0 &amp;&amp; // TODO(kevinb): check that the last item in a11yStrings is a string
// I think we might be able to drop the nested arrays, which would make
// this easier to type - $FlowFixMe
/^d+$/.test(a11yStrings[a11yStrings.length - 1])) {</p>
<blockquote>
<div><p>a11yStrings[a11yStrings.length - 1] += ret;</p>
</div></blockquote>
<dl class="simple">
<dt>} else if (ret) {</dt><dd><p>a11yStrings.push(ret);</p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
<p>};</p>
<dl class="simple">
<dt>var buildRegion = function buildRegion(a11yStrings, callback) {</dt><dd><p>var regionStrings = [];
a11yStrings.push(regionStrings);
callback(regionStrings);</p>
</dd>
</dl>
<p>};</p>
<dl>
<dt>var handleObject = function handleObject(tree, a11yStrings, atomType) {</dt><dd><p>// Everything else is assumed to be an object…
switch (tree.type) {</p>
<blockquote>
<div><dl>
<dt>case “accent”:</dt><dd><dl>
<dt>{</dt><dd><dl class="simple">
<dt>buildRegion(a11yStrings, function (a11yStrings) {</dt><dd><p>buildA11yStrings(tree.base, a11yStrings, atomType);
a11yStrings.push(“with”);
buildString(tree.label, “normal”, a11yStrings);
a11yStrings.push(“on top”);</p>
</dd>
</dl>
<p>});
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “accentUnder”:</dt><dd><dl>
<dt>{</dt><dd><dl class="simple">
<dt>buildRegion(a11yStrings, function (a11yStrings) {</dt><dd><p>buildA11yStrings(tree.base, a11yStrings, atomType);
a11yStrings.push(“with”);
buildString(accentUnderMap[tree.label], “normal”, a11yStrings);
a11yStrings.push(“underneath”);</p>
</dd>
</dl>
<p>});
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “accent-token”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>// Used internally by accent symbols.
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “atom”:</dt><dd><dl>
<dt>{</dt><dd><p>var text = tree.text;</p>
<dl>
<dt>switch (tree.family) {</dt><dd><dl>
<dt>case “bin”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>buildString(text, “bin”, a11yStrings);
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “close”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>buildString(text, “close”, a11yStrings);
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
<p>// TODO(kevinb): figure out what should be done for inner</p>
<dl>
<dt>case “inner”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>buildString(tree.text, “inner”, a11yStrings);
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “open”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>buildString(text, “open”, a11yStrings);
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “punct”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>buildString(text, “punct”, a11yStrings);
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “rel”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>buildString(text, “rel”, a11yStrings);
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>default:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>tree.family;
throw new Error(”&quot;” + tree.family + “&quot; is not a valid atom type”);</p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
</dd>
</dl>
<p>}</p>
<p>break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “color”:</dt><dd><dl>
<dt>{</dt><dd><p>var color = tree.color.replace(/katex-/, “”);
buildRegion(a11yStrings, function (regionStrings) {</p>
<blockquote>
<div><p>regionStrings.push(“start color “ + color);
buildA11yStrings(tree.body, regionStrings, atomType);
regionStrings.push(“end color “ + color);</p>
</div></blockquote>
<p>});
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “color-token”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>// Used by color, colorbox, and fcolorbox but not directly rendered.
// It’s a leaf node and has no children so just break.
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “delimsizing”:</dt><dd><dl>
<dt>{</dt><dd><dl class="simple">
<dt>if (tree.delim &amp;&amp; tree.delim !== “.”) {</dt><dd><p>buildString(tree.delim, “normal”, a11yStrings);</p>
</dd>
</dl>
<p>}</p>
<p>break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “genfrac”:</dt><dd><dl>
<dt>{</dt><dd><dl>
<dt>buildRegion(a11yStrings, function (regionStrings) {</dt><dd><p>// genfrac can have unbalanced delimiters
var leftDelim = tree.leftDelim,</p>
<blockquote>
<div><p>rightDelim = tree.rightDelim; // NOTE: Not sure if this is a safe assumption</p>
</div></blockquote>
<p>// hasBarLine true -&gt; fraction, false -&gt; binomial</p>
<dl class="simple">
<dt>if (tree.hasBarLine) {</dt><dd><p>regionStrings.push(“start fraction”);
leftDelim &amp;&amp; buildString(leftDelim, “open”, regionStrings);
buildA11yStrings(tree.numer, regionStrings, atomType);
regionStrings.push(“divided by”);
buildA11yStrings(tree.denom, regionStrings, atomType);
rightDelim &amp;&amp; buildString(rightDelim, “close”, regionStrings);
regionStrings.push(“end fraction”);</p>
</dd>
<dt>} else {</dt><dd><p>regionStrings.push(“start binomial”);
leftDelim &amp;&amp; buildString(leftDelim, “open”, regionStrings);
buildA11yStrings(tree.numer, regionStrings, atomType);
regionStrings.push(“over”);
buildA11yStrings(tree.denom, regionStrings, atomType);
rightDelim &amp;&amp; buildString(rightDelim, “close”, regionStrings);
regionStrings.push(“end binomial”);</p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
<p>});
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “kern”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>// No op: we don’t attempt to present kerning information
// to the screen reader.
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “leftright”:</dt><dd><dl>
<dt>{</dt><dd><dl class="simple">
<dt>buildRegion(a11yStrings, function (regionStrings) {</dt><dd><p>buildString(tree.left, “open”, regionStrings);
buildA11yStrings(tree.body, regionStrings, atomType);
buildString(tree.right, “close”, regionStrings);</p>
</dd>
</dl>
<p>});
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “leftright-right”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>// TODO: double check that this is a no-op
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “lap”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>buildA11yStrings(tree.body, a11yStrings, atomType);
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “mathord”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>buildString(tree.text, “normal”, a11yStrings);
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “op”:</dt><dd><dl>
<dt>{</dt><dd><dl class="simple">
<dt>var body = tree.body,</dt><dd><p>name = tree.name;</p>
</dd>
<dt>if (body) {</dt><dd><p>buildA11yStrings(body, a11yStrings, atomType);</p>
</dd>
<dt>} else if (name) {</dt><dd><p>buildString(name, “normal”, a11yStrings);</p>
</dd>
</dl>
<p>}</p>
<p>break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “op-token”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>// Used internally by operator symbols.
buildString(tree.text, atomType, a11yStrings);
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “ordgroup”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>buildA11yStrings(tree.body, a11yStrings, atomType);
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “overline”:</dt><dd><dl>
<dt>{</dt><dd><dl class="simple">
<dt>buildRegion(a11yStrings, function (a11yStrings) {</dt><dd><p>a11yStrings.push(“start overline”);
buildA11yStrings(tree.body, a11yStrings, atomType);
a11yStrings.push(“end overline”);</p>
</dd>
</dl>
<p>});
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “phantom”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>a11yStrings.push(“empty space”);
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “raisebox”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>buildA11yStrings(tree.body, a11yStrings, atomType);
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “rule”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>a11yStrings.push(“rectangle”);
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “sizing”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>buildA11yStrings(tree.body, a11yStrings, atomType);
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “spacing”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>a11yStrings.push(“space”);
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “styling”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>// We ignore the styling and just pass through the contents
buildA11yStrings(tree.body, a11yStrings, atomType);
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “sqrt”:</dt><dd><dl>
<dt>{</dt><dd><dl>
<dt>buildRegion(a11yStrings, function (regionStrings) {</dt><dd><dl>
<dt>var body = tree.body,</dt><dd><p>index = tree.index;</p>
</dd>
<dt>if (index) {</dt><dd><p>var indexString = flatten(buildA11yStrings(index, [], atomType)).join(“,”);</p>
<dl class="simple">
<dt>if (indexString === “3”) {</dt><dd><p>regionStrings.push(“cube root of”);
buildA11yStrings(body, regionStrings, atomType);
regionStrings.push(“end cube root”);
return;</p>
</dd>
</dl>
<p>}</p>
<p>regionStrings.push(“root”);
regionStrings.push(“start index”);
buildA11yStrings(index, regionStrings, atomType);
regionStrings.push(“end index”);
return;</p>
</dd>
</dl>
<p>}</p>
<p>regionStrings.push(“square root of”);
buildA11yStrings(body, regionStrings, atomType);
regionStrings.push(“end square root”);</p>
</dd>
</dl>
<p>});
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “supsub”:</dt><dd><dl>
<dt>{</dt><dd><dl class="simple">
<dt>var base = tree.base,</dt><dd><p>sub = tree.sub,
sup = tree.sup;</p>
</dd>
</dl>
<p>var isLog = false;</p>
<dl class="simple">
<dt>if (base) {</dt><dd><p>buildA11yStrings(base, a11yStrings, atomType);
isLog = base.type === “op” &amp;&amp; base.name === “\log”;</p>
</dd>
</dl>
<p>}</p>
<dl>
<dt>if (sub) {</dt><dd><p>var regionName = isLog ? “base” : “subscript”;
buildRegion(a11yStrings, function (regionStrings) {</p>
<blockquote>
<div><p>regionStrings.push(“start “ + regionName);
buildA11yStrings(sub, regionStrings, atomType);
regionStrings.push(“end “ + regionName);</p>
</div></blockquote>
<p>});</p>
</dd>
</dl>
<p>}</p>
<dl>
<dt>if (sup) {</dt><dd><dl>
<dt>buildRegion(a11yStrings, function (regionStrings) {</dt><dd><p>var supString = flatten(buildA11yStrings(sup, [], atomType)).join(“,”);</p>
<dl class="simple">
<dt>if (supString in powerMap) {</dt><dd><p>regionStrings.push(powerMap[supString]);
return;</p>
</dd>
</dl>
<p>}</p>
<p>regionStrings.push(“start superscript”);
buildA11yStrings(sup, regionStrings, atomType);
regionStrings.push(“end superscript”);</p>
</dd>
</dl>
<p>});</p>
</dd>
</dl>
<p>}</p>
<p>break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “text”:</dt><dd><dl>
<dt>{</dt><dd><p>// TODO: handle other fonts
if (tree.font === “\textbf”) {</p>
<blockquote>
<div><dl class="simple">
<dt>buildRegion(a11yStrings, function (regionStrings) {</dt><dd><p>regionStrings.push(“start bold text”);
buildA11yStrings(tree.body, regionStrings, atomType);
regionStrings.push(“end bold text”);</p>
</dd>
</dl>
<p>});
break;</p>
</div></blockquote>
<p>}</p>
<dl class="simple">
<dt>buildRegion(a11yStrings, function (regionStrings) {</dt><dd><p>regionStrings.push(“start text”);
buildA11yStrings(tree.body, regionStrings, atomType);
regionStrings.push(“end text”);</p>
</dd>
</dl>
<p>});
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “textord”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>buildString(tree.text, atomType, a11yStrings);
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “smash”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>buildA11yStrings(tree.body, a11yStrings, atomType);
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “enclose”:</dt><dd><dl>
<dt>{</dt><dd><p>// TODO: create a map for these.
// TODO: differentiate between a body with a single atom, e.g.
// “cancel a” instead of “start cancel, a, end cancel”
if (/cancel/.test(tree.label)) {</p>
<blockquote>
<div><dl class="simple">
<dt>buildRegion(a11yStrings, function (regionStrings) {</dt><dd><p>regionStrings.push(“start cancel”);
buildA11yStrings(tree.body, regionStrings, atomType);
regionStrings.push(“end cancel”);</p>
</dd>
</dl>
<p>});
break;</p>
</div></blockquote>
<dl>
<dt>} else if (/box/.test(tree.label)) {</dt><dd><dl class="simple">
<dt>buildRegion(a11yStrings, function (regionStrings) {</dt><dd><p>regionStrings.push(“start box”);
buildA11yStrings(tree.body, regionStrings, atomType);
regionStrings.push(“end box”);</p>
</dd>
</dl>
<p>});
break;</p>
</dd>
<dt>} else if (/sout/.test(tree.label)) {</dt><dd><dl class="simple">
<dt>buildRegion(a11yStrings, function (regionStrings) {</dt><dd><p>regionStrings.push(“start strikeout”);
buildA11yStrings(tree.body, regionStrings, atomType);
regionStrings.push(“end strikeout”);</p>
</dd>
</dl>
<p>});
break;</p>
</dd>
</dl>
<p>}</p>
<p>throw new Error(“KaTeX-a11y: enclose node with “ + tree.label + “ not supported yet”);</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “vphantom”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>throw new Error(“KaTeX-a11y: vphantom not implemented yet”);</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “hphantom”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>throw new Error(“KaTeX-a11y: hphantom not implemented yet”);</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “operatorname”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>buildA11yStrings(tree.body, a11yStrings, atomType);
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “array”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>throw new Error(“KaTeX-a11y: array not implemented yet”);</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “raw”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>throw new Error(“KaTeX-a11y: raw not implemented yet”);</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “size”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>// Although there are nodes of type “size” in the parse tree, they have
// no semantic meaning and should be ignored.
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “url”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>throw new Error(“KaTeX-a11y: url not implemented yet”);</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “tag”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>throw new Error(“KaTeX-a11y: tag not implemented yet”);</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “verb”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>buildString(“start verbatim”, “normal”, a11yStrings);
buildString(tree.body, “normal”, a11yStrings);
buildString(“end verbatim”, “normal”, a11yStrings);
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “environment”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>throw new Error(“KaTeX-a11y: environment not implemented yet”);</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “horizBrace”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>buildString(“start “ + tree.label.slice(1), “normal”, a11yStrings);
buildA11yStrings(tree.base, a11yStrings, atomType);
buildString(“end “ + tree.label.slice(1), “normal”, a11yStrings);
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “infix”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>// All infix nodes are replace with other nodes.
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “includegraphics”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>throw new Error(“KaTeX-a11y: includegraphics not implemented yet”);</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “font”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>// TODO: callout the start/end of specific fonts
// TODO: map BBb{N} to “the naturals” or something like that
buildA11yStrings(tree.body, a11yStrings, atomType);
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “href”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>throw new Error(“KaTeX-a11y: href not implemented yet”);</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “cr”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>// This is used by environments.
throw new Error(“KaTeX-a11y: cr not implemented yet”);</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “underline”:</dt><dd><dl>
<dt>{</dt><dd><dl class="simple">
<dt>buildRegion(a11yStrings, function (a11yStrings) {</dt><dd><p>a11yStrings.push(“start underline”);
buildA11yStrings(tree.body, a11yStrings, atomType);
a11yStrings.push(“end underline”);</p>
</dd>
</dl>
<p>});
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “xArrow”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>throw new Error(“KaTeX-a11y: xArrow not implemented yet”);</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “mclass”:</dt><dd><dl>
<dt>{</dt><dd><p>// neq and ne are macros so we let “htmlmathml” render the mathmal
// side of things and extract the text from that.
var _atomType = tree.mclass.slice(1); // $FlowFixMe: drop the leading “m” from the values in mclass</p>
<p>buildA11yStrings(tree.body, a11yStrings, _atomType);
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “mathchoice”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>// TODO: track which which style we’re using, e.g. dispaly, text, etc.
// default to text style if even that may not be the correct style
buildA11yStrings(tree.text, a11yStrings, atomType);
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “htmlmathml”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>buildA11yStrings(tree.mathml, a11yStrings, atomType);
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “middle”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>buildString(tree.delim, atomType, a11yStrings);
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “internal”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>// internal nodes are never included in the parse tree
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>case “html”:</dt><dd><dl class="simple">
<dt>{</dt><dd><p>buildA11yStrings(tree.body, a11yStrings, atomType);
break;</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>default:</dt><dd><p>tree.type;
throw new Error(“KaTeX a11y un-recognized type: “ + tree.type);</p>
</dd>
</dl>
</div></blockquote>
<p>}</p>
</dd>
</dl>
<p>};</p>
<dl>
<dt>var buildA11yStrings = function buildA11yStrings(tree, a11yStrings, atomType) {</dt><dd><dl class="simple">
<dt>if (a11yStrings === void 0) {</dt><dd><p>a11yStrings = [];</p>
</dd>
</dl>
<p>}</p>
<dl>
<dt>if (tree instanceof Array) {</dt><dd><dl class="simple">
<dt>for (var i = 0; i &lt; tree.length; i++) {</dt><dd><p>buildA11yStrings(tree[i], a11yStrings, atomType);</p>
</dd>
</dl>
<p>}</p>
</dd>
<dt>} else {</dt><dd><p>handleObject(tree, a11yStrings, atomType);</p>
</dd>
</dl>
<p>}</p>
<p>return a11yStrings;</p>
</dd>
</dl>
<p>};</p>
<dl>
<dt>var flatten = function flatten(array) {</dt><dd><p>var result = [];
array.forEach(function (item) {</p>
<blockquote>
<div><dl class="simple">
<dt>if (item instanceof Array) {</dt><dd><p>result = result.concat(flatten(item));</p>
</dd>
<dt>} else {</dt><dd><p>result.push(item);</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
<p>});
return result;</p>
</dd>
</dl>
<p>};</p>
<dl>
<dt>var renderA11yString = function renderA11yString(text, settings) {</dt><dd><p>var tree = katex__WEBPACK_IMPORTED_MODULE_0___default.a.__parse(text, settings);</p>
<p>var a11yStrings = buildA11yStrings(tree, [], “normal”);
return flatten(a11yStrings).join(”, “);</p>
</dd>
</dl>
<p>};</p>
<p>/* harmony default export <a href="#id3"><span class="problematic" id="id4">*</span></a>/ __webpack_exports__[“default”] = (renderA11yString);</p>
<p>/<strong>*/ })
/****</strong>/ ])[“default”];
});</p>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">twit</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, jare.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../../_sources/static/katex/contrib/render-a11y-string.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>