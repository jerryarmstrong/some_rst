<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>&lt;no title&gt; &#8212; twit  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../../../../../../_static/pygments.css?v=b3523f8e" />
    <link rel="stylesheet" type="text/css" href="../../../../../../../../_static/alabaster.css?v=039e1c02" />
    <script data-url_root="../../../../../../../../" id="documentation_options" src="../../../../../../../../_static/documentation_options.js?v=b3ba4146"></script>
    <script src="../../../../../../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../../../../../../_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="../../../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../../../search.html" />
   
  <link rel="stylesheet" href="../../../../../../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <p>package com.twitter.search.common.schema.earlybird;</p>
<p>import java.io.IOException;
import java.util.Iterator;
import java.util.List;</p>
<p>import com.google.common.collect.ImmutableList;</p>
<p>import com.twitter.common.text.util.TokenStreamSerializer;
import com.twitter.search.common.schema.base.ImmutableSchemaInterface;
import com.twitter.search.common.schema.base.ThriftDocumentUtil;
import com.twitter.search.common.schema.earlybird.EarlybirdFieldConstants.EarlybirdFieldConstant;
import com.twitter.search.common.schema.thriftjava.ThriftDocument;
import com.twitter.search.common.schema.thriftjava.ThriftField;
import com.twitter.search.common.schema.thriftjava.ThriftFieldData;
import com.twitter.search.common.util.analysis.IntTermAttributeSerializer;
import com.twitter.search.common.util.analysis.TwitterNormalizedMinEngagementTokenStream;</p>
<dl>
<dt>/**</dt><dd><ul class="simple">
<li><p>Utility APIs for ThriftDocument used in Earlybird.</p></li>
</ul>
<p><a href="#id1"><span class="problematic" id="id2">*</span></a>/</p>
</dd>
<dt>public final class EarlybirdThriftDocumentUtil {</dt><dd><p>private static final EarlybirdFieldConstants ID_MAPPING = new EarlybirdFieldConstants();</p>
<p>private static final String FILTER_FORMAT_STRING = “__filter_%s”;</p>
<dl>
<dt>/**</dt><dd><ul class="simple">
<li><p>Used to check whether a thrift document has filter nullcast internal field set.</p></li>
<li><p>&#64;see #isNullcastFilterSet(ThriftDocument)</p></li>
</ul>
<p><a href="#id3"><span class="problematic" id="id4">*</span></a>/</p>
</dd>
<dt>private static final String NULLCAST_FILTER_TERM =</dt><dd><p>formatFilter(EarlybirdFieldConstant.NULLCAST_FILTER_TERM);</p>
</dd>
<dt>private static final String SELF_THREAD_FILTER_TERM =</dt><dd><p>formatFilter(EarlybirdFieldConstant.SELF_THREAD_FILTER_TERM);</p>
</dd>
<dt>private static final String DIRECTED_AT_FILTER_TERM =</dt><dd><p>formatFilter(EarlybirdFieldConstant.DIRECTED_AT_FILTER_TERM);</p>
</dd>
<dt>private EarlybirdThriftDocumentUtil() {</dt><dd><p>// Cannot instantiate.</p>
</dd>
</dl>
<p>}</p>
<dl>
<dt>/**</dt><dd><ul class="simple">
<li><p>Formats a regular, simple filter term. The ‘filter’ argument should correspond to a constant</p></li>
<li><p>from the Operator class, matching the operand (filter:links -&gt; “links”).</p></li>
</ul>
<p><a href="#id5"><span class="problematic" id="id6">*</span></a>/</p>
</dd>
<dt>public static final String formatFilter(String filter) {</dt><dd><p>return String.format(FILTER_FORMAT_STRING, filter);</p>
</dd>
</dl>
<p>}</p>
<dl>
<dt>/**</dt><dd><ul class="simple">
<li><p>Get status id.</p></li>
</ul>
<p><a href="#id7"><span class="problematic" id="id8">*</span></a>/</p>
</dd>
<dt>public static long getID(ThriftDocument document) {</dt><dd><dl class="simple">
<dt>return ThriftDocumentUtil.getLongValue(</dt><dd><p>document, EarlybirdFieldConstant.ID_FIELD.getFieldName(), ID_MAPPING);</p>
</dd>
</dl>
</dd>
</dl>
<p>}</p>
<dl>
<dt>/**</dt><dd><ul class="simple">
<li><p>Get Card name.</p></li>
</ul>
<p><a href="#id9"><span class="problematic" id="id10">*</span></a>/</p>
</dd>
<dt>public static String getCardName(ThriftDocument document) {</dt><dd><dl class="simple">
<dt>return ThriftDocumentUtil.getStringValue(</dt><dd><p>document, EarlybirdFieldConstant.CARD_NAME_FIELD.getFieldName(), ID_MAPPING);</p>
</dd>
</dl>
</dd>
</dl>
<p>}</p>
<dl>
<dt>/**</dt><dd><ul class="simple">
<li><p>Get Card language.</p></li>
</ul>
<p><a href="#id11"><span class="problematic" id="id12">*</span></a>/</p>
</dd>
<dt>public static String getCardLang(ThriftDocument document) {</dt><dd><dl class="simple">
<dt>return ThriftDocumentUtil.getStringValue(</dt><dd><p>document, EarlybirdFieldConstant.CARD_LANG.getFieldName(), ID_MAPPING);</p>
</dd>
</dl>
</dd>
</dl>
<p>}</p>
<dl>
<dt>/**</dt><dd><ul class="simple">
<li><p>Get Card language CSF.</p></li>
<li></li>
<li><p>card language CSF is represented internally as an integer ID for a ThriftLanguage.</p></li>
</ul>
<p><a href="#id13"><span class="problematic" id="id14">*</span></a>/</p>
</dd>
<dt>public static int getCardLangCSF(ThriftDocument document) {</dt><dd><dl class="simple">
<dt>return ThriftDocumentUtil.getIntValue(</dt><dd><p>document, EarlybirdFieldConstant.CARD_LANG_CSF.getFieldName(), ID_MAPPING);</p>
</dd>
</dl>
</dd>
</dl>
<p>}</p>
<dl>
<dt>/**</dt><dd><ul class="simple">
<li><p>Get quoted tweet id.</p></li>
</ul>
<p><a href="#id15"><span class="problematic" id="id16">*</span></a>/</p>
</dd>
<dt>public static long getQuotedTweetID(ThriftDocument document) {</dt><dd><dl class="simple">
<dt>return ThriftDocumentUtil.getLongValue(</dt><dd><p>document, EarlybirdFieldConstant.QUOTED_TWEET_ID_FIELD.getFieldName(), ID_MAPPING);</p>
</dd>
</dl>
</dd>
</dl>
<p>}</p>
<dl>
<dt>/**</dt><dd><ul class="simple">
<li><p>Get quoted tweet user id.</p></li>
</ul>
<p><a href="#id17"><span class="problematic" id="id18">*</span></a>/</p>
</dd>
<dt>public static long getQuotedUserID(ThriftDocument document) {</dt><dd><dl class="simple">
<dt>return ThriftDocumentUtil.getLongValue(</dt><dd><p>document, EarlybirdFieldConstant.QUOTED_USER_ID_FIELD.getFieldName(), ID_MAPPING);</p>
</dd>
</dl>
</dd>
</dl>
<p>}</p>
<dl>
<dt>/**</dt><dd><ul class="simple">
<li><p>Get directed at user id.</p></li>
</ul>
<p><a href="#id19"><span class="problematic" id="id20">*</span></a>/</p>
</dd>
<dt>public static long getDirectedAtUserId(ThriftDocument document) {</dt><dd><dl class="simple">
<dt>return ThriftDocumentUtil.getLongValue(</dt><dd><p>document, EarlybirdFieldConstant.DIRECTED_AT_USER_ID_FIELD.getFieldName(), ID_MAPPING);</p>
</dd>
</dl>
</dd>
</dl>
<p>}</p>
<dl>
<dt>/**</dt><dd><ul class="simple">
<li><p>Get directed at user id CSF.</p></li>
</ul>
<p><a href="#id21"><span class="problematic" id="id22">*</span></a>/</p>
</dd>
<dt>public static long getDirectedAtUserIdCSF(ThriftDocument document) {</dt><dd><dl class="simple">
<dt>return ThriftDocumentUtil.getLongValue(</dt><dd><p>document, EarlybirdFieldConstant.DIRECTED_AT_USER_ID_CSF.getFieldName(), ID_MAPPING);</p>
</dd>
</dl>
</dd>
</dl>
<p>}</p>
<dl>
<dt>/**</dt><dd><ul class="simple">
<li><p>Get reference author id CSF.</p></li>
</ul>
<p><a href="#id23"><span class="problematic" id="id24">*</span></a>/</p>
</dd>
<dt>public static long getReferenceAuthorIdCSF(ThriftDocument document) {</dt><dd><dl class="simple">
<dt>return ThriftDocumentUtil.getLongValue(</dt><dd><p>document, EarlybirdFieldConstant.REFERENCE_AUTHOR_ID_CSF.getFieldName(), ID_MAPPING);</p>
</dd>
</dl>
</dd>
</dl>
<p>}</p>
<dl>
<dt>/**</dt><dd><ul class="simple">
<li><p>Get links.</p></li>
</ul>
<p><a href="#id25"><span class="problematic" id="id26">*</span></a>/</p>
</dd>
<dt>public static List&lt;String&gt; getLinks(ThriftDocument document) {</dt><dd><p>return getStringValues(document, EarlybirdFieldConstant.LINKS_FIELD);</p>
</dd>
</dl>
<p>}</p>
<dl>
<dt>/**</dt><dd><ul class="simple">
<li><p>Get created at timestamp in sec.</p></li>
</ul>
<p><a href="#id27"><span class="problematic" id="id28">*</span></a>/</p>
</dd>
<dt>public static int getCreatedAtSec(ThriftDocument document) {</dt><dd><dl class="simple">
<dt>return ThriftDocumentUtil.getIntValue(</dt><dd><p>document, EarlybirdFieldConstant.CREATED_AT_FIELD.getFieldName(), ID_MAPPING);</p>
</dd>
</dl>
</dd>
</dl>
<p>}</p>
<dl>
<dt>/**</dt><dd><ul class="simple">
<li><p>Get created at timestamp in ms.</p></li>
</ul>
<p><a href="#id29"><span class="problematic" id="id30">*</span></a>/</p>
</dd>
<dt>public static long getCreatedAtMs(ThriftDocument document) {</dt><dd><p>long createdAtSec = (long) getCreatedAtSec(document);
return createdAtSec * 1000L;</p>
</dd>
</dl>
<p>}</p>
<dl>
<dt>/**</dt><dd><ul class="simple">
<li><p>Get from user id.</p></li>
</ul>
<p><a href="#id31"><span class="problematic" id="id32">*</span></a>/</p>
</dd>
<dt>public static long getFromUserID(ThriftDocument document) {</dt><dd><dl class="simple">
<dt>return ThriftDocumentUtil.getLongValue(</dt><dd><p>document, EarlybirdFieldConstant.FROM_USER_ID_FIELD.getFieldName(), ID_MAPPING);</p>
</dd>
</dl>
</dd>
</dl>
<p>}</p>
<dl>
<dt>/**</dt><dd><ul class="simple">
<li><p>Get from user.</p></li>
</ul>
<p><a href="#id33"><span class="problematic" id="id34">*</span></a>/</p>
</dd>
<dt>public static String getFromUser(ThriftDocument document) {</dt><dd><dl class="simple">
<dt>return ThriftDocumentUtil.getStringValue(</dt><dd><p>document, EarlybirdFieldConstant.FROM_USER_FIELD.getFieldName(), ID_MAPPING);</p>
</dd>
</dl>
</dd>
</dl>
<p>}</p>
<dl>
<dt>/**</dt><dd><ul class="simple">
<li><p>Get tokenized from user display name.</p></li>
</ul>
<p><a href="#id35"><span class="problematic" id="id36">*</span></a>/</p>
</dd>
<dt>public static String getFromUserDisplayName(ThriftDocument document) {</dt><dd><dl class="simple">
<dt>return ThriftDocumentUtil.getStringValue(</dt><dd><p>document, EarlybirdFieldConstant.TOKENIZED_USER_NAME_FIELD.getFieldName(), ID_MAPPING);</p>
</dd>
</dl>
</dd>
</dl>
<p>}</p>
<dl>
<dt>/**</dt><dd><ul class="simple">
<li><p>Get tokenized from user.</p></li>
</ul>
<p><a href="#id37"><span class="problematic" id="id38">*</span></a>/</p>
</dd>
<dt>public static String getTokenizedFromUser(ThriftDocument document) {</dt><dd><dl class="simple">
<dt>return ThriftDocumentUtil.getStringValue(</dt><dd><p>document, EarlybirdFieldConstant.TOKENIZED_FROM_USER_FIELD.getFieldName(), ID_MAPPING);</p>
</dd>
</dl>
</dd>
</dl>
<p>}</p>
<dl>
<dt>/**</dt><dd><ul class="simple">
<li><p>Get resolved links text.</p></li>
</ul>
<p><a href="#id39"><span class="problematic" id="id40">*</span></a>/</p>
</dd>
<dt>public static String getResolvedLinksText(ThriftDocument document) {</dt><dd><dl class="simple">
<dt>return ThriftDocumentUtil.getStringValue(</dt><dd><p>document, EarlybirdFieldConstant.RESOLVED_LINKS_TEXT_FIELD.getFieldName(), ID_MAPPING);</p>
</dd>
</dl>
</dd>
</dl>
<p>}</p>
<dl>
<dt>/**</dt><dd><ul class="simple">
<li><p>Get iso language code.</p></li>
</ul>
<p><a href="#id41"><span class="problematic" id="id42">*</span></a>/</p>
</dd>
<dt>public static List&lt;String&gt; getISOLanguage(ThriftDocument document) {</dt><dd><dl class="simple">
<dt>return ThriftDocumentUtil.getStringValues(</dt><dd><p>document, EarlybirdFieldConstant.ISO_LANGUAGE_FIELD.getFieldName(), ID_MAPPING);</p>
</dd>
</dl>
</dd>
</dl>
<p>}</p>
<dl>
<dt>/**</dt><dd><ul class="simple">
<li><p>First remove the old timestamp if they exist.</p></li>
<li><p>Then add the created at and created at csf fields to the given thrift document.</p></li>
</ul>
<p><a href="#id43"><span class="problematic" id="id44">*</span></a>/</p>
</dd>
<dt>public static void replaceCreatedAtAndCreatedAtCSF(ThriftDocument document, int value) {</dt><dd><p>removeField(document, EarlybirdFieldConstant.CREATED_AT_FIELD);
removeField(document, EarlybirdFieldConstant.CREATED_AT_CSF_FIELD);</p>
<p>addIntField(document, EarlybirdFieldConstant.CREATED_AT_FIELD, value);
addIntField(document, EarlybirdFieldConstant.CREATED_AT_CSF_FIELD, value);</p>
</dd>
</dl>
<p>}</p>
<dl>
<dt>/**</dt><dd><ul class="simple">
<li><p>Add the given int value as the given field into the given document.</p></li>
</ul>
<p><a href="#id45"><span class="problematic" id="id46">*</span></a>/</p>
</dd>
<dt>public static ThriftDocument addIntField(</dt><dd><blockquote>
<div><p>ThriftDocument document, EarlybirdFieldConstant fieldConstant, int value) {</p>
</div></blockquote>
<p>ThriftFieldData fieldData = new ThriftFieldData().setIntValue(value);
ThriftField field =</p>
<blockquote>
<div><p>new ThriftField().setFieldConfigId(fieldConstant.getFieldId()).setFieldData(fieldData);</p>
</div></blockquote>
<p>document.addToFields(field);
return document;</p>
</dd>
</dl>
<p>}</p>
<dl>
<dt>private static EarlybirdFieldConstant getFeatureField(EarlybirdFieldConstant field) {</dt><dd><dl>
<dt>if (field.getFieldName().startsWith(</dt><dd><blockquote>
<div><p>EarlybirdFieldConstant.ENCODED_TWEET_FEATURES_FIELD.getFieldName())) {</p>
</div></blockquote>
<p>return EarlybirdFieldConstant.ENCODED_TWEET_FEATURES_FIELD;</p>
</dd>
<dt>} else if (field.getFieldName().startsWith(</dt><dd><blockquote>
<div><p>EarlybirdFieldConstant.EXTENDED_ENCODED_TWEET_FEATURES_FIELD.getFieldName())) {</p>
</div></blockquote>
<p>return EarlybirdFieldConstant.EXTENDED_ENCODED_TWEET_FEATURES_FIELD;</p>
</dd>
<dt>} else {</dt><dd><p>throw new IllegalArgumentException(“Not a feature field: “ + field);</p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
<p>}</p>
<dl>
<dt>/**</dt><dd><ul class="simple">
<li><p>Get the feature value of a field.</p></li>
</ul>
<p><a href="#id47"><span class="problematic" id="id48">*</span></a>/</p>
</dd>
<dt>public static int getFeatureValue(</dt><dd><blockquote>
<div><p>ImmutableSchemaInterface schema,
ThriftDocument document,
EarlybirdFieldConstant field) {</p>
</div></blockquote>
<p>EarlybirdFieldConstant featureField = getFeatureField(field);</p>
<dl>
<dt>byte[] encodedFeaturesBytes =</dt><dd><p>ThriftDocumentUtil.getBytesValue(document, featureField.getFieldName(), ID_MAPPING);</p>
</dd>
<dt>if (encodedFeaturesBytes == null) {</dt><dd><p>// Treat the feature value as 0 if there is no encoded feature field.
return 0;</p>
</dd>
<dt>} else {</dt><dd><dl class="simple">
<dt>EarlybirdEncodedFeatures encodedFeatures = EarlybirdEncodedFeaturesUtil.fromBytes(</dt><dd><p>schema, featureField, encodedFeaturesBytes, 0);</p>
</dd>
</dl>
<p>return encodedFeatures.getFeatureValue(field);</p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
<p>}</p>
<dl>
<dt>/**</dt><dd><ul class="simple">
<li><p>Check whether the feature flag is set.</p></li>
</ul>
<p><a href="#id49"><span class="problematic" id="id50">*</span></a>/</p>
</dd>
<dt>public static boolean isFeatureBitSet(</dt><dd><blockquote>
<div><p>ImmutableSchemaInterface schema,
ThriftDocument document,
EarlybirdFieldConstant field) {</p>
</div></blockquote>
<p>EarlybirdFieldConstant featureField = getFeatureField(field);</p>
<dl>
<dt>byte[] encodedFeaturesBytes =</dt><dd><p>ThriftDocumentUtil.getBytesValue(document, featureField.getFieldName(), ID_MAPPING);</p>
</dd>
<dt>if (encodedFeaturesBytes == null) {</dt><dd><p>// Treat the bit as not set if there is no encoded feature field.
return false;</p>
</dd>
<dt>} else {</dt><dd><dl class="simple">
<dt>EarlybirdEncodedFeatures encodedFeatures = EarlybirdEncodedFeaturesUtil.fromBytes(</dt><dd><p>schema, featureField, encodedFeaturesBytes, 0);</p>
</dd>
</dl>
<p>return encodedFeatures.isFlagSet(field);</p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
<p>}</p>
<dl>
<dt>/**</dt><dd><ul class="simple">
<li><p>Check whether nullcast flag is set in the encoded features field.</p></li>
</ul>
<p><a href="#id51"><span class="problematic" id="id52">*</span></a>/</p>
</dd>
<dt>public static boolean isNullcastBitSet(ImmutableSchemaInterface schema, ThriftDocument document) {</dt><dd><p>return isFeatureBitSet(schema, document, EarlybirdFieldConstant.IS_NULLCAST_FLAG);</p>
</dd>
</dl>
<p>}</p>
<dl>
<dt>/**</dt><dd><ul class="simple">
<li><p>Remove all fields with the given field constant in a document.</p></li>
</ul>
<p><a href="#id53"><span class="problematic" id="id54">*</span></a>/</p>
</dd>
<dt>public static void removeField(ThriftDocument document, EarlybirdFieldConstant fieldConstant) {</dt><dd><p>List&lt;ThriftField&gt; fields = document.getFields();
if (fields != null) {</p>
<blockquote>
<div><p>Iterator&lt;ThriftField&gt; fieldsIterator = fields.iterator();
while (fieldsIterator.hasNext()) {</p>
<blockquote>
<div><dl class="simple">
<dt>if (fieldsIterator.next().getFieldConfigId() == fieldConstant.getFieldId()) {</dt><dd><p>fieldsIterator.remove();</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
<p>}</p>
</dd>
</dl>
<p>}</p>
<dl>
<dt>/**</dt><dd><ul class="simple">
<li><p>Remove a string field with given fieldConstant and value.</p></li>
</ul>
<p><a href="#id55"><span class="problematic" id="id56">*</span></a>/</p>
</dd>
<dt>public static void removeStringField(</dt><dd><blockquote>
<div><p>ThriftDocument document, EarlybirdFieldConstant fieldConstant, String value) {</p>
</div></blockquote>
<p>List&lt;ThriftField&gt; fields = document.getFields();
if (fields != null) {</p>
<blockquote>
<div><dl>
<dt>for (ThriftField field<span class="classifier">fields) {</span></dt><dd><dl>
<dt>if (field.getFieldConfigId() == fieldConstant.getFieldId()</dt><dd><blockquote>
<div><p>&amp;&amp; field.getFieldData().getStringValue().equals(value)) {</p>
</div></blockquote>
<p>fields.remove(field);
return;</p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
<p>}</p>
</dd>
</dl>
<p>}</p>
<dl>
<dt>/**</dt><dd><ul class="simple">
<li><p>Adds a new TokenStream field for each engagement counter if normalizedNumEngagements &gt;= 1.</p></li>
</ul>
<p><a href="#id57"><span class="problematic" id="id58">*</span></a>/</p>
</dd>
<dt>public static void addNormalizedMinEngagementField(</dt><dd><blockquote>
<div><p>ThriftDocument doc,
String fieldName,
int normalizedNumEngagements) throws IOException {</p>
</div></blockquote>
<dl class="simple">
<dt>if (normalizedNumEngagements &lt; 1) {</dt><dd><p>return;</p>
</dd>
</dl>
<p>}
TokenStreamSerializer serializer =</p>
<blockquote>
<div><p>new TokenStreamSerializer(ImmutableList.of(new IntTermAttributeSerializer()));</p>
</div></blockquote>
<dl class="simple">
<dt>TwitterNormalizedMinEngagementTokenStream stream = new</dt><dd><p>TwitterNormalizedMinEngagementTokenStream(normalizedNumEngagements);</p>
</dd>
</dl>
<p>byte[] serializedStream = serializer.serialize(stream);
ThriftFieldData fieldData = new ThriftFieldData().setTokenStreamValue(serializedStream);
ThriftField field = new ThriftField().setFieldConfigId(ID_MAPPING.getFieldID(fieldName))</p>
<blockquote>
<div><p>.setFieldData(fieldData);</p>
</div></blockquote>
<p>doc.addToFields(field);</p>
</dd>
</dl>
<p>}</p>
<dl>
<dt>public static List&lt;String&gt; getStringValues(</dt><dd><blockquote>
<div><p>ThriftDocument document, EarlybirdFieldConstant field) {</p>
</div></blockquote>
<p>return ThriftDocumentUtil.getStringValues(document, field.getFieldName(), ID_MAPPING);</p>
</dd>
</dl>
<p>}</p>
<dl class="simple">
<dt>public static boolean isNullcastFilterSet(ThriftDocument document) {</dt><dd><p>return isFilterSet(document, NULLCAST_FILTER_TERM);</p>
</dd>
</dl>
<p>}</p>
<dl class="simple">
<dt>public static boolean isSelfThreadFilterSet(ThriftDocument document) {</dt><dd><p>return isFilterSet(document, SELF_THREAD_FILTER_TERM);</p>
</dd>
</dl>
<p>}</p>
<dl class="simple">
<dt>public static String getSelfThreadFilterTerm() {</dt><dd><p>return SELF_THREAD_FILTER_TERM;</p>
</dd>
</dl>
<p>}</p>
<dl class="simple">
<dt>public static String getDirectedAtFilterTerm() {</dt><dd><p>return DIRECTED_AT_FILTER_TERM;</p>
</dd>
</dl>
<p>}</p>
<dl class="simple">
<dt>public static boolean isDirectedAtFilterSet(ThriftDocument document) {</dt><dd><p>return isFilterSet(document, DIRECTED_AT_FILTER_TERM);</p>
</dd>
</dl>
<p>}</p>
<dl>
<dt>/**</dt><dd><ul class="simple">
<li><p>Check whether given filter is set in the internal field.</p></li>
</ul>
<p><a href="#id59"><span class="problematic" id="id60">*</span></a>/</p>
</dd>
<dt>private static boolean isFilterSet(ThriftDocument document, String filter) {</dt><dd><dl>
<dt>List&lt;String&gt; terms = ThriftDocumentUtil.getStringValues(</dt><dd><p>document, EarlybirdFieldConstant.INTERNAL_FIELD.getFieldName(), ID_MAPPING);</p>
</dd>
<dt>for (String term<span class="classifier">terms) {</span></dt><dd><dl class="simple">
<dt>if (filter.equals(term)) {</dt><dd><p>return true;</p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
<p>}
return false;</p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
<p>}</p>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../../../../../../index2.rst.html">twit</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../../../../../../index2.rst.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, jare.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../../../../../../../_sources/src/java/com/twitter/search/common/schema/earlybird/EarlybirdThriftDocumentUtil.java.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>