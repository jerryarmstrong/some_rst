<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>&lt;no title&gt; &#8212; twit  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/pygments.css?v=b3523f8e" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/alabaster.css?v=039e1c02" />
    <script data-url_root="../../../../../../" id="documentation_options" src="../../../../../../_static/documentation_options.js?v=b3ba4146"></script>
    <script src="../../../../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../../../../_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" />
   
  <link rel="stylesheet" href="../../../../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <p>package com.twitter.search.earlybird_root;</p>
<p>import javax.inject.Inject;
import javax.inject.Named;
import javax.inject.Singleton;</p>
<p>import com.twitter.finagle.Service;
import com.twitter.finagle.mtls.authorization.server.MtlsServerSessionTrackerFilter;
import com.twitter.search.common.clientstats.FinagleClientStatsFilter;
import com.twitter.search.common.root.LoggingFilter;
import com.twitter.search.common.root.RequestValidationFilter;
import com.twitter.search.earlybird.thrift.EarlybirdRequest;
import com.twitter.search.earlybird.thrift.EarlybirdResponse;
import com.twitter.search.earlybird.thrift.EarlybirdService;
import com.twitter.search.earlybird.thrift.EarlybirdStatusResponse;
import com.twitter.search.earlybird_root.caching.FacetsCacheFilter;
import com.twitter.search.earlybird_root.caching.RecencyCacheFilter;
import com.twitter.search.earlybird_root.caching.RelevanceCacheFilter;
import com.twitter.search.earlybird_root.caching.RelevanceZeroResultsCacheFilter;
import com.twitter.search.earlybird_root.caching.StrictRecencyCacheFilter;
import com.twitter.search.earlybird_root.caching.TermStatsCacheFilter;
import com.twitter.search.earlybird_root.caching.TopTweetsCacheFilter;
import com.twitter.search.earlybird_root.common.EarlybirdRequestContext;
import com.twitter.search.earlybird_root.filters.ClientIdQuotaFilter;
import com.twitter.search.earlybird_root.filters.ClientIdTrackingFilter;
import com.twitter.search.earlybird_root.filters.ClientRequestTimeFilter;
import com.twitter.search.earlybird_root.filters.DeadlineTimeoutStatsFilter;
import com.twitter.search.earlybird_root.filters.DropAllProtectedOperatorFilter;
import com.twitter.search.earlybird_root.filters.EarlybirdFeatureSchemaAnnotateFilter;
import com.twitter.search.earlybird_root.filters.InitializeRequestContextFilter;
import com.twitter.search.earlybird_root.filters.MetadataTrackingFilter;
import com.twitter.search.earlybird_root.filters.NullcastTrackingFilter;
import com.twitter.search.earlybird_root.filters.PostCacheRequestTypeCountFilter;
import com.twitter.search.earlybird_root.filters.PreCacheRequestTypeCountFilter;
import com.twitter.search.earlybird_root.filters.QueryLangStatFilter;
import com.twitter.search.earlybird_root.filters.QueryOperatorStatFilter;
import com.twitter.search.earlybird_root.filters.RequestResultStatsFilter;
import com.twitter.search.earlybird_root.filters.ResponseCodeStatFilter;
import com.twitter.search.earlybird_root.filters.SearchPayloadSizeLocalContextFilter;
import com.twitter.search.earlybird_root.filters.StratoAttributionClientIdFilter;
import com.twitter.search.earlybird_root.filters.TopLevelExceptionHandlingFilter;
import com.twitter.util.Future;</p>
<p>&#64;Singleton
public class RealtimeCgRootService implements EarlybirdService.ServiceIface {</p>
<blockquote>
<div><p>private final Service&lt;EarlybirdRequest, EarlybirdResponse&gt; allFiltersAndService;</p>
<p>&#64;Inject
public RealtimeCgRootService(</p>
<blockquote>
<div><blockquote>
<div><p>TopLevelExceptionHandlingFilter topLevelExceptionHandlingFilter,
ResponseCodeStatFilter responseCodeStatFilter,
LoggingFilter&lt;EarlybirdRequest, EarlybirdResponse&gt; loggingFilter,
RequestValidationFilter&lt;EarlybirdRequest, EarlybirdResponse&gt; validationFilter,
MtlsServerSessionTrackerFilter&lt;EarlybirdRequest, EarlybirdResponse&gt; mtlsFilter,
FinagleClientStatsFilter&lt;EarlybirdRequest, EarlybirdResponse&gt; finagleStatsFilter,
InitializeFilter initializeFilter,
InitializeRequestContextFilter initializeRequestContextFilter,
QueryLangStatFilter queryLangStatFilter,
DropAllProtectedOperatorFilter dropAllProtectedOperatorFilter,
QueryOperatorStatFilter queryOperatorStatFilter,
RequestResultStatsFilter requestResultStatsFilter,
PreCacheRequestTypeCountFilter preCacheCountFilter,
RecencyCacheFilter recencyCacheFilter,
RelevanceCacheFilter relevanceCacheFilter,
RelevanceZeroResultsCacheFilter relevanceZeroResultsCacheFilter,
StrictRecencyCacheFilter strictRecencyCacheFilter,
FacetsCacheFilter facetsCacheFilter,
TermStatsCacheFilter termStatsCacheFilter,
TopTweetsCacheFilter topTweetsCacheFilter,
PostCacheRequestTypeCountFilter postCacheCountFilter,
ClientIdTrackingFilter clientIdTrackingFilter,
ClientIdQuotaFilter quotaFilter,
MetadataTrackingFilter metadataTrackingFilter,
NullcastTrackingFilter nullcastTrackingFilter,
ClientRequestTimeFilter clientRequestTimeFilter,
DeadlineTimeoutStatsFilter deadlineTimeoutStatsFilter,
EarlybirdFeatureSchemaAnnotateFilter featureSchemaAnnotateFilter,
SearchPayloadSizeLocalContextFilter searchPayloadSizeLocalContextFilter,
&#64;Named(ProtectedScatterGatherModule.NAMED_SCATTER_GATHER_SERVICE)</p>
<blockquote>
<div><p>Service&lt;EarlybirdRequestContext, EarlybirdResponse&gt; scatterGatherService,</p>
</div></blockquote>
<p>StratoAttributionClientIdFilter stratoAttributionClientIdFilter) {</p>
</div></blockquote>
<dl class="simple">
<dt>this.allFiltersAndService =</dt><dd><dl class="simple">
<dt>loggingFilter</dt><dd><p>.andThen(topLevelExceptionHandlingFilter)
.andThen(stratoAttributionClientIdFilter)
.andThen(clientRequestTimeFilter)
.andThen(searchPayloadSizeLocalContextFilter)
.andThen(responseCodeStatFilter)
.andThen(requestResultStatsFilter)
.andThen(validationFilter)
.andThen(mtlsFilter)
.andThen(finagleStatsFilter)
.andThen(clientIdTrackingFilter)
.andThen(quotaFilter)
.andThen(metadataTrackingFilter)
.andThen(initializeFilter)
.andThen(initializeRequestContextFilter)
.andThen(deadlineTimeoutStatsFilter)
.andThen(queryLangStatFilter)
.andThen(nullcastTrackingFilter)
.andThen(dropAllProtectedOperatorFilter)
.andThen(queryOperatorStatFilter)
.andThen(preCacheCountFilter)
.andThen(recencyCacheFilter)
.andThen(relevanceCacheFilter)
.andThen(relevanceZeroResultsCacheFilter)
.andThen(strictRecencyCacheFilter)
.andThen(facetsCacheFilter)
.andThen(termStatsCacheFilter)
.andThen(topTweetsCacheFilter)
.andThen(postCacheCountFilter)
.andThen(featureSchemaAnnotateFilter)
.andThen(scatterGatherService);</p>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
<p>}</p>
<p>&#64;Override
public Future&lt;String&gt; getName() {</p>
<blockquote>
<div><p>return Future.value(“realtime_cg root”);</p>
</div></blockquote>
<p>}</p>
<p>&#64;Override
public Future&lt;EarlybirdStatusResponse&gt; getStatus() {</p>
<blockquote>
<div><p>throw new UnsupportedOperationException(“not supported”);</p>
</div></blockquote>
<p>}</p>
<p>&#64;Override
public Future&lt;EarlybirdResponse&gt; search(EarlybirdRequest request) {</p>
<blockquote>
<div><p>return allFiltersAndService.apply(request);</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
<p>}</p>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../../../../index2.rst.html">twit</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../../../../index2.rst.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, jare.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../../../../../_sources/src/java/com/twitter/search/earlybird_root/RealtimeCgRootService.java.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>